<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2018-05-27">
<meta name="description" content="Buying a house in Seattle, or how much does a 1/2 bathroom cost?">

<title>Regression for Housing Prices</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"><i class="bi bi-files" role="img">
</i> 
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"><i class="bi bi-person-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Regression for Housing Prices</h1>
                  <div>
        <div class="description">
          Buying a house in Seattle, or how much does a 1/2 bathroom cost?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">tidyverse</div>
                <div class="quarto-category">EDA</div>
                <div class="quarto-category">models</div>
                <div class="quarto-category">data vis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2018</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data" id="toc-data" class="nav-link active" data-scroll-target="#data"><span class="toc-section-number">1</span>  DATA</a>
  <ul class="collapse">
  <li><a href="#source" id="toc-source" class="nav-link" data-scroll-target="#source"><span class="toc-section-number">1.1</span>  Source</a></li>
  <li><a href="#a-quick-look-at-the-dataset" id="toc-a-quick-look-at-the-dataset" class="nav-link" data-scroll-target="#a-quick-look-at-the-dataset"><span class="toc-section-number">1.2</span>  A quick look at the dataset</a></li>
  <li><a href="#nas-check" id="toc-nas-check" class="nav-link" data-scroll-target="#nas-check"><span class="toc-section-number">1.3</span>  NAs check</a></li>
  </ul></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda"><span class="toc-section-number">2</span>  EDA</a>
  <ul class="collapse">
  <li><a href="#variable-price" id="toc-variable-price" class="nav-link" data-scroll-target="#variable-price"><span class="toc-section-number">2.1</span>  Variable <em>price</em></a></li>
  <li><a href="#variable-date" id="toc-variable-date" class="nav-link" data-scroll-target="#variable-date"><span class="toc-section-number">2.2</span>  Variable <em>date</em></a></li>
  <li><a href="#variable-id" id="toc-variable-id" class="nav-link" data-scroll-target="#variable-id"><span class="toc-section-number">2.3</span>  Variable <em>id</em></a></li>
  <li><a href="#variable-bedrooms" id="toc-variable-bedrooms" class="nav-link" data-scroll-target="#variable-bedrooms"><span class="toc-section-number">2.4</span>  Variable <em>bedrooms</em></a></li>
  <li><a href="#variable-floors" id="toc-variable-floors" class="nav-link" data-scroll-target="#variable-floors"><span class="toc-section-number">2.5</span>  Variable <em>floors</em></a></li>
  <li><a href="#variable-waterfront" id="toc-variable-waterfront" class="nav-link" data-scroll-target="#variable-waterfront"><span class="toc-section-number">2.6</span>  Variable <em>waterfront</em></a></li>
  <li><a href="#variable-view" id="toc-variable-view" class="nav-link" data-scroll-target="#variable-view"><span class="toc-section-number">2.7</span>  Variable <em>view</em></a></li>
  <li><a href="#variable-condition" id="toc-variable-condition" class="nav-link" data-scroll-target="#variable-condition"><span class="toc-section-number">2.8</span>  Variable <em>condition</em></a></li>
  <li><a href="#variable-grade" id="toc-variable-grade" class="nav-link" data-scroll-target="#variable-grade"><span class="toc-section-number">2.9</span>  Variable <em>grade</em></a></li>
  <li><a href="#variable-yr_built" id="toc-variable-yr_built" class="nav-link" data-scroll-target="#variable-yr_built"><span class="toc-section-number">2.10</span>  Variable <em>yr_built</em></a></li>
  <li><a href="#variable-sqft_living" id="toc-variable-sqft_living" class="nav-link" data-scroll-target="#variable-sqft_living"><span class="toc-section-number">2.11</span>  Variable <em>sqft_living</em></a></li>
  <li><a href="#variable-sqft_lot" id="toc-variable-sqft_lot" class="nav-link" data-scroll-target="#variable-sqft_lot"><span class="toc-section-number">2.12</span>  Variable <em>sqft_lot</em></a></li>
  <li><a href="#variable-sqft_above" id="toc-variable-sqft_above" class="nav-link" data-scroll-target="#variable-sqft_above"><span class="toc-section-number">2.13</span>  Variable <em>sqft_above</em></a></li>
  <li><a href="#variable-sqft_basement" id="toc-variable-sqft_basement" class="nav-link" data-scroll-target="#variable-sqft_basement"><span class="toc-section-number">2.14</span>  Variable <em>sqft_basement</em></a></li>
  </ul></li>
  <li><a href="#final-dataset" id="toc-final-dataset" class="nav-link" data-scroll-target="#final-dataset"><span class="toc-section-number">3</span>  FINAL DATASET</a>
  <ul class="collapse">
  <li><a href="#proper-dataset" id="toc-proper-dataset" class="nav-link" data-scroll-target="#proper-dataset"><span class="toc-section-number">3.1</span>  Proper dataset</a></li>
  <li><a href="#selection-of-variable-with-reggresion" id="toc-selection-of-variable-with-reggresion" class="nav-link" data-scroll-target="#selection-of-variable-with-reggresion"><span class="toc-section-number">3.2</span>  Selection of variable with reggresion</a>
  <ul class="collapse">
  <li><a href="#models-for-procedur-of-stepwise-selection-by-aic" id="toc-models-for-procedur-of-stepwise-selection-by-aic" class="nav-link" data-scroll-target="#models-for-procedur-of-stepwise-selection-by-aic"><span class="toc-section-number">3.2.1</span>  Models for procedur of stepwise selection by AIC</a></li>
  <li><a href="#backward-stepwise-model-selection-by-aic" id="toc-backward-stepwise-model-selection-by-aic" class="nav-link" data-scroll-target="#backward-stepwise-model-selection-by-aic"><span class="toc-section-number">3.2.2</span>  Backward stepwise model selection by AIC</a></li>
  <li><a href="#forward-stepwise-model-selection-by-aic" id="toc-forward-stepwise-model-selection-by-aic" class="nav-link" data-scroll-target="#forward-stepwise-model-selection-by-aic"><span class="toc-section-number">3.2.3</span>  Forward stepwise model selection by AIC</a></li>
  <li><a href="#both-direction-stepwise-model-selection-by-aic" id="toc-both-direction-stepwise-model-selection-by-aic" class="nav-link" data-scroll-target="#both-direction-stepwise-model-selection-by-aic"><span class="toc-section-number">3.2.4</span>  Both direction stepwise model selection by AIC</a></li>
  </ul></li>
  <li><a href="#final-dataset-1" id="toc-final-dataset-1" class="nav-link" data-scroll-target="#final-dataset-1"><span class="toc-section-number">3.3</span>  Final dataset</a></li>
  <li><a href="#train-test-split" id="toc-train-test-split" class="nav-link" data-scroll-target="#train-test-split"><span class="toc-section-number">3.4</span>  Train-test split</a></li>
  </ul></li>
  <li><a href="#model-regression" id="toc-model-regression" class="nav-link" data-scroll-target="#model-regression"><span class="toc-section-number">4</span>  MODEL: REGRESSION</a>
  <ul class="collapse">
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model"><span class="toc-section-number">4.1</span>  Model</a></li>
  <li><a href="#prediction" id="toc-prediction" class="nav-link" data-scroll-target="#prediction"><span class="toc-section-number">4.2</span>  Prediction</a></li>
  <li><a href="#models-test" id="toc-models-test" class="nav-link" data-scroll-target="#models-test"><span class="toc-section-number">4.3</span>  Model’s test</a></li>
  </ul></li>
  <li><a href="#model-support-vector-reggresion" id="toc-model-support-vector-reggresion" class="nav-link" data-scroll-target="#model-support-vector-reggresion"><span class="toc-section-number">5</span>  MODEL: SUPPORT VECTOR REGGRESION</a>
  <ul class="collapse">
  <li><a href="#model-1" id="toc-model-1" class="nav-link" data-scroll-target="#model-1"><span class="toc-section-number">5.1</span>  Model</a></li>
  <li><a href="#prediction-1" id="toc-prediction-1" class="nav-link" data-scroll-target="#prediction-1"><span class="toc-section-number">5.2</span>  Prediction</a></li>
  <li><a href="#models-test-1" id="toc-models-test-1" class="nav-link" data-scroll-target="#models-test-1"><span class="toc-section-number">5.3</span>  Model’s test</a></li>
  </ul></li>
  <li><a href="#model-random-forest" id="toc-model-random-forest" class="nav-link" data-scroll-target="#model-random-forest"><span class="toc-section-number">6</span>  MODEL: RANDOM FOREST</a>
  <ul class="collapse">
  <li><a href="#model-2" id="toc-model-2" class="nav-link" data-scroll-target="#model-2"><span class="toc-section-number">6.1</span>  Model</a></li>
  <li><a href="#prediction-2" id="toc-prediction-2" class="nav-link" data-scroll-target="#prediction-2"><span class="toc-section-number">6.2</span>  Prediction</a></li>
  <li><a href="#models-test-2" id="toc-models-test-2" class="nav-link" data-scroll-target="#models-test-2"><span class="toc-section-number">6.3</span>  Model’s test</a></li>
  </ul></li>
  <li><a href="#comparision-of-models" id="toc-comparision-of-models" class="nav-link" data-scroll-target="#comparision-of-models"><span class="toc-section-number">7</span>  COMPARISION OF MODELS</a>
  <ul class="collapse">
  <li><a href="#stat" id="toc-stat" class="nav-link" data-scroll-target="#stat"><span class="toc-section-number">7.1</span>  Stat</a></li>
  <li><a href="#metrics-plot" id="toc-metrics-plot" class="nav-link" data-scroll-target="#metrics-plot"><span class="toc-section-number">7.2</span>  Metrics plot</a></li>
  <li><a href="#plots-predictionreal" id="toc-plots-predictionreal" class="nav-link" data-scroll-target="#plots-predictionreal"><span class="toc-section-number">7.3</span>  Plots prediction~real</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<!--
Photo added by Yuval Zukerman: https://www.pexels.com/pl-pl/zdjecie/miasto-znane-miejsce-woda-panorama-13898912/
-->
<p>That was my very first project “bespoke” with <a href="https://www.kaggle.com/datasets/harlfoxem/housesalesprediction">real dataset</a> and the nice job of predicting the price of a house.</p>
<p>I have used three models: Regression, Support Vector Regression and Random Forest. It is not hard to guess which one was the best 🙃 I made a lot of beginner mistakes, but I have a lot of sentiment for this project.</p>
<!-- TOC style -->
<style>
#TOC {
overflow:auto;
}
body {
text-align: justify
}
h1 {
font-size: 22px
}
h2 {
font-size: 20px
}
h3 {
font-size: 18px
}
h1, .h1, h2, .h2, h3, .h3 {
margin-top: 20px;
}
p.caption {
font-style: bold;
margin-bottom: 30px;
margin-top: -10px;
text-align: middle;
}
pre code {
font-size: 11px;
}
</style>
<section id="data" class="level1 page-columns page-full" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> DATA</h1>
<section id="source" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="source"><span class="header-section-number">1.1</span> Source</h2>
<p>According to the instruction from Client - only columns with no 1:15 should be used for model building purposes, that is:</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 16%">
<col style="width: 64%">
</colgroup>
<thead>
<tr class="header">
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td>str</td>
<td>database identifier of the current row</td>
</tr>
<tr class="even">
<td>date</td>
<td>str</td>
<td>pricing date</td>
</tr>
<tr class="odd">
<td>price</td>
<td>float</td>
<td>the price</td>
</tr>
<tr class="even">
<td>bedrooms</td>
<td>float</td>
<td>number of bedrooms</td>
</tr>
<tr class="odd">
<td>bathrooms</td>
<td>float</td>
<td>number of bathrooms</td>
</tr>
<tr class="even">
<td>sqft_living</td>
<td>float</td>
<td>living space area</td>
</tr>
<tr class="odd">
<td>sqft_lot</td>
<td>int</td>
<td>lot area</td>
</tr>
<tr class="even">
<td>floors</td>
<td>float</td>
<td>number of floors</td>
</tr>
<tr class="odd">
<td>waterfront</td>
<td>int</td>
<td>indicator of whether the property is facing water {0,1}</td>
</tr>
<tr class="even">
<td>view</td>
<td>int</td>
<td>quality of view from the property (0:4)</td>
</tr>
<tr class="odd">
<td>condition</td>
<td>int</td>
<td>property condition (1:5)</td>
</tr>
<tr class="even">
<td>grade</td>
<td>int</td>
<td>property grade (1:13)</td>
</tr>
<tr class="odd">
<td>sqft_above</td>
<td>int</td>
<td>living area above ground level</td>
</tr>
<tr class="even">
<td>sqft_basement</td>
<td>int</td>
<td>area of basement</td>
</tr>
<tr class="odd">
<td>yr_built</td>
<td>int</td>
<td>year the building was built</td>
</tr>
</tbody>
</table>
<p>Size of dataset</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21613    21</code></pre>
</div>
</div>
</section>
<section id="a-quick-look-at-the-dataset" class="level2 page-columns page-full" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="a-quick-look-at-the-dataset"><span class="header-section-number">1.2</span> A quick look at the dataset</h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histograms</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>FIRST OBSERVATION ABOUT DATA SET</u></p>
<ul>
<li><p>variables <em>waterfront</em>, <em>view</em>, <em>condition</em> and <em>grade</em> are the categorical type variable (Factor),</p></li>
<li><p>variable <em>date</em> has to be change to date type,</p></li>
<li><p>to consideration: variable <em>yr_built</em> has to be change to date type,</p></li>
<li><p>to consideration: variable <em>id</em> has to be in normal not scientific format,</p></li>
<li><p>question: why variable <em>bathrooms</em> - number of bathrooms - has not integer value?</p></li>
<li><p>question: why variable <em>floors</em> - number of floor - has not integer value? (mezzanine?)</p></li>
<li><p>question: what describes variable <em>condition</em>? is that the expert opinion (subjective) or same evaluation made on an objective scale?</p></li>
<li><p>question: what has coded variable <em>grade</em>?</p></li>
<li><p>quite good correlation (DV): <em>price</em> ~ <em>sqft_living</em>, <em>price</em> ~ <em>grade</em>, <em>price</em> ~ <em>sqft_above</em></p></li>
<li><p>very strong correlation: <em>sqft_above</em> ~ <em>sqft_living</em> (are they dependant?),</p></li>
<li><p>quite good correlation: <em>sqft_above</em> ~ <em>bathrooms</em>, <em>sqft_living</em> ~ <em>grade</em>, <em>sqft_above</em> ~ <em>grade</em>, <em>bathrooms</em> ~ <em>grade</em>, <em>bathrooms</em> ~ <em>sqft_above</em></p></li>
</ul>
<p><u>TYPES OF VARIABLES</u></p>
<ul>
<li><p>variable - object identifier: <em>id</em></p></li>
<li><p>dependent variable - continuous variable: <em>price</em></p></li>
<li><p>independent variable - numerical variable (discrete): <em>date</em>, <em>bedrooms</em>, <em>bathrooms</em>, <em>floors</em>, <em>yr_built</em></p></li>
<li><p>independent variable - numerical variable (continuous): <em>sqft_living</em>, <em>sqft_lot</em>, <em>sqft_above</em>, <em>sqft_basement</em></p></li>
<li><p>independent variable - categorical variable (nominal): <em>waterfront</em>, <em>view</em>, <em>grade</em></p></li>
<li><p>independent variable - categorical variable (probably ordinal): <em>condition</em></p></li>
</ul>
</section>
<section id="nas-check" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="nas-check"><span class="header-section-number">1.3</span> NAs check</h2>
<p>Checking if any NAs are in the data</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
</section>
<section id="eda" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> EDA</h1>
<section id="variable-price" class="level2 page-columns page-full" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="variable-price"><span class="header-section-number">2.1</span> Variable <em>price</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>price<span class="sc">/</span><span class="dv">1000</span>, <span class="at">xlab =</span> <span class="st">"price [k$]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of house prices</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(df_house<span class="sc">$</span>price<span class="sc">/</span><span class="dv">1000</span>, <span class="at">xlab =</span> <span class="st">"price [k$]"</span>, <span class="at">stat_flag =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">breaks =</span> <span class="dv">80</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grid</span>()</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of house prices</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-date" class="level2 page-columns page-full" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="variable-date"><span class="header-section-number">2.2</span> Variable <em>date</em></h2>
<p>Bulid new variable - the proper format of date for variable <em>date</em></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_house<span class="sc">$</span>date_pro <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_house<span class="sc">$</span>date, <span class="st">"%Y%m%dT000000"</span>)</span></code></pre></div>
</div>
<div class="cell" data-fig.showtext="false">

</div>
<p>The most priced home - offer with id no 142 from data 53</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot_with_stat</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>date_pro), </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">160</span>), <span class="at">ylab =</span> <span class="st">"count"</span>, <span class="at">border =</span> col_main_2)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of number of houses priced in the time division (days)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> During summer months much more houses are valued than at the beginning of the year (winter).</p>
<p>Buliding new variable - <code>date_Ym</code> built only on information about year and month of pricing date</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_house<span class="sc">$</span>date_Ym <span class="ot">&lt;-</span> <span class="fu">strftime</span>(<span class="fu">as.Date</span>(df_house<span class="sc">$</span>date, <span class="st">"%Y%m%dT000000"</span>), <span class="st">"%Y-%m"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_house<span class="sc">$</span>date_Ym)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2014-10" "2014-12" "2015-02" "2014-12" "2015-02" "2014-05"</code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot_with_stat</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>date_Ym), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2500</span>), <span class="at">ylab =</span> <span class="st">"count"</span>, <span class="at">fg_r =</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of number of houses priced in the time division (months)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-id" class="level2 page-columns page-full" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="variable-id"><span class="header-section-number">2.3</span> Variable <em>id</em></h2>
<p>Changing scientific format of id to more user friendly character format</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(df_house<span class="sc">$</span>id, <span class="at">scientific =</span> <span class="cn">FALSE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "7129300520" "6414100192" "5631500400" "2487200875" "1954400510"
 [6] "7237550310" "1321400060" "2008000270" "2414600126" "3793500160"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_house<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">format</span>(df_house<span class="sc">$</span>id, <span class="at">scientific =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_trim</span>()</span></code></pre></div>
</div>
<p>Is there are no duplicated items TRUE</p>
<div class="cell" data-fig.showtext="false">

</div>
<p><strong>NOTE</strong> there are 177 duplicated ids!</p>
<p>Example</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">==</span> <span class="dv">1000102</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id            date  price bedrooms bathrooms sqft_living sqft_lot floors
1 1000102 20140916T000000 280000        6         3        2400     9373      2
2 1000102 20150422T000000 300000        6         3        2400     9373      2
  waterfront view condition grade sqft_above sqft_basement yr_built
1          0    0         3     7       2400             0     1991
2          0    0         3     7       2400             0     1991
  yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1            0   98002 47.3262 -122.214          2060       7316 2014-09-16
2            0   98002 47.3262 -122.214          2060       7316 2015-04-22
  date_Ym
1 2014-09
2 2015-04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">==</span> <span class="dv">7200179</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       id            date  price bedrooms bathrooms sqft_living sqft_lot floors
1 7200179 20141016T000000 150000        2         1         840    12750      1
2 7200179 20150424T000000 175000        2         1         840    12750      1
  waterfront view condition grade sqft_above sqft_basement yr_built
1          0    0         3     6        840             0     1925
2          0    0         3     6        840             0     1925
  yr_renovated zipcode    lat     long sqft_living15 sqft_lot15   date_pro
1            0   98055 47.484 -122.211          1480       6969 2014-10-16
2            0   98055 47.484 -122.211          1480       6969 2015-04-24
  date_Ym
1 2014-10
2 2015-04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">==</span> <span class="dv">109200390</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         id            date  price bedrooms bathrooms sqft_living sqft_lot
1 109200390 20140820T000000 245000        3      1.75        1480     3900
2 109200390 20141020T000000 250000        3      1.75        1480     3900
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      1          0    0         4     7       1480             0     1980
2      1          0    0         4     7       1480             0     1980
  yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1            0   98023 47.2977 -122.367          1830       6956 2014-08-20
2            0   98023 47.2977 -122.367          1830       6956 2014-10-20
  date_Ym
1 2014-08
2 2014-10</code></pre>
</div>
</div>
<p><strong>REMARK</strong> Only one diffrence in duplicated item is variable <em>date</em> (also new built based on it - <em>date_pro</em> and <em>date_Ym</em>) and variable <em>price</em> (?)</p>
<p>List of duplicate ids with <em>price</em> and date of pricing <em>date_pro</em> (for analysis what is different)</p>
<div class="cell" data-fig.showtext="false">

</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> ls_dup_id) <span class="sc">%&gt;%</span> <span class="fu">select</span>(id, price, date_pro) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           id   price   date_pro
1  6021501535  430000 2014-07-25
2  6021501535  700000 2014-12-23
3  4139480200 1384000 2014-06-18
4  4139480200 1400000 2014-12-09
5  7520000520  232000 2014-09-05
6  7520000520  240500 2015-03-11
7  3969300030  165000 2014-07-23
8  3969300030  239900 2014-12-29
9  2231500030  315000 2014-10-01
10 2231500030  530000 2015-03-24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> ls_dup_id) <span class="sc">%&gt;%</span> <span class="fu">select</span>(date_Ym) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>date_Ym
2014-05 2014-06 2014-07 2014-08 2014-09 2014-10 2014-11 2014-12 2015-01 2015-02 
     21      27      24      29      25      28      21      27      23      30 
2015-03 2015-04 2015-05 
     40      42      16 </code></pre>
</div>
</div>
<p>Checking number of duplicates (there can be some triplicate)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> ls_dup_id) <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">xaxt =</span> <span class="st">"n"</span>, <span class="at">col =</span> <span class="fu">c</span>(col_grey, col_main_2)[<span class="dv">1</span><span class="sc">+</span>(. <span class="sc">==</span> <span class="fu">max</span>(.))], </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">las =</span> <span class="dv">1</span>, <span class="at">frame =</span> <span class="cn">FALSE</span>, <span class="at">cex.axis =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of triplicate</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Some items occure 3 times - checking:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> ls_dup_id) <span class="sc">%&gt;%</span> <span class="fu">select</span>(id) <span class="sc">%&gt;%</span> <span class="fu">table</span>() <span class="sc">%&gt;%</span> <span class="fu">which.max</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>795000620 
      144 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>], id <span class="sc">==</span> <span class="dv">795000620</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         id            date  price bedrooms bathrooms sqft_living sqft_lot
1 795000620 20140924T000000 115000        3         1        1080     6250
2 795000620 20141215T000000 124000        3         1        1080     6250
3 795000620 20150311T000000 157000        3         1        1080     6250
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      1          0    0         2     5       1080             0     1950
2      1          0    0         2     5       1080             0     1950
3      1          0    0         2     5       1080             0     1950</code></pre>
</div>
</div>
<p><strong>REMARK</strong> Each time the price is different!</p>
<p>Minor df: data frame with duplicated ids (for comparision how the price changes)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df_dup_id <span class="ot">&lt;-</span> <span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> ls_dup_id, id <span class="sc">!=</span> <span class="dv">795000620</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(id, price, date_pro) </span></code></pre></div>
</div>
<p>Minor df: data frame with difference between price of houses with duplicate ids</p>
<div class="cell" data-fig.showtext="false">

</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of price difference for duplicates</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>3 items were pricing twice and the price of the house wasn’t changed =&gt; should they be treated as duplicates?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()  </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">==</span> <span class="dv">0</span>)[ , <span class="dv">1</span>] </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1825069031" "6308000010" "8648900110"</code></pre>
</div>
</div>
<p>6 items were pricing twice and the price of the house has dropped over time</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()  </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">&lt;</span> <span class="dv">0</span>)[ , <span class="dv">1</span>] </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "8682262400" "2726049071" "4139420590" "2767603612" "7167000040"
[6] "2619920170"</code></pre>
</div>
</div>
<p>166 items were pricing twice and the price of the house has increased over time</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 166</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house[ , <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">22</span><span class="sc">:</span><span class="dv">23</span>)], id <span class="sc">%in%</span> <span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">&lt;</span> <span class="dv">0</span>)[ , <span class="dv">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           id            date   price bedrooms bathrooms sqft_living sqft_lot
1  8682262400 20140718T000000  430000        2      1.75        1350     4003
2  8682262400 20150513T000000  419950        2      1.75        1350     4003
3  2726049071 20141211T000000  510000        2      1.00         820     4206
4  2726049071 20150408T000000  489950        2      1.00         820     4206
5  4139420590 20140520T000000 1212500        4      3.50        4560    16643
6  4139420590 20140827T000000 1200000        4      3.50        4560    16643
7  2767603612 20140512T000000  500000        2      2.25        1290     1334
8  2767603612 20150113T000000  489000        2      2.25        1290     1334
9  7167000040 20140813T000000  740000        4      3.00        3350   199253
10 7167000040 20150305T000000  700000        4      3.00        3350   199253
11 2619920170 20141001T000000  772500        4      2.50        3230     4290
12 2619920170 20141219T000000  765000        4      2.50        3230     4290
   floors waterfront view condition grade sqft_above sqft_basement yr_built
1       1          0    0         3     8       1350             0     2004
2       1          0    0         3     8       1350             0     2004
3       1          0    0         3     5        820             0     1949
4       1          0    0         3     5        820             0     1949
5       1          0    3         3    12       2230          2330     1995
6       1          0    3         3    12       2230          2330     1995
7       3          0    0         3     8       1290             0     2007
8       3          0    0         3     8       1290             0     2007
9       2          0    0         3    10       3350             0     2004
10      2          0    0         3    10       3350             0     2004
11      2          0    0         3     9       3230             0     2004
12      2          0    0         3     9       3230             0     2004
     date_pro date_Ym
1  2014-07-18 2014-07
2  2015-05-13 2015-05
3  2014-12-11 2014-12
4  2015-04-08 2015-04
5  2014-05-20 2014-05
6  2014-08-27 2014-08
7  2014-05-12 2014-05
8  2015-01-13 2015-01
9  2014-08-13 2014-08
10 2015-03-05 2015-03
11 2014-10-01 2014-10
12 2014-12-19 2014-12</code></pre>
</div>
</div>
<p><strong>DUPLICATED?</strong> the same price - diffrent pricing date</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house[ , <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">22</span><span class="sc">:</span><span class="dv">23</span>)], id <span class="sc">%in%</span> <span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">==</span> <span class="dv">0</span>)[ , <span class="dv">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          id            date  price bedrooms bathrooms sqft_living sqft_lot
1 1825069031 20140814T000000 550000        4      1.75        2410     8447
2 1825069031 20141016T000000 550000        4      1.75        2410     8447
3 6308000010 20141208T000000 585000        3      2.50        2290     5089
4 6308000010 20150423T000000 585000        3      2.50        2290     5089
5 8648900110 20140505T000000 555000        3      2.50        1940     3211
6 8648900110 20140826T000000 555000        3      2.50        1940     3211
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      2          0    3         4     8       2060           350     1936
2      2          0    3         4     8       2060           350     1936
3      2          0    0         3     9       2290             0     2001
4      2          0    0         3     9       2290             0     2001
5      2          0    0         3     8       1940             0     2009
6      2          0    0         3     8       1940             0     2009
    date_pro date_Ym
1 2014-08-14 2014-08
2 2014-10-16 2014-10
3 2014-12-08 2014-12
4 2015-04-23 2015-04
5 2014-05-05 2014-05
6 2014-08-26 2014-08</code></pre>
</div>
</div>
<p><strong>REMARKS</strong> In dataset are 177 items that have duplicated id (exception id = 795000620 listed 3 times) - the diffrence is only in variable <em>date</em> and <em>price</em> (with 3 exception where the price is the same). In the model, the variable <em>id</em> will not be used, so it is important to decide how to deal with these duplicates.</p>
<p><strong>PROPOSAL:</strong> cancel only second item with the same <em>id</em> from the ids’ list with the same price and diffrent pricing date.</p>
<p>Bulid new variable - indicators of whether to delete the given item</p>
<p>List of duplicated items - houses for that the price is the same on diffrent pricing date</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(ls_rm_3id <span class="ot">&lt;-</span> <span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> <span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">==</span> <span class="dv">0</span>)[ , <span class="dv">1</span>]) <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          id            date  price bedrooms bathrooms sqft_living sqft_lot
1 1825069031 20141016T000000 550000        4      1.75        2410     8447
2 6308000010 20150423T000000 585000        3      2.50        2290     5089
3 8648900110 20140826T000000 555000        3      2.50        1940     3211
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      2          0    3         4     8       2060           350     1936
2      2          0    0         3     9       2290             0     2001
3      2          0    0         3     8       1940             0     2009
  yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1         1980   98074 47.6499 -122.088          2520      14789 2014-10-16
2            0   98006 47.5443 -122.172          2290       7984 2015-04-23
3            0   98027 47.5644 -122.093          1880       3078 2014-08-26
  date_Ym rm
1 2014-10  0
2 2015-04  0
3 2014-08  0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df_house[df_house<span class="sc">$</span>id <span class="sc">%in%</span>  ls_rm_3id<span class="sc">$</span>id, <span class="st">"rm"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span></code></pre></div>
</div>
<p><u>Checked</u></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, id <span class="sc">%in%</span> <span class="fu">filter</span>(df_delta_dup_id, delta <span class="sc">==</span> <span class="dv">0</span>)[ , <span class="dv">1</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          id            date  price bedrooms bathrooms sqft_living sqft_lot
1 1825069031 20140814T000000 550000        4      1.75        2410     8447
2 1825069031 20141016T000000 550000        4      1.75        2410     8447
3 6308000010 20141208T000000 585000        3      2.50        2290     5089
4 6308000010 20150423T000000 585000        3      2.50        2290     5089
5 8648900110 20140505T000000 555000        3      2.50        1940     3211
6 8648900110 20140826T000000 555000        3      2.50        1940     3211
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      2          0    3         4     8       2060           350     1936
2      2          0    3         4     8       2060           350     1936
3      2          0    0         3     9       2290             0     2001
4      2          0    0         3     9       2290             0     2001
5      2          0    0         3     8       1940             0     2009
6      2          0    0         3     8       1940             0     2009
  yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1         1980   98074 47.6499 -122.088          2520      14789 2014-08-14
2         1980   98074 47.6499 -122.088          2520      14789 2014-10-16
3            0   98006 47.5443 -122.172          2290       7984 2014-12-08
4            0   98006 47.5443 -122.172          2290       7984 2015-04-23
5            0   98027 47.5644 -122.093          1880       3078 2014-05-05
6            0   98027 47.5644 -122.093          1880       3078 2014-08-26
  date_Ym rm
1 2014-08  1
2 2014-10  1
3 2014-12  1
4 2015-04  1
5 2014-05  1
6 2014-08  1</code></pre>
</div>
</div>
</section>
<section id="variable-bedrooms" class="level2 page-columns page-full" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="variable-bedrooms"><span class="header-section-number">2.4</span> Variable <em>bedrooms</em></h2>
<!-- ```{r} -->

<!-- table(df_house$bedrooms) -->
<!-- summary(df_house$bedrooms) -->
<!-- ``` -->
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>bedrooms, <span class="at">xlab =</span> <span class="st">"number of bedrooms"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of bedrooms</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>NOTE</strong></p>
<p>According to the american standards for houses appraisal (given data set is a list of houses located in area of Seattle, state of Washington) bedroom must be of adequate size (100 square feet or more), have a closet, a window and a door. It must be heated/cooled and finished in the same quality as the rest of the house. It must also be above grade and have reasonable access to a full bathroom. Basement bedrooms (50% below adjacent grade level) may <u>NOT</u> be counted in the total bedrooms count.</p>
<p><strong>OUTLIER OR MISTAKE ?</strong></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house[ , <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">22</span><span class="sc">:</span><span class="dv">24</span>)], bedrooms <span class="sc">==</span> <span class="dv">33</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          id            date  price bedrooms bathrooms sqft_living sqft_lot
1 2402100895 20140625T000000 640000       33      1.75        1620     6000
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      1          0    0         5     7       1040           580     1947
    date_pro date_Ym rm
1 2014-06-25 2014-06  0</code></pre>
</div>
</div>
<p>Analysis of similar items (only one parameters)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Analysis of parameters for houses to outlier 33 (separately)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> similar items (the same value for diffrent parameters: grade = 7, bathrooms = 1.75, sqft_living = 1620, floors = 1, price = 640000, yr_built = 1947) show that the most popular value for badrooms is 3.</p>
<p>Analysis of similar items (all parametres)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Analysis of parameters for houses to outlier 33 (all in one)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>DECISION:</u> it is a mistake ⇒ 33 has to be change into 3</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df_house[df_house<span class="sc">$</span>bedrooms <span class="sc">==</span> <span class="dv">33</span>, <span class="st">'bedrooms'</span>] <span class="ot">&lt;-</span> <span class="dv">3</span></span></code></pre></div>
</div>
<p>Re-analysis</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_house<span class="sc">$</span>bedrooms)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   0    1    2    3    4    5    6    7    8    9   10   11 
  13  199 2760 9825 6882 1601  272   38   13    6    3    1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>bedrooms)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   3.000   3.000   3.369   4.000  11.000 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>bedrooms, <span class="at">xlab =</span> <span class="st">"number of bedrooms"</span>, <span class="at">stat_flag =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of bedrooms</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot_with_stat</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>bedrooms), <span class="at">stat_flag =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>), <span class="at">fg_r =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of number of bedrooms</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>ARE THESE DATA PROPER?</strong> to consideration: removing these items</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house[ , <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>,<span class="dv">22</span><span class="sc">:</span><span class="dv">24</span>)], bedrooms <span class="sc">==</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>           id            date   price bedrooms bathrooms sqft_living sqft_lot
1  6306400140 20140612T000000 1095000        0      0.00        3064     4764
2  3918400017 20150205T000000  380000        0      0.00        1470      979
3  1453602309 20140805T000000  288000        0      1.50        1430     1650
4  6896300380 20141002T000000  228000        0      1.00         390     5900
5  2954400190 20140624T000000 1295650        0      0.00        4810    28008
6  2569500210 20141117T000000  339950        0      2.50        2290     8319
7  2310060040 20140925T000000  240000        0      2.50        1810     5669
8  3374500520 20150429T000000  355000        0      0.00        2460     8049
9  7849202190 20141223T000000  235000        0      0.00        1470     4800
10 7849202299 20150218T000000  320000        0      2.50        1490     7111
11 9543000205 20150413T000000  139950        0      0.00         844     4269
12 1222029077 20141029T000000  265000        0      0.75         384   213444
13 3980300371 20140926T000000  142000        0      0.00         290    20875
   floors waterfront view condition grade sqft_above sqft_basement yr_built
1     3.5          0    2         3     7       3064             0     1990
2     3.0          0    2         3     8       1470             0     2006
3     3.0          0    0         3     7       1430             0     1999
4     1.0          0    0         2     4        390             0     1953
5     2.0          0    0         3    12       4810             0     1990
6     2.0          0    0         3     8       2290             0     1985
7     2.0          0    0         3     7       1810             0     2003
8     2.0          0    0         3     8       2460             0     1990
9     2.0          0    0         3     7       1470             0     1996
10    2.0          0    0         3     7       1490             0     1999
11    1.0          0    0         4     7        844             0     1913
12    1.0          0    0         3     4        384             0     2003
13    1.0          0    0         1     1        290             0     1963
     date_pro date_Ym rm
1  2014-06-12 2014-06  0
2  2015-02-05 2015-02  0
3  2014-08-05 2014-08  0
4  2014-10-02 2014-10  0
5  2014-06-24 2014-06  0
6  2014-11-17 2014-11  0
7  2014-09-25 2014-09  0
8  2015-04-29 2015-04  0
9  2014-12-23 2014-12  0
10 2015-02-18 2015-02  0
11 2015-04-13 2015-04  0
12 2014-10-29 2014-10  0
13 2014-09-26 2014-09  0</code></pre>
</div>
</div>
<p><strong>REMARKS</strong> Basement bedrooms (50% below adjacent grade level) may <u>NOT</u> be counted in the total bedrooms count, but none of these items have basement. It’s also possible that some of them do not meet with the requirements.</p>
</section>
<section id="variable-floors" class="level2 page-columns page-full" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="variable-floors"><span class="header-section-number">2.5</span> Variable <em>floors</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>floors, <span class="at">xlab =</span> <span class="st">"number of floors"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of number of floors</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>NOTE</strong> According to the american standards for houses appraisal (given data set is a list of houses located in area of Seattle, state of Washington) attics and mezzanine should be count as half floor. So the data - even if the number of floor isn’t integer - should be considered as correct. Basement should <u>NOT</u> be counted in the total floor count.</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot_with_stat</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>floors), <span class="at">stat_flag =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">fg_r =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of floors’ number</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-waterfront" class="level2 page-columns page-full" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="variable-waterfront"><span class="header-section-number">2.6</span> Variable <em>waterfront</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>waterfront), <span class="at">xlab =</span> <span class="st">"indicator of whether the property is facing water"</span>,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="st">"no facing water"</span>, <span class="st">"facing water"</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of waterfront</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> Almost no house (only 0,7% of all) has a view of the water, what is quite interesting in the Seattle (port city).</p>
</section>
<section id="variable-view" class="level2 page-columns page-full" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="variable-view"><span class="header-section-number">2.7</span> Variable <em>view</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>view), <span class="at">xlab =</span> <span class="st">"quality of view from the property"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of view</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-condition" class="level2 page-columns page-full" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="variable-condition"><span class="header-section-number">2.8</span> Variable <em>condition</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>condition),<span class="at">xlab =</span> <span class="st">"property condition"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of condition</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-grade" class="level2 page-columns page-full" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="variable-grade"><span class="header-section-number">2.9</span> Variable <em>grade</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>grade), <span class="at">xlab =</span> <span class="st">"property grade"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of grade</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Analysis: is the <em>grade</em> dependant of <em>floors</em>?</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> correlation <em>grade</em> ~ <em>floor</em> is not really strong (0.46), but correlation <em>price</em> ~ <em>grade</em> is strong (0.67).</p>
</section>
<section id="variable-yr_built" class="level2 page-columns page-full" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="variable-yr_built"><span class="header-section-number">2.10</span> Variable <em>yr_built</em></h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>yr_built), <span class="at">xlab =</span> <span class="st">"year the building was built"</span>, <span class="at">las =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of <code>yr_built</code></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Analysis: is the <em>price</em> dependant of <em>yr_built</em> and <em>condition</em>?</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> correlation <em>yr_built</em> ~ <em>floor</em> is not really strong (&lt;0.05)</p>
<p><u>Curiose:</u> how often happened the renovation?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df_house[df_house<span class="sc">$</span>yr_renovated <span class="sc">-</span> df_house<span class="sc">$</span>yr_built <span class="sc">&gt;</span> <span class="dv">0</span>, ] <span class="sc">%&gt;%</span> <span class="fu">select</span>(yr_built) <span class="sc">%&gt;%</span> <span class="fu">table</span>() </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>yr_built
1900 1901 1902 1903 1904 1905 1906 1907 1908 1909 1910 1911 1912 1913 1914 1915 
  19    1    2    6    6   17    8   14   14   16   17   14   14   10    9   11 
1916 1917 1918 1919 1920 1921 1922 1923 1924 1925 1926 1927 1928 1929 1930 1931 
   8    5   13   15   10    7   18   10   20   16   16    8   10    4   20    4 
1932 1933 1934 1935 1936 1937 1938 1939 1940 1941 1942 1943 1944 1945 1946 1947 
   5    7    8    5    5   13    7   11   14   17   24   18   12    8   11   18 
1948 1949 1950 1951 1952 1953 1954 1955 1956 1957 1958 1959 1960 1961 1962 1963 
  17   16   31   17   17   17   14   17    9   11   10    9    9    4   16   14 
1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 
   3   11    1   10   19   11    7    4    7    4    5    4    7    8    4    2 
1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1996 1998 2003 
   6    3    2    4    3    1    2    3    2    1    1    1    2    2    1 </code></pre>
</div>
</div>
<p>Not really often: only 914/21613 (4.2%) of houses was renovated</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, yr_renovated <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 914</code></pre>
</div>
</div>
<p>Bulid new variable: <em>house_age</em> - to solve a problem with difference of house age that is bind with different pricing date the price will be a function of one variable <em>house_age</em> and not of two variables <em>date</em> (pricing) and <em>yr_built</em></p>
<p><strong>NOTE</strong> That has also its consequences: after canceling <em>date</em> (pricing) and <em>yr_built</em> there will be not longer possible to analysis the price change according the month of pricing or differnce during the year.</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>house_age, <span class="at">xlab =</span> <span class="st">"house age [yrs]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of house age</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>house_age), <span class="at">xlab =</span> <span class="st">"house age [yrs]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of house age</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>How many houses was priced in the year of its built?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, house_age <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() <span class="do">## 430</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>[1] 430</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, house_age <span class="sc">&lt;</span> <span class="dv">0</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>           id            date  price bedrooms bathrooms sqft_living sqft_lot
1  1832100030 20140625T000000 597326        4      4.00        3570     8250
2  3076500830 20141029T000000 385195        1      1.00         710     6000
3  9520900210 20141231T000000 614285        5      2.75        2730     6401
4  1250200495 20140624T000000 455000        2      1.50        1200     1259
5  2770601530 20140826T000000 500000        2      2.25        1570     1269
6  9126100346 20140617T000000 350000        3      2.00        1380     3600
7  9126100765 20140801T000000 455000        3      1.75        1320     1014
8  9310300160 20140828T000000 357000        5      2.50        2990     9240
9  1257201420 20140709T000000 595000        4      3.25        3730     4560
10 6058600220 20140731T000000 230000        3      1.50        1040     1264
11 5694500840 20141125T000000 559000        2      3.00        1650      960
12 6169901185 20140520T000000 490000        5      3.50        4460     2975
   floors waterfront view condition grade sqft_above sqft_basement yr_built
1     2.0          0    0         3    10       2860           710     2015
2     1.5          0    0         3     6        710             0     2015
3     2.0          0    0         3     8       2730             0     2015
4     2.0          0    0         3     8       1000           200     2015
5     2.0          0    0         3     9       1280           290     2015
6     3.0          0    0         3     8       1380             0     2015
7     3.0          0    0         3     9       1320             0     2015
8     2.0          0    0         3     8       2990             0     2015
9     2.0          0    0         3     9       2760           970     2015
10    2.0          0    0         3     9        900           140     2015
11    3.0          0    0         3     8       1350           300     2015
12    3.0          0    2         3    10       3280          1180     2015
   yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1             0   98040 47.5784 -122.226          2230      10000 2014-06-25
2             0   98144 47.5756 -122.316          1440       4800 2014-10-29
3             0   98072 47.7685 -122.160          2520       6126 2014-12-31
4             0   98144 47.6001 -122.298          1320       1852 2014-06-24
5             0   98199 47.6514 -122.385          1570       6000 2014-08-26
6             0   98122 47.6074 -122.305          1480       3600 2014-06-17
7             0   98122 47.6047 -122.305          1380       1495 2014-08-01
8             0   98133 47.7384 -122.348          1970      18110 2014-08-28
9             0   98103 47.6725 -122.330          1800       4560 2014-07-09
10            0   98144 47.5951 -122.301          1350       3000 2014-07-31
11            0   98103 47.6611 -122.346          1650       3000 2014-11-25
12            0   98119 47.6313 -122.370          2490       4231 2014-05-20
   date_Ym rm house_age
1  2014-06  0        -1
2  2014-10  0        -1
3  2014-12  0        -1
4  2014-06  0        -1
5  2014-08  0        -1
6  2014-06  0        -1
7  2014-08  0        -1
8  2014-08  0        -1
9  2014-07  0        -1
10 2014-07  0        -1
11 2014-11  0        -1
12 2014-05  0        -1</code></pre>
</div>
</div>
<p>There are 12 items that have for <em>house age</em> with value equal -1. It’s possible that investor asked about pricing based on design - not based on really existing building. Not to put “strange data” into model and because it’s only 12 items (0.06% of all) the value -1 will be change into 0 (the houses that were priced in the same year that were also built).</p>
<p><u>Checked</u></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>df_house[df_house<span class="sc">$</span>house_age <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>, <span class="st">"house_age"</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, house_age <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(house_age) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] house_age
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>Re-analysis</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>house_age, <span class="at">xlab =</span> <span class="st">""</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of house age[yrs]</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>house_age), <span class="at">xlab =</span> <span class="st">"house age"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of house age</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>New minor variable <em>date_Y</em> to check how the price is correlated with the pricing date?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>df_house<span class="sc">$</span>date_Y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">strftime</span>(<span class="fu">as.Date</span>(df_house<span class="sc">$</span>date, <span class="st">"%Y%m%dT000000"</span>), <span class="st">"%Y"</span>))</span></code></pre></div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> The price is not correlated with the pricing date so it was a good idea to build new variable <em>house_age</em>, it’s possible to cancle <em>yr_built</em> and <em>date</em> (with all group of variable based on it) and leave only <em>house_age</em> .</p>
</section>
<section id="variable-sqft_living" class="level2 page-columns page-full" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="variable-sqft_living"><span class="header-section-number">2.11</span> Variable <em>sqft_living</em></h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_living) <span class="do">## 100sf = 9.29m2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    290    1427    1910    2080    2550   13540 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_living)<span class="sc">/</span>(<span class="dv">100</span><span class="sc">/</span><span class="fl">9.29</span>) <span class="co"># m2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  26.94  132.57  177.44  193.22  236.90 1257.87 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>sqft_living, <span class="at">xlab =</span> <span class="st">"living space area [sqft]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of living space area</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(df_house<span class="sc">$</span>sqft_living, <span class="at">xlab =</span> <span class="st">"living space area [sqft]"</span>, <span class="at">breaks =</span> <span class="dv">70</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of living space area</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>max (&gt; 750 m2 ~ 8070sf)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_living <span class="sc">==</span> <span class="dv">13540</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          id            date   price bedrooms bathrooms sqft_living sqft_lot
1 1225069038 20140505T000000 2280000        7         8       13540   307752
  floors waterfront view condition grade sqft_above sqft_basement yr_built
1      3          0    4         3    12       9410          4130     1999
  yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
1            0   98053 47.6675 -121.986          4850     217800 2014-05-05
  date_Ym rm house_age date_Y
1 2014-05  0        15   2014</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_living <span class="sc">&gt;</span> <span class="dv">8070</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(bedrooms, bathrooms) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        bathrooms
bedrooms 4.5 5.75 6.25 6.75 7.75 8
       5   1    1    1    1    0 0
       6   0    0    0    0    1 1
       7   0    0    0    0    0 1</code></pre>
</div>
</div>
<ul>
<li>min (&lt; 50 m2 ~ 540sf)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_living <span class="sc">&lt;</span> <span class="dv">540</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(bedrooms, bathrooms) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        bathrooms
bedrooms  0 0.75  1
       0  1    1  1
       1  0   10 10
       2  0    2  1
       3  0    1  0</code></pre>
</div>
</div>
</section>
<section id="variable-sqft_lot" class="level2 page-columns page-full" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="variable-sqft_lot"><span class="header-section-number">2.12</span> Variable <em>sqft_lot</em></h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_lot)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    520    5040    7618   15107   10688 1651359 </code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_lot)<span class="sc">/</span>(<span class="dv">100</span><span class="sc">/</span><span class="fl">9.29</span>) <span class="co"># m2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
    48.31    468.22    707.71   1403.44    992.92 153411.25 </code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_lot)<span class="sc">/</span><span class="fl">1076.39</span> <span class="co"># ar</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
   0.4831    4.6823    7.0774   14.0348    9.9295 1534.1642 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>sqft_lot, <span class="at">xlab =</span> <span class="st">"lot area [sqft]"</span>, <span class="at">outline =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of lot area</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(df_house<span class="sc">$</span>sqft_lot, <span class="at">xlab =</span> <span class="st">"lot area [sqft]"</span>, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of lot area</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_lot <span class="sc">&gt;</span> <span class="dv">100000</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(sqft_lot) <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_boxplot</span>(<span class="at">xlab =</span> <span class="st">"living space area [sqft]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of living space area &gt;10^5sqft</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> There are big difference between the smallest and the biggest lot</p>
</section>
<section id="variable-sqft_above" class="level2 page-columns page-full" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="variable-sqft_above"><span class="header-section-number">2.13</span> Variable <em>sqft_above</em></h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_above)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    290    1190    1560    1788    2210    9410 </code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_above)<span class="sc">/</span>(<span class="dv">100</span><span class="sc">/</span><span class="fl">9.29</span>) <span class="co"># m2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  26.94  110.55  144.92  166.14  205.31  874.19 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>sqft_above, <span class="at">xlab =</span> <span class="st">"living area above ground level [sqft]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of living area above ground level</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(df_house<span class="sc">$</span>sqft_above, <span class="at">xlab =</span> <span class="st">"space area above [sqft]"</span>, <span class="at">breaks =</span> <span class="dv">80</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of space area above</figcaption><p></p>
</figure>
</div>
</div>
</div>
<!-- ```{r} -->

<!-- table(df_house$sqft_above, df_house$floors) -->
<!-- ``` -->
<p>Average floor area</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">round</span>(df_house<span class="sc">$</span>sqft_above<span class="sc">/</span>df_house<span class="sc">$</span>floors, <span class="dv">2</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  253.3   940.0  1185.0  1237.0  1465.0  5400.0 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(<span class="fu">round</span>(df_house<span class="sc">$</span>sqft_above<span class="sc">/</span>df_house<span class="sc">$</span>floors, <span class="dv">2</span>), </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">xlab =</span> <span class="st">" average floor area [sqft]"</span>, <span class="at">breaks =</span> <span class="dv">50</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of average floor area</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-sqft_basement" class="level2 page-columns page-full" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="variable-sqft_basement"><span class="header-section-number">2.14</span> Variable <em>sqft_basement</em></h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_basement)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0     0.0     0.0   291.5   560.0  4820.0 </code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_house<span class="sc">$</span>sqft_basement)<span class="sc">/</span>(<span class="dv">100</span><span class="sc">/</span><span class="fl">9.29</span>) <span class="co"># m2</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   0.00    0.00    0.00   27.08   52.02  447.78 </code></pre>
</div>
</div>
<p>The most popular basement area</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>sqft_basement), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    0   600   700   500   800   400  1000   900   300   200 
13126   221   218   214   206   184   149   144   142   108 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(df_house<span class="sc">$</span>sqft_basement, <span class="at">xlab =</span> <span class="st">"area of basement [sqft]"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of area of basement</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(df_house<span class="sc">$</span>sqft_basement, <span class="at">xlab =</span> <span class="st">"basement area [sqft]"</span>, <span class="at">breaks =</span> <span class="dv">50</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-82-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Histogram of basement area</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_basement <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13126</code></pre>
</div>
</div>
<p><strong>REMARK</strong> 60% (13126/21613) of houses do not have basement</p>
<p>Which houses according to the number of floor do and do not have basement?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_basement <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(floors) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>floors
   1  1.5    2  2.5    3  3.5 
5156 1172 6195   80  516    7 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df_house, sqft_basement <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(floors) <span class="sc">%&gt;%</span> <span class="fu">table</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>floors
   1  1.5    2  2.5    3  3.5 
5524  738 2046   81   97    1 </code></pre>
</div>
</div>
<p><strong>REMARK</strong> more-less: houses with floor number between 1.5 to 3.5 floors more often do not have than have the basement</p>
<p>Bulid new variable: <em>is_basement</em> indicator if the house has basement - to consideration (as bottom)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_house<span class="sc">$</span>is_basement)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    0     1 
13126  8487 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="fu">table</span>(df_house<span class="sc">$</span>is_basement), <span class="at">xlab =</span> <span class="st">"does house have basement?"</span>, </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="st">"without basement"</span>, <span class="st">"with basement"</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of basement indicator</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>NOTE</strong> One variable can be removed.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_house<span class="sc">$</span>sqft_basement <span class="sc">+</span> df_house<span class="sc">$</span>sqft_above <span class="sc">==</span> df_house<span class="sc">$</span>sqft_living)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 TRUE 
21613 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">round</span>((df_house<span class="sc">$</span>sqft_above<span class="sc">/</span>df_house<span class="sc">$</span>sqft_living), <span class="dv">2</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 0.33  0.36  0.38  0.39   0.4  0.41  0.42  0.43  0.44  0.45  0.46  0.47  0.48 
    1     1     1     1     1     1     3     3     3     1     3    11    10 
 0.49   0.5  0.51  0.52  0.53  0.54  0.55  0.56  0.57  0.58  0.59   0.6  0.61 
   11   603   160   152   126   127   155   152   218   219   228   223   187 
 0.62  0.63  0.64  0.65  0.66  0.67  0.68  0.69   0.7  0.71  0.72  0.73  0.74 
  212   199   233   246   288   367   333   240   243   212   207   210   251 
 0.75  0.76  0.77  0.78  0.79   0.8  0.81  0.82  0.83  0.84  0.85  0.86  0.87 
  231   214   222   203   181   185   184   173   177   116   110    95    73 
 0.88  0.89   0.9  0.91  0.92  0.93  0.94  0.95  0.96  0.97  0.98  0.99     1 
   76    88    64    58    44    40    50    28    15    12     3     3 13126 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>REMARKS</strong> Because variables <em>sqft_above</em> and <em>sqft_living</em> are in strong correlation (0.88) - the best solution will be to cancle one of them.</p>
<p><strong>TO CONSIDERATION:</strong> pairs of variables: <em>sqft_basement</em> &amp; <em>sqft_above</em> or <em>sqft_living</em> &amp; <em>is_basement</em></p>
</section>
</section>
<section id="final-dataset" class="level1 page-columns page-full" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> FINAL DATASET</h1>
<section id="proper-dataset" class="level2 page-columns page-full" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="proper-dataset"><span class="header-section-number">3.1</span> Proper dataset</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_house[<span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">14</span>, <span class="dv">25</span>, <span class="dv">27</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "price"         "bedrooms"      "bathrooms"     "sqft_living"  
 [5] "sqft_lot"      "floors"        "waterfront"    "view"         
 [9] "condition"     "grade"         "sqft_above"    "sqft_basement"
[13] "house_age"     "is_basement"  </code></pre>
</div>
</div>
<p><u>Removed rows</u>:</p>
<ul>
<li><p>3 because of duplicated <em>id</em>;</p></li>
<li><p>3 because of no bathrooms;</p></li>
<li><p>7 because of no bedrooms, no bathrooms and no basement</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>df_house[df_house<span class="sc">$</span>rm <span class="sc">==</span> <span class="dv">1</span>, ]  </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              id            date  price bedrooms bathrooms sqft_living sqft_lot
3951  1825069031 20140814T000000 550000        4      1.75        2410     8447
3952  1825069031 20141016T000000 550000        4      1.75        2410     8447
14983 6308000010 20141208T000000 585000        3      2.50        2290     5089
14984 6308000010 20150423T000000 585000        3      2.50        2290     5089
20054 8648900110 20140505T000000 555000        3      2.50        1940     3211
20055 8648900110 20140826T000000 555000        3      2.50        1940     3211
      floors waterfront view condition grade sqft_above sqft_basement yr_built
3951       2          0    3         4     8       2060           350     1936
3952       2          0    3         4     8       2060           350     1936
14983      2          0    0         3     9       2290             0     2001
14984      2          0    0         3     9       2290             0     2001
20054      2          0    0         3     8       1940             0     2009
20055      2          0    0         3     8       1940             0     2009
      yr_renovated zipcode     lat     long sqft_living15 sqft_lot15   date_pro
3951          1980   98074 47.6499 -122.088          2520      14789 2014-08-14
3952          1980   98074 47.6499 -122.088          2520      14789 2014-10-16
14983            0   98006 47.5443 -122.172          2290       7984 2014-12-08
14984            0   98006 47.5443 -122.172          2290       7984 2015-04-23
20054            0   98027 47.5644 -122.093          1880       3078 2014-05-05
20055            0   98027 47.5644 -122.093          1880       3078 2014-08-26
      date_Ym rm house_age date_Y is_basement
3951  2014-08  1        78   2014           1
3952  2014-10  1        78   2014           1
14983 2014-12  1        13   2014           0
14984 2015-04  1        14   2015           0
20054 2014-05  1         5   2014           0
20055 2014-08  1         5   2014           0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df_house[df_house<span class="sc">$</span>rm <span class="sc">==</span> <span class="dv">1</span>, ])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 27</code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>df_house_an <span class="ot">&lt;-</span> df_house[df_house<span class="sc">$</span>rm <span class="sc">==</span> <span class="dv">0</span>, <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">14</span>, <span class="dv">25</span>, <span class="dv">27</span>)]</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df_house_an)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21607    14</code></pre>
</div>
</div>
<p>Correlation</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="selection-of-variable-with-reggresion" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="selection-of-variable-with-reggresion"><span class="header-section-number">3.2</span> Selection of variable with reggresion</h2>
<p>Checking pairs: <em>sqft_basement</em> + <em>sqft_above</em> or <em>is_basement</em> + <em>sqft_living</em></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>model_lm_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> . <span class="sc">-</span> sqft_living <span class="sc">-</span> is_basement , <span class="at">data =</span> df_house_an)</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_lm_1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ . - sqft_living - is_basement, data = df_house_an)

Residuals:
     Min       1Q   Median       3Q      Max 
-1326558  -109604    -9619    89826  4231250 

Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   -9.922e+05  1.734e+04 -57.207  &lt; 2e-16 ***
bedrooms      -4.272e+04  2.109e+03 -20.257  &lt; 2e-16 ***
bathrooms      4.809e+04  3.467e+03  13.871  &lt; 2e-16 ***
sqft_lot      -2.604e-01  3.660e-02  -7.115 1.16e-12 ***
floors         2.477e+04  3.732e+03   6.637 3.29e-11 ***
waterfront     5.742e+05  1.861e+04  30.846  &lt; 2e-16 ***
view           4.510e+04  2.256e+03  19.988  &lt; 2e-16 ***
condition      1.799e+04  2.463e+03   7.306 2.85e-13 ***
grade          1.239e+05  2.166e+03  57.215  &lt; 2e-16 ***
sqft_above     1.723e+02  3.510e+00  49.083  &lt; 2e-16 ***
sqft_basement  1.737e+02  4.611e+00  37.685  &lt; 2e-16 ***
house_age      3.639e+03  6.714e+01  54.203  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 216300 on 21595 degrees of freedom
Multiple R-squared:  0.6532,    Adjusted R-squared:  0.653 
F-statistic:  3698 on 11 and 21595 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>model_lm_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> . <span class="sc">-</span> sqft_above  <span class="sc">-</span> sqft_basement , <span class="at">data =</span> df_house_an)</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_lm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ . - sqft_above - sqft_basement, data = df_house_an)

Residuals:
     Min       1Q   Median       3Q      Max 
-1328517  -109355    -9512    89502  4238727 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -9.935e+05  1.733e+04 -57.327  &lt; 2e-16 ***
bedrooms    -4.269e+04  2.109e+03 -20.243  &lt; 2e-16 ***
bathrooms    4.720e+04  3.494e+03  13.507  &lt; 2e-16 ***
sqft_living  1.722e+02  3.308e+00  52.053  &lt; 2e-16 ***
sqft_lot    -2.566e-01  3.654e-02  -7.021 2.27e-12 ***
floors       2.596e+04  3.614e+03   7.183 7.02e-13 ***
waterfront   5.750e+05  1.862e+04  30.885  &lt; 2e-16 ***
view         4.488e+04  2.239e+03  20.044  &lt; 2e-16 ***
condition    1.799e+04  2.458e+03   7.320 2.57e-13 ***
grade        1.240e+05  2.142e+03  57.883  &lt; 2e-16 ***
house_age    3.628e+03  6.736e+01  53.856  &lt; 2e-16 ***
is_basement  4.978e+03  3.446e+03   1.444    0.149    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 216300 on 21595 degrees of freedom
Multiple R-squared:  0.6533,    Adjusted R-squared:  0.6531 
F-statistic:  3699 on 11 and 21595 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Veryfication of AIC and BIC</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">AIC</span>(model_lm_1, model_lm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           df      AIC
model_lm_1 13 592186.5
model_lm_2 13 592184.5</code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">BIC</span>(model_lm_1, model_lm_2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           df      BIC
model_lm_1 13 592290.2
model_lm_2 13 592288.2</code></pre>
</div>
</div>
<p><strong>REMARKS</strong> better is model_lm_2 with <em>is_basement</em> + <em>sqft_living</em> however it’s a minimal lead.</p>
<p><strong>NOTE</strong> In the model_lm_2 the variable <em>is_basement</em> seems be not important</p>
<section id="models-for-procedur-of-stepwise-selection-by-aic" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="models-for-procedur-of-stepwise-selection-by-aic"><span class="header-section-number">3.2.1</span> Models for procedur of stepwise selection by AIC</h3>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>model_start <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> <span class="dv">1</span> , <span class="at">data =</span> df_house_an) </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_start)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ 1, data = df_house_an)

Residuals:
    Min      1Q  Median      3Q     Max 
-465082 -218582  -90082  104918 7159918 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   540082       2498   216.2   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 367200 on 21606 degrees of freedom</code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>model_full <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> . , <span class="at">data =</span> df_house_an)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_full)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ ., data = df_house_an)

Residuals:
     Min       1Q   Median       3Q      Max 
-1333768  -109284    -9661    89282  4247815 

Coefficients: (1 not defined because of singularities)
                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   -9.926e+05  1.734e+04 -57.230  &lt; 2e-16 ***
bedrooms      -4.265e+04  2.109e+03 -20.221  &lt; 2e-16 ***
bathrooms      4.724e+04  3.494e+03  13.518  &lt; 2e-16 ***
sqft_living    1.647e+02  6.589e+00  24.993  &lt; 2e-16 ***
sqft_lot      -2.593e-01  3.660e-02  -7.085 1.43e-12 ***
floors         2.473e+04  3.732e+03   6.627 3.50e-11 ***
waterfront     5.748e+05  1.862e+04  30.877  &lt; 2e-16 ***
view           4.527e+04  2.258e+03  20.048  &lt; 2e-16 ***
condition      1.827e+04  2.467e+03   7.405 1.36e-13 ***
grade          1.235e+05  2.179e+03  56.648  &lt; 2e-16 ***
sqft_above     9.555e+00  7.245e+00   1.319   0.1872    
sqft_basement         NA         NA      NA       NA    
house_age      3.628e+03  6.736e+01  53.863  &lt; 2e-16 ***
is_basement    1.081e+04  5.607e+03   1.928   0.0539 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 216300 on 21594 degrees of freedom
Multiple R-squared:  0.6533,    Adjusted R-squared:  0.6531 
F-statistic:  3391 on 12 and 21594 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p><strong>REMARKS</strong> NA for <em>sqft_basement</em> shows because of dependence with <em>sqft_above</em> and <em>sqft_living</em> However variable <em>sqft_living</em> has the strongest influence for <em>price</em>; it seems also that <em>sqft_above</em> and <em>is_basement</em> probably can be canceled.</p>
</section>
<section id="backward-stepwise-model-selection-by-aic" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="backward-stepwise-model-selection-by-aic"><span class="header-section-number">3.2.2</span> Backward stepwise model selection by AIC</h3>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>reg_final_b <span class="ot">&lt;-</span> MASS<span class="sc">::</span><span class="fu">stepAIC</span>(model_full, <span class="at">direction =</span> <span class="st">"backward"</span>, <span class="at">steps =</span> <span class="dv">20</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=530864.7
price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    waterfront + view + condition + grade + sqft_above + sqft_basement + 
    house_age + is_basement


Step:  AIC=530864.7
price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    waterfront + view + condition + grade + sqft_above + house_age + 
    is_basement

              Df  Sum of Sq        RSS    AIC
- sqft_above   1 8.1346e+10 1.0100e+15 530864
&lt;none&gt;                      1.0100e+15 530865
- is_basement  1 1.7386e+11 1.0101e+15 530866
- floors       1 2.0542e+12 1.0120e+15 530907
- sqft_lot     1 2.3477e+12 1.0123e+15 530913
- condition    1 2.5648e+12 1.0125e+15 530918
- bathrooms    1 8.5465e+12 1.0185e+15 531045
- view         1 1.8798e+13 1.0287e+15 531261
- bedrooms     1 1.9124e+13 1.0291e+15 531268
- sqft_living  1 2.9215e+13 1.0392e+15 531479
- waterfront   1 4.4589e+13 1.0545e+15 531796
- house_age    1 1.3569e+14 1.1456e+15 533587
- grade        1 1.5009e+14 1.1600e+15 533856

Step:  AIC=530864.5
price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    waterfront + view + condition + grade + house_age + is_basement

              Df  Sum of Sq        RSS    AIC
&lt;none&gt;                      1.0100e+15 530864
- is_basement  1 9.7563e+10 1.0101e+15 530865
- sqft_lot     1 2.3055e+12 1.0123e+15 530912
- floors       1 2.4135e+12 1.0124e+15 530914
- condition    1 2.5060e+12 1.0125e+15 530916
- bathrooms    1 8.5326e+12 1.0186e+15 531044
- view         1 1.8791e+13 1.0288e+15 531261
- bedrooms     1 1.9166e+13 1.0292e+15 531269
- waterfront   1 4.4614e+13 1.0546e+15 531796
- sqft_living  1 1.2673e+14 1.1368e+15 533416
- house_age    1 1.3566e+14 1.1457e+15 533585
- grade        1 1.5671e+14 1.1667e+15 533979</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>reg_final_b<span class="sc">$</span>anova</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stepwise Model Path 
Analysis of Deviance Table

Initial Model:
price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    waterfront + view + condition + grade + sqft_above + sqft_basement + 
    house_age + is_basement

Final Model:
price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + 
    waterfront + view + condition + grade + house_age + is_basement

             Step Df    Deviance Resid. Df   Resid. Dev      AIC
1                                    21594 1.009951e+15 530864.7
2 - sqft_basement  0           0     21594 1.009951e+15 530864.7
3    - sqft_above  1 81345835722     21595 1.010032e+15 530864.5</code></pre>
</div>
</div>
</section>
<section id="forward-stepwise-model-selection-by-aic" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="forward-stepwise-model-selection-by-aic"><span class="header-section-number">3.2.3</span> Forward stepwise model selection by AIC</h3>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>reg_final_f <span class="ot">&lt;-</span> MASS<span class="sc">::</span><span class="fu">stepAIC</span>(model_start, </span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">scope =</span> <span class="fu">list</span>(<span class="at">lower =</span> model_start, <span class="at">upper =</span> model_full), </span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">direction =</span> <span class="st">"forward"</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>Start:  AIC=553728
price ~ 1

                Df  Sum of Sq        RSS    AIC
+ sqft_living    1 1.4357e+15 1.4773e+15 539060
+ grade          1 1.2977e+15 1.6152e+15 540988
+ sqft_above     1 1.0682e+15 1.8447e+15 543859
+ bathrooms      1 8.0333e+14 2.1096e+15 546758
+ view           1 4.6033e+14 2.4526e+15 550013
+ sqft_basement  1 3.0548e+14 2.6074e+15 551336
+ bedrooms       1 2.8987e+14 2.6230e+15 551465
+ waterfront     1 2.0668e+14 2.7062e+15 552140
+ floors         1 1.9211e+14 2.7208e+15 552256
+ is_basement    1 9.4654e+13 2.8183e+15 553016
+ sqft_lot       1 2.3420e+13 2.8895e+15 553556
+ house_age      1 8.4793e+12 2.9044e+15 553667
+ condition      1 3.8535e+12 2.9091e+15 553701
&lt;none&gt;                        2.9129e+15 553728

Step:  AIC=539059.6
price ~ sqft_living

                Df  Sum of Sq        RSS    AIC
+ view           1 1.2387e+14 1.3534e+15 537169
+ grade          1 1.2135e+14 1.3559e+15 537210
+ waterfront     1 1.1024e+14 1.3670e+15 537386
+ house_age      1 9.3377e+13 1.3839e+15 537651
+ bedrooms       1 4.4613e+13 1.4326e+15 538399
+ condition      1 1.7620e+13 1.4596e+15 538802
+ is_basement    1 4.0955e+12 1.4732e+15 539002
+ sqft_lot       1 3.0118e+12 1.4742e+15 539017
+ sqft_above     1 1.2173e+12 1.4760e+15 539044
+ sqft_basement  1 1.2173e+12 1.4760e+15 539044
+ floors         1 2.3032e+11 1.4770e+15 539058
+ bathrooms      1 1.4867e+11 1.4771e+15 539059
&lt;none&gt;                        1.4773e+15 539060

Step:  AIC=537169.3
price ~ sqft_living + view

                Df  Sum of Sq        RSS    AIC
+ grade          1 1.0849e+14 1.2449e+15 535366
+ house_age      1 6.4055e+13 1.2893e+15 536124
+ waterfront     1 4.4642e+13 1.3087e+15 536447
+ bedrooms       1 2.9879e+13 1.3235e+15 536689
+ condition      1 1.2104e+13 1.3413e+15 536977
+ sqft_lot       1 4.1530e+12 1.3492e+15 537105
+ floors         1 1.8840e+12 1.3515e+15 537141
+ sqft_above     1 7.8523e+11 1.3526e+15 537159
+ sqft_basement  1 7.8523e+11 1.3526e+15 537159
+ is_basement    1 3.2101e+11 1.3531e+15 537166
&lt;none&gt;                        1.3534e+15 537169
+ bathrooms      1 7.8770e+09 1.3534e+15 537171

Step:  AIC=535365.8
price ~ sqft_living + view + grade

                Df  Sum of Sq        RSS    AIC
+ house_age      1 1.5349e+14 1.0914e+15 532525
+ waterfront     1 4.7115e+13 1.1978e+15 534534
+ condition      1 2.7028e+13 1.2179e+15 534894
+ bedrooms       1 1.5032e+13 1.2299e+15 535105
+ is_basement    1 5.8040e+12 1.2391e+15 535267
+ sqft_above     1 5.2620e+12 1.2396e+15 535276
+ sqft_basement  1 5.2620e+12 1.2396e+15 535276
+ bathrooms      1 4.7750e+12 1.2401e+15 535285
+ floors         1 4.1365e+12 1.2408e+15 535296
+ sqft_lot       1 2.9774e+12 1.2419e+15 535316
&lt;none&gt;                        1.2449e+15 535366

Step:  AIC=532524.7
price ~ sqft_living + view + grade + house_age

                Df  Sum of Sq        RSS    AIC
+ waterfront     1 4.8030e+13 1.0434e+15 531554
+ bedrooms       1 1.5249e+13 1.0762e+15 532223
+ bathrooms      1 7.8240e+12 1.0836e+15 532371
+ floors         1 5.8689e+12 1.0855e+15 532410
+ sqft_lot       1 2.4312e+12 1.0890e+15 532478
+ condition      1 1.5337e+12 1.0899e+15 532496
+ sqft_above     1 1.7884e+11 1.0912e+15 532523
+ sqft_basement  1 1.7884e+11 1.0912e+15 532523
&lt;none&gt;                        1.0914e+15 532525
+ is_basement    1 4.3415e+09 1.0914e+15 532527

Step:  AIC=531554.2
price ~ sqft_living + view + grade + house_age + waterfront

                Df  Sum of Sq        RSS    AIC
+ bedrooms       1 1.2782e+13 1.0306e+15 531290
+ bathrooms      1 8.0199e+12 1.0354e+15 531389
+ floors         1 5.0535e+12 1.0383e+15 531451
+ sqft_lot       1 2.2603e+12 1.0411e+15 531509
+ condition      1 1.6053e+12 1.0418e+15 531523
+ is_basement    1 1.2593e+11 1.0432e+15 531554
&lt;none&gt;                        1.0434e+15 531554
+ sqft_above     1 2.2002e+10 1.0434e+15 531556
+ sqft_basement  1 2.2002e+10 1.0434e+15 531556

Step:  AIC=531289.9
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms

                Df  Sum of Sq        RSS    AIC
+ bathrooms      1 1.3442e+13 1.0171e+15 531008
+ floors         1 5.1422e+12 1.0254e+15 531184
+ sqft_lot       1 3.3768e+12 1.0272e+15 531221
+ condition      1 2.2213e+12 1.0284e+15 531245
+ is_basement    1 2.6533e+11 1.0303e+15 531286
&lt;none&gt;                        1.0306e+15 531290
+ sqft_above     1 7.3297e+08 1.0306e+15 531292
+ sqft_basement  1 7.3297e+08 1.0306e+15 531292

Step:  AIC=531008.2
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms

                Df  Sum of Sq        RSS    AIC
+ sqft_lot       1 2.7103e+12 1.0144e+15 530953
+ floors         1 2.0646e+12 1.0151e+15 530966
+ condition      1 1.9267e+12 1.0152e+15 530969
&lt;none&gt;                        1.0171e+15 531008
+ sqft_above     1 6.6997e+10 1.0171e+15 531009
+ sqft_basement  1 6.6997e+10 1.0171e+15 531009
+ is_basement    1 4.3506e+06 1.0171e+15 531010

Step:  AIC=530952.6
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot

                Df  Sum of Sq        RSS    AIC
+ condition      1 1.9544e+12 1.0125e+15 530913
+ floors         1 1.7885e+12 1.0127e+15 530916
+ sqft_above     1 1.5101e+11 1.0143e+15 530951
+ sqft_basement  1 1.5101e+11 1.0143e+15 530951
&lt;none&gt;                        1.0144e+15 530953
+ is_basement    1 1.4130e+10 1.0144e+15 530954

Step:  AIC=530912.9
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition

                Df  Sum of Sq        RSS    AIC
+ floors         1 2.3556e+12 1.0101e+15 530865
+ sqft_above     1 3.0044e+11 1.0122e+15 530908
+ sqft_basement  1 3.0044e+11 1.0122e+15 530908
&lt;none&gt;                        1.0125e+15 530913
+ is_basement    1 3.9624e+10 1.0124e+15 530914

Step:  AIC=530864.6
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors

                Df  Sum of Sq        RSS    AIC
+ is_basement    1 9.7563e+10 1.0100e+15 530864
&lt;none&gt;                        1.0101e+15 530865
+ sqft_above     1 5.0523e+09 1.0101e+15 530866
+ sqft_basement  1 5.0523e+09 1.0101e+15 530866

Step:  AIC=530864.5
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors + is_basement

                Df  Sum of Sq      RSS    AIC
&lt;none&gt;                        1.01e+15 530864
+ sqft_above     1 8.1346e+10 1.01e+15 530865
+ sqft_basement  1 8.1346e+10 1.01e+15 530865</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>reg_final_f<span class="sc">$</span>anova</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>Stepwise Model Path 
Analysis of Deviance Table

Initial Model:
price ~ 1

Final Model:
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors + is_basement

            Step Df     Deviance Resid. Df   Resid. Dev      AIC
1                                    21606 2.912912e+15 553728.0
2  + sqft_living  1 1.435656e+15     21605 1.477256e+15 539059.5
3         + view  1 1.238704e+14     21604 1.353386e+15 537169.3
4        + grade  1 1.084894e+14     21603 1.244897e+15 535365.9
5    + house_age  1 1.534924e+14     21602 1.091404e+15 532524.6
6   + waterfront  1 4.802981e+13     21601 1.043374e+15 531554.2
7     + bedrooms  1 1.278247e+13     21600 1.030592e+15 531289.9
8    + bathrooms  1 1.344191e+13     21599 1.017150e+15 531008.2
9     + sqft_lot  1 2.710334e+12     21598 1.014440e+15 530952.6
10   + condition  1 1.954398e+12     21597 1.012485e+15 530912.9
11      + floors  1 2.355552e+12     21596 1.010130e+15 530864.6
12 + is_basement  1 9.756264e+10     21595 1.010032e+15 530864.5</code></pre>
</div>
</div>
</section>
<section id="both-direction-stepwise-model-selection-by-aic" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="both-direction-stepwise-model-selection-by-aic"><span class="header-section-number">3.2.4</span> Both direction stepwise model selection by AIC</h3>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>reg_final_b <span class="ot">&lt;-</span> MASS<span class="sc">::</span><span class="fu">stepAIC</span>(model_start, </span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">scope =</span> <span class="fu">list</span>(<span class="at">lower =</span> model_start, <span class="at">upper =</span> model_full),</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">direction =</span> <span class="st">"both"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>Start:  AIC=553728
price ~ 1

                Df  Sum of Sq        RSS    AIC
+ sqft_living    1 1.4357e+15 1.4773e+15 539060
+ grade          1 1.2977e+15 1.6152e+15 540988
+ sqft_above     1 1.0682e+15 1.8447e+15 543859
+ bathrooms      1 8.0333e+14 2.1096e+15 546758
+ view           1 4.6033e+14 2.4526e+15 550013
+ sqft_basement  1 3.0548e+14 2.6074e+15 551336
+ bedrooms       1 2.8987e+14 2.6230e+15 551465
+ waterfront     1 2.0668e+14 2.7062e+15 552140
+ floors         1 1.9211e+14 2.7208e+15 552256
+ is_basement    1 9.4654e+13 2.8183e+15 553016
+ sqft_lot       1 2.3420e+13 2.8895e+15 553556
+ house_age      1 8.4793e+12 2.9044e+15 553667
+ condition      1 3.8535e+12 2.9091e+15 553701
&lt;none&gt;                        2.9129e+15 553728

Step:  AIC=539059.6
price ~ sqft_living

                Df  Sum of Sq        RSS    AIC
+ view           1 1.2387e+14 1.3534e+15 537169
+ grade          1 1.2135e+14 1.3559e+15 537210
+ waterfront     1 1.1024e+14 1.3670e+15 537386
+ house_age      1 9.3377e+13 1.3839e+15 537651
+ bedrooms       1 4.4613e+13 1.4326e+15 538399
+ condition      1 1.7620e+13 1.4596e+15 538802
+ is_basement    1 4.0955e+12 1.4732e+15 539002
+ sqft_lot       1 3.0118e+12 1.4742e+15 539017
+ sqft_above     1 1.2173e+12 1.4760e+15 539044
+ sqft_basement  1 1.2173e+12 1.4760e+15 539044
+ floors         1 2.3032e+11 1.4770e+15 539058
+ bathrooms      1 1.4867e+11 1.4771e+15 539059
&lt;none&gt;                        1.4773e+15 539060
- sqft_living    1 1.4357e+15 2.9129e+15 553728

Step:  AIC=537169.3
price ~ sqft_living + view

                Df  Sum of Sq        RSS    AIC
+ grade          1 1.0849e+14 1.2449e+15 535366
+ house_age      1 6.4055e+13 1.2893e+15 536124
+ waterfront     1 4.4642e+13 1.3087e+15 536447
+ bedrooms       1 2.9879e+13 1.3235e+15 536689
+ condition      1 1.2104e+13 1.3413e+15 536977
+ sqft_lot       1 4.1530e+12 1.3492e+15 537105
+ floors         1 1.8840e+12 1.3515e+15 537141
+ sqft_above     1 7.8523e+11 1.3526e+15 537159
+ sqft_basement  1 7.8523e+11 1.3526e+15 537159
+ is_basement    1 3.2101e+11 1.3531e+15 537166
&lt;none&gt;                        1.3534e+15 537169
+ bathrooms      1 7.8770e+09 1.3534e+15 537171
- view           1 1.2387e+14 1.4773e+15 539060
- sqft_living    1 1.0992e+15 2.4526e+15 550013

Step:  AIC=535365.8
price ~ sqft_living + view + grade

                Df  Sum of Sq        RSS    AIC
+ house_age      1 1.5349e+14 1.0914e+15 532525
+ waterfront     1 4.7115e+13 1.1978e+15 534534
+ condition      1 2.7028e+13 1.2179e+15 534894
+ bedrooms       1 1.5032e+13 1.2299e+15 535105
+ is_basement    1 5.8040e+12 1.2391e+15 535267
+ sqft_above     1 5.2620e+12 1.2396e+15 535276
+ sqft_basement  1 5.2620e+12 1.2396e+15 535276
+ bathrooms      1 4.7750e+12 1.2401e+15 535285
+ floors         1 4.1365e+12 1.2408e+15 535296
+ sqft_lot       1 2.9774e+12 1.2419e+15 535316
&lt;none&gt;                        1.2449e+15 535366
- grade          1 1.0849e+14 1.3534e+15 537169
- view           1 1.1101e+14 1.3559e+15 537210
- sqft_living    1 2.0621e+14 1.4511e+15 538676

Step:  AIC=532524.7
price ~ sqft_living + view + grade + house_age

                Df  Sum of Sq        RSS    AIC
+ waterfront     1 4.8030e+13 1.0434e+15 531554
+ bedrooms       1 1.5249e+13 1.0762e+15 532223
+ bathrooms      1 7.8240e+12 1.0836e+15 532371
+ floors         1 5.8689e+12 1.0855e+15 532410
+ sqft_lot       1 2.4312e+12 1.0890e+15 532478
+ condition      1 1.5337e+12 1.0899e+15 532496
+ sqft_above     1 1.7884e+11 1.0912e+15 532523
+ sqft_basement  1 1.7884e+11 1.0912e+15 532523
&lt;none&gt;                        1.0914e+15 532525
+ is_basement    1 4.3415e+09 1.0914e+15 532527
- view           1 6.4390e+13 1.1558e+15 533761
- house_age      1 1.5349e+14 1.2449e+15 535366
- grade          1 1.9793e+14 1.2893e+15 536124
- sqft_living    1 2.0224e+14 1.2936e+15 536196

Step:  AIC=531554.2
price ~ sqft_living + view + grade + house_age + waterfront

                Df  Sum of Sq        RSS    AIC
+ bedrooms       1 1.2782e+13 1.0306e+15 531290
+ bathrooms      1 8.0199e+12 1.0354e+15 531389
+ floors         1 5.0535e+12 1.0383e+15 531451
+ sqft_lot       1 2.2603e+12 1.0411e+15 531509
+ condition      1 1.6053e+12 1.0418e+15 531523
+ is_basement    1 1.2593e+11 1.0432e+15 531554
&lt;none&gt;                        1.0434e+15 531554
+ sqft_above     1 2.2002e+10 1.0434e+15 531556
+ sqft_basement  1 2.2002e+10 1.0434e+15 531556
- view           1 2.2353e+13 1.0657e+15 532010
- waterfront     1 4.8030e+13 1.0914e+15 532525
- house_age      1 1.5441e+14 1.1978e+15 534534
- sqft_living    1 2.0126e+14 1.2446e+15 535363
- grade          1 2.0143e+14 1.2448e+15 535366

Step:  AIC=531289.9
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms

                Df  Sum of Sq        RSS    AIC
+ bathrooms      1 1.3442e+13 1.0171e+15 531008
+ floors         1 5.1422e+12 1.0254e+15 531184
+ sqft_lot       1 3.3768e+12 1.0272e+15 531221
+ condition      1 2.2213e+12 1.0284e+15 531245
+ is_basement    1 2.6533e+11 1.0303e+15 531286
&lt;none&gt;                        1.0306e+15 531290
+ sqft_above     1 7.3297e+08 1.0306e+15 531292
+ sqft_basement  1 7.3297e+08 1.0306e+15 531292
- bedrooms       1 1.2782e+13 1.0434e+15 531554
- view           1 1.9700e+13 1.0503e+15 531697
- waterfront     1 4.5563e+13 1.0762e+15 532223
- house_age      1 1.5458e+14 1.1852e+15 534308
- grade          1 1.8246e+14 1.2131e+15 534810
- sqft_living    1 1.9443e+14 1.2250e+15 535022

Step:  AIC=531008.2
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms

                Df  Sum of Sq        RSS    AIC
+ sqft_lot       1 2.7103e+12 1.0144e+15 530953
+ floors         1 2.0646e+12 1.0151e+15 530966
+ condition      1 1.9267e+12 1.0152e+15 530969
&lt;none&gt;                        1.0171e+15 531008
+ sqft_above     1 6.6997e+10 1.0171e+15 531009
+ sqft_basement  1 6.6997e+10 1.0171e+15 531009
+ is_basement    1 4.3506e+06 1.0171e+15 531010
- bathrooms      1 1.3442e+13 1.0306e+15 531290
- bedrooms       1 1.8205e+13 1.0354e+15 531389
- view           1 1.8509e+13 1.0357e+15 531396
- waterfront     1 4.5303e+13 1.0625e+15 531948
- sqft_living    1 1.2478e+14 1.1419e+15 533507
- house_age      1 1.6575e+14 1.1829e+15 534268
- grade          1 1.6968e+14 1.1868e+15 534340

Step:  AIC=530952.6
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot

                Df  Sum of Sq        RSS    AIC
+ condition      1 1.9544e+12 1.0125e+15 530913
+ floors         1 1.7885e+12 1.0127e+15 530916
+ sqft_above     1 1.5101e+11 1.0143e+15 530951
+ sqft_basement  1 1.5101e+11 1.0143e+15 530951
&lt;none&gt;                        1.0144e+15 530953
+ is_basement    1 1.4130e+10 1.0144e+15 530954
- sqft_lot       1 2.7103e+12 1.0171e+15 531008
- bathrooms      1 1.2775e+13 1.0272e+15 531221
- view           1 1.8872e+13 1.0333e+15 531349
- bedrooms       1 1.9207e+13 1.0336e+15 531356
- waterfront     1 4.5025e+13 1.0595e+15 531889
- sqft_living    1 1.2745e+14 1.1419e+15 533508
- house_age      1 1.6417e+14 1.1786e+15 534192
- grade          1 1.6768e+14 1.1821e+15 534256

Step:  AIC=530912.9
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition

                Df  Sum of Sq        RSS    AIC
+ floors         1 2.3556e+12 1.0101e+15 530865
+ sqft_above     1 3.0044e+11 1.0122e+15 530908
+ sqft_basement  1 3.0044e+11 1.0122e+15 530908
&lt;none&gt;                        1.0125e+15 530913
+ is_basement    1 3.9624e+10 1.0124e+15 530914
- condition      1 1.9544e+12 1.0144e+15 530953
- sqft_lot       1 2.7380e+12 1.0152e+15 530969
- bathrooms      1 1.2484e+13 1.0250e+15 531176
- view           1 1.8654e+13 1.0311e+15 531305
- bedrooms       1 1.9826e+13 1.0323e+15 531330
- waterfront     1 4.5048e+13 1.0575e+15 531851
- sqft_living    1 1.2708e+14 1.1396e+15 533466
- house_age      1 1.3783e+14 1.1503e+15 533668
- grade          1 1.6870e+14 1.1812e+15 534241

Step:  AIC=530864.6
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors

                Df  Sum of Sq        RSS    AIC
+ is_basement    1 9.7563e+10 1.0100e+15 530864
&lt;none&gt;                        1.0101e+15 530865
+ sqft_above     1 5.0523e+09 1.0101e+15 530866
+ sqft_basement  1 5.0523e+09 1.0101e+15 530866
- floors         1 2.3556e+12 1.0125e+15 530913
- sqft_lot       1 2.4234e+12 1.0126e+15 530914
- condition      1 2.5215e+12 1.0127e+15 530916
- bathrooms      1 9.3698e+12 1.0195e+15 531062
- bedrooms       1 1.9193e+13 1.0293e+15 531269
- view           1 1.9288e+13 1.0294e+15 531271
- waterfront     1 4.4522e+13 1.0547e+15 531795
- sqft_living    1 1.2887e+14 1.1390e+15 533457
- house_age      1 1.3945e+14 1.1496e+15 533657
- grade          1 1.5677e+14 1.1669e+15 533980

Step:  AIC=530864.5
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors + is_basement

                Df  Sum of Sq        RSS    AIC
&lt;none&gt;                        1.0100e+15 530864
- is_basement    1 9.7563e+10 1.0101e+15 530865
+ sqft_above     1 8.1346e+10 1.0100e+15 530865
+ sqft_basement  1 8.1346e+10 1.0100e+15 530865
- sqft_lot       1 2.3055e+12 1.0123e+15 530912
- floors         1 2.4135e+12 1.0124e+15 530914
- condition      1 2.5060e+12 1.0125e+15 530916
- bathrooms      1 8.5326e+12 1.0186e+15 531044
- view           1 1.8791e+13 1.0288e+15 531261
- bedrooms       1 1.9166e+13 1.0292e+15 531269
- waterfront     1 4.4614e+13 1.0546e+15 531796
- sqft_living    1 1.2673e+14 1.1368e+15 533416
- house_age      1 1.3566e+14 1.1457e+15 533585
- grade          1 1.5671e+14 1.1667e+15 533979</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>reg_final_b<span class="sc">$</span>anova</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>Stepwise Model Path 
Analysis of Deviance Table

Initial Model:
price ~ 1

Final Model:
price ~ sqft_living + view + grade + house_age + waterfront + 
    bedrooms + bathrooms + sqft_lot + condition + floors + is_basement

            Step Df     Deviance Resid. Df   Resid. Dev      AIC
1                                    21606 2.912912e+15 553728.0
2  + sqft_living  1 1.435656e+15     21605 1.477256e+15 539059.5
3         + view  1 1.238704e+14     21604 1.353386e+15 537169.3
4        + grade  1 1.084894e+14     21603 1.244897e+15 535365.9
5    + house_age  1 1.534924e+14     21602 1.091404e+15 532524.6
6   + waterfront  1 4.802981e+13     21601 1.043374e+15 531554.2
7     + bedrooms  1 1.278247e+13     21600 1.030592e+15 531289.9
8    + bathrooms  1 1.344191e+13     21599 1.017150e+15 531008.2
9     + sqft_lot  1 2.710334e+12     21598 1.014440e+15 530952.6
10   + condition  1 1.954398e+12     21597 1.012485e+15 530912.9
11      + floors  1 2.355552e+12     21596 1.010130e+15 530864.6
12 + is_basement  1 9.756264e+10     21595 1.010032e+15 530864.5</code></pre>
</div>
</div>
</section>
</section>
<section id="final-dataset-1" class="level2 page-columns page-full" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="final-dataset-1"><span class="header-section-number">3.3</span> Final dataset</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>df_house_fin <span class="ot">&lt;-</span> df_house_an[ , <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">13</span><span class="sc">:</span><span class="dv">14</span>)]</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df_house_fin)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21607    12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_house_fin)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "price"       "bedrooms"    "bathrooms"   "sqft_living" "sqft_lot"   
 [6] "floors"      "waterfront"  "view"        "condition"   "grade"      
[11] "house_age"   "is_basement"</code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-104-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Corrplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Last check of final detaset</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(<span class="fu">lm</span>(price <span class="sc">~</span> . , <span class="at">data =</span> df_house_fin))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: price
               Df     Sum Sq    Mean Sq    F value Pr(&gt;F)    
bedrooms        1 2.8987e+14 2.8987e+14  6197.5337 &lt;2e-16 ***
bathrooms       1 5.1915e+14 5.1915e+14 11099.7430 &lt;2e-16 ***
sqft_living     1 6.7170e+14 6.7170e+14 14361.1814 &lt;2e-16 ***
sqft_lot        1 5.2711e+12 5.2711e+12   112.6998 &lt;2e-16 ***
floors          1 2.9519e+10 2.9519e+10     0.6311 0.4269    
waterfront      1 9.9288e+13 9.9288e+13  2122.8260 &lt;2e-16 ***
view            1 5.2522e+13 5.2522e+13  1122.9473 &lt;2e-16 ***
condition       1 1.8766e+13 1.8766e+13   401.2202 &lt;2e-16 ***
grade           1 1.0674e+14 1.0674e+14  2282.1857 &lt;2e-16 ***
house_age       1 1.3945e+14 1.3945e+14  2981.4844 &lt;2e-16 ***
is_basement     1 9.7563e+10 9.7563e+10     2.0859 0.1487    
Residuals   21595 1.0100e+15 4.6772e+10                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p><strong>NOTE</strong> According to the analysis-of-variance for the final data probably it should be also considered model without variables <em>floors</em> and <em>is_basement</em></p>
</section>
<section id="train-test-split" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="train-test-split"><span class="header-section-number">3.4</span> Train-test split</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>split_house <span class="ot">&lt;-</span> <span class="fu">sample.split</span>(df_house_fin, <span class="at">SplitRatio =</span> <span class="fl">0.8</span>)</span></code></pre></div>
</div>
<p>Train set</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>train_house <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_house_fin, split_house <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(train_house)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16205    12</code></pre>
</div>
</div>
<p>Test set</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>test_house <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_house_fin, split_house <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(test_house) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5402   12</code></pre>
</div>
</div>
</section>
</section>
<section id="model-regression" class="level1 page-columns page-full" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> MODEL: REGRESSION</h1>
<section id="model" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="model"><span class="header-section-number">4.1</span> Model</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>model_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">formula =</span> price <span class="sc">~</span> . , <span class="at">data =</span> train_house)</span></code></pre></div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_lm)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ ., data = train_house)

Residuals:
     Min       1Q   Median       3Q      Max 
-1328416  -110004   -10465    90069  4204941 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -1.000e+06  2.047e+04 -48.872  &lt; 2e-16 ***
bedrooms    -4.395e+04  2.466e+03 -17.820  &lt; 2e-16 ***
bathrooms    4.737e+04  4.109e+03  11.530  &lt; 2e-16 ***
sqft_living  1.750e+02  3.894e+00  44.937  &lt; 2e-16 ***
sqft_lot    -2.728e-01  4.343e-02  -6.281 3.46e-10 ***
floors       2.639e+04  4.261e+03   6.192 6.07e-10 ***
waterfront   5.639e+05  2.157e+04  26.149  &lt; 2e-16 ***
view         4.622e+04  2.641e+03  17.497  &lt; 2e-16 ***
condition    1.827e+04  2.879e+03   6.344 2.30e-10 ***
grade        1.239e+05  2.522e+03  49.117  &lt; 2e-16 ***
house_age    3.697e+03  7.918e+01  46.690  &lt; 2e-16 ***
is_basement  6.175e+03  4.048e+03   1.526    0.127    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 220400 on 16193 degrees of freedom
Multiple R-squared:  0.6483,    Adjusted R-squared:  0.6481 
F-statistic:  2714 on 11 and 16193 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_lm)<span class="sc">$</span>adj.r.squared </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6480762</code></pre>
</div>
</div>
</section>
<section id="prediction" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="prediction"><span class="header-section-number">4.2</span> Prediction</h2>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>y_pred_lm <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_lm, <span class="at">newdata =</span> test_house)</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>res_lm <span class="ot">&lt;-</span> test_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_lm</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(y_pred_lm)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-338370  338645  477525  541408  678207 2666131 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(y_pred_lm[y_pred_lm <span class="sc">&lt;=</span> <span class="dv">0</span>]) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>y_pred_lm_0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_lm, <span class="at">newdata =</span> train_house)</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>res_lm_0 <span class="ot">&lt;-</span> train_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_lm_0</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(y_pred_lm_0)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-598167  336436  478586  539009  669794 3495059 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(y_pred_lm_0[y_pred_lm_0 <span class="sc">&lt;=</span> <span class="dv">0</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34</code></pre>
</div>
</div>
<p><strong>NOTE</strong> model is giving value of <em>price</em> less then 0</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  81000  325000  455000  543299  650000 4500000 </code></pre>
</div>
</div>
</section>
<section id="models-test" class="level2 page-columns page-full" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="models-test"><span class="header-section-number">4.3</span> Model’s test</h2>
<p>Sufficiency of the functional part of the model: scatter plots of residuals versus predictors</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_res_pred</span>(res_lm <span class="sc">~</span> y_pred_lm, res_lm_0 <span class="sc">~</span> y_pred_lm_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-114-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Multiple Linear Regression: Residuals vs.&nbsp;predictors and real</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Normality of errors</u></p>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_lm)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-1116151  -107134    -3504     1891    92919  2140034 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> res_lm)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-116-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Multiple Linear Regression - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_lm, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-117-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Multiple Linear Regression: Histogram of residual (test)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_lm) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_lm
X-squared = 42219, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u> Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_lm, res_lm_0, y_pred_lm, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-119-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - Multiple Linear Regression (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_lm_0)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-1328416  -110004   -10465        0    90069  4204941 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(res_lm_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-121-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Multiple Linear Regression - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_lm_0, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-122-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Multiple Linear Regression: Histogram of residual (train)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_lm_0) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_lm_0
X-squared = 1033053, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u>Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_lm_0, res_lm_0, y_pred_lm_0, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-124-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - Multiple Linear Regression (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="model-support-vector-reggresion" class="level1 page-columns page-full" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> MODEL: SUPPORT VECTOR REGGRESION</h1>
<section id="model-1" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="model-1"><span class="header-section-number">5.1</span> Model</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>model_svr <span class="ot">&lt;-</span> <span class="fu">svm</span>(<span class="at">formula =</span> price <span class="sc">~</span> . , <span class="at">data =</span> train_house,</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">"eps-regression"</span>, <span class="at">kernel =</span> <span class="st">"radial"</span>)</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_svr)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
svm(formula = price ~ ., data = train_house, type = "eps-regression", 
    kernel = "radial")


Parameters:
   SVM-Type:  eps-regression 
 SVM-Kernel:  radial 
       cost:  1 
      gamma:  0.09090909 
    epsilon:  0.1 


Number of Support Vectors:  12493</code></pre>
</div>
</div>
</section>
<section id="prediction-1" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="prediction-1"><span class="header-section-number">5.2</span> Prediction</h2>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>y_pred_svr <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_svr, <span class="at">newdata =</span> test_house)</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>res_svr <span class="ot">&lt;-</span> test_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_svr</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(y_pred_lm)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-338370  338645  477525  541408  678207 2666131 </code></pre>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>y_pred_svr_0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_svr, <span class="at">newdata =</span> train_house)</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a>res_svr_0 <span class="ot">&lt;-</span> train_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_svr_0</span></code></pre></div>
</div>
</section>
<section id="models-test-1" class="level2 page-columns page-full" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="models-test-1"><span class="header-section-number">5.3</span> Model’s test</h2>
<p>Sufficiency of the functional part of the model: scatter plots of residuals versus predictors</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># par(mfcol = c(1, 2), mar = c(5.1, 5.1, 2.1, 2.1))</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_res_pred</span>(res_svr <span class="sc">~</span> y_pred_svr, res_svr_0 <span class="sc">~</span> y_pred_svr_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-128-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">SVR: Residuals vs.&nbsp;predictors and real</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Normality of errors</u></p>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_svr)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-829225  -79873    3168   20051   91456 2192822 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(res_svr)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-130-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">SVR - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_svr, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-131-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">SVR: Histogram of residual (test)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_svr) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_svr
X-squared = 70815, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u> Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_svr, res_svr_0, y_pred_svr, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-133-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - SVR (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_svr_0)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-1281368   -74057    -2376    19686    83774  6270785 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(res_svr_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-135-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">SVR - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_svr_0, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-136-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">SVR: Histogram of residual (train)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_svr_0) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_svr_0
X-squared = 13967661, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u>Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_svr_0, res_svr_0, y_pred_svr_0, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-138-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - SVR (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="model-random-forest" class="level1 page-columns page-full" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> MODEL: RANDOM FOREST</h1>
<section id="model-2" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="model-2"><span class="header-section-number">6.1</span> Model</h2>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>model_rf <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(<span class="at">x =</span> train_house[<span class="sc">-</span><span class="dv">1</span>], <span class="at">y =</span> train_house<span class="sc">$</span>price, <span class="at">ntree =</span> <span class="dv">100</span>)</span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(model_rf)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
 randomForest(x = train_house[-1], y = train_house$price, ntree = 100) 
               Type of random forest: regression
                     Number of trees: 100
No. of variables tried at each split: 3

          Mean of squared residuals: 37856957976
                    % Var explained: 72.57</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>model_rf<span class="sc">$</span>mse[<span class="fu">which.max</span>(model_rf<span class="sc">$</span>rsq)] </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37856957976</code></pre>
</div>
</div>
</section>
<section id="prediction-2" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="prediction-2"><span class="header-section-number">6.2</span> Prediction</h2>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>y_pred_rf <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_rf, <span class="at">newdata =</span> test_house)</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>res_rf <span class="ot">&lt;-</span> test_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_rf</span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(y_pred_rf)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 169106  358936  455085  541829  612970 4667255 </code></pre>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>y_pred_rf_0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_rf, <span class="at">newdata =</span> train_house)</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>res_rf_0 <span class="ot">&lt;-</span> train_house<span class="sc">$</span>price <span class="sc">-</span> y_pred_rf_0</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(y_pred_rf_0)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 150243  351059  454109  538875  613455 6237078 </code></pre>
</div>
</div>
</section>
<section id="models-test-2" class="level2 page-columns page-full" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="models-test-2"><span class="header-section-number">6.3</span> Model’s test</h2>
<p>Sufficiency of the functional part of the model: scatter plots of residuals versus predictors</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_res_pred</span>(res_rf <span class="sc">~</span> y_pred_rf, res_rf_0 <span class="sc">~</span> y_pred_rf_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-142-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Random Forest: Residuals vs.&nbsp;predictors and real</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Normality of errors</u></p>
<ul>
<li>test set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_rf)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-1779255   -90389   -11216     1470    75860  1683609 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(res_rf)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-144-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Random Forest - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_rf, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-145-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Random Forest: Histogram of residual (test)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_rf) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_rf
X-squared = 37865, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u> Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_rf, res_rf_0, y_pred_rf, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-147-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - Random Forest (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>train set</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(res_rf_0)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Min.    1st Qu.     Median       Mean    3rd Qu.       Max. 
-1711235.6   -59359.4   -10137.5      134.2    46760.1  1816076.1 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(res_rf_0)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-149-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Random Forest - residuals</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_hist</span>(res_rf_0, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-150-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Random Forest: Histogram of residual (train)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>tseries<span class="sc">::</span><span class="fu">jarque.bera.test</span>(res_rf_0) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  res_rf_0
X-squared = 302491, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<p><u>Outcome</u> Residuals don’t have a normal distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_train_test</span>(res_rf_0, res_rf_0, y_pred_rf_0, test_house<span class="sc">$</span>price)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-152-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">QQplot - Random Forest (train &amp; test set)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="comparision-of-models" class="level1 page-columns page-full" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> COMPARISION OF MODELS</h1>
<section id="stat" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="stat"><span class="header-section-number">7.1</span> Stat</h2>
<p>Number of items in test set 5400</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>(n_data <span class="ot">&lt;-</span> <span class="fu">nrow</span>(test_house))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5402</code></pre>
</div>
</div>
<p>Number of independent variable</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>(p_data <span class="ot">&lt;-</span> <span class="fu">ncol</span>(test_house) <span class="sc">-</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
<p>Metrics table for each model (test set)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>tab_lm <span class="ot">&lt;-</span> <span class="fu">tab_stat</span>(y_pred_lm, test_house<span class="sc">$</span>price, n_data, p_data)</span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>tab_svr <span class="ot">&lt;-</span> <span class="fu">tab_stat</span>(y_pred_svr, test_house<span class="sc">$</span>price, n_data, p_data)</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a>tab_rf <span class="ot">&lt;-</span> <span class="fu">tab_stat</span>(y_pred_rf, test_house<span class="sc">$</span>price, n_data, p_data)</span></code></pre></div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a>tab_all</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mse     rmse      rse        R2     adjR2
tab_lm  41407244465 203487.7 203525.4 0.6692529 0.6685780
tab_svr 36062347794 189900.9 189936.1 0.7119462 0.7113583
tab_rf  31663577989 177942.6 177975.6 0.7470821 0.7465659</code></pre>
</div>
</div>
<p>Checking the diffrence between R2 and adj R2</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>(tab_all<span class="sc">$</span>R2 <span class="sc">-</span> tab_all<span class="sc">$</span>adjR2) <span class="sc">/</span> tab_all<span class="sc">$</span>R2 </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0010085783 0.0008257155 0.0006909001</code></pre>
</div>
</div>
<p><strong>OUTCOME</strong> Difference between R2 and adjR2 negligibly small = &gt; we can use only R2</p>
<p><strong>SUMMARY OF METRICS TABLE</strong></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tab_all)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      mse                 rmse             rse               R2        
 Min.   :3.166e+10   Min.   :177943   Min.   :177976   Min.   :0.6693  
 1st Qu.:3.386e+10   1st Qu.:183922   1st Qu.:183956   1st Qu.:0.6906  
 Median :3.606e+10   Median :189901   Median :189936   Median :0.7119  
 Mean   :3.638e+10   Mean   :190444   Mean   :190479   Mean   :0.7094  
 3rd Qu.:3.873e+10   3rd Qu.:196694   3rd Qu.:196731   3rd Qu.:0.7295  
 Max.   :4.141e+10   Max.   :203488   Max.   :203525   Max.   :0.7471  
     adjR2       
 Min.   :0.6686  
 1st Qu.:0.6900  
 Median :0.7114  
 Mean   :0.7088  
 3rd Qu.:0.7290  
 Max.   :0.7466  </code></pre>
</div>
</div>
</section>
<section id="metrics-plot" class="level2 page-columns page-full" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="metrics-plot"><span class="header-section-number">7.2</span> Metrics plot</h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-161-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of quality metrics for all models</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>REMARKS TO VALUE THE MODEL</u></p>
<ul>
<li><p>Lower values of RMSE indicate better fit.</p></li>
<li><p>The smaller difference between RSE/min and RSE/max the better model is.</p></li>
<li><p>The greater R2 is the better the model fits given data.</p></li>
</ul>
<p><strong>CONCLUSION</strong> Random forest is the best.</p>
</section>
<section id="plots-predictionreal" class="level2 page-columns page-full" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="plots-predictionreal"><span class="header-section-number">7.3</span> Plots prediction~real</h2>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-162-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of quality metrics for all models</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Random forest have good precision of prediction - the relation predicted value to the real lies on diagonal that means that the error of prediction is small.</strong></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Janina Smoła</div>   
    <div class="nav-footer-right">Made with <a href="https://quarto.org/" target="_blank">Posit Quarto</a></div>
  </div>
</footer>



</body></html>