<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2018-05-27">
<meta name="description" content="Arranging shop or why is milk always farthest from cash desk?">

<title>Association Rules in Groceries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"><i class="bi bi-files" role="img">
</i> 
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"><i class="bi bi-person-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Association Rules in Groceries</h1>
                  <div>
        <div class="description">
          Arranging shop or why is milk always farthest from cash desk?
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Market Basket Analysis</div>
                <div class="quarto-category">EDA</div>
                <div class="quarto-category">data vis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2018</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  INTRODUCTION</a>
  <ul class="collapse">
  <li><a href="#description-of-the-assigned-task" id="toc-description-of-the-assigned-task" class="nav-link" data-scroll-target="#description-of-the-assigned-task"><span class="toc-section-number">1.1</span>  Description of the assigned task</a></li>
  <li><a href="#main-goals" id="toc-main-goals" class="nav-link" data-scroll-target="#main-goals"><span class="toc-section-number">1.2</span>  Main goals</a></li>
  </ul></li>
  <li><a href="#experiment---frequent-items" id="toc-experiment---frequent-items" class="nav-link" data-scroll-target="#experiment---frequent-items"><span class="toc-section-number">2</span>  EXPERIMENT - FREQUENT ITEMS</a>
  <ul class="collapse">
  <li><a href="#data-source---transactions-data-groceries-products-list-and-dataset-characteristic" id="toc-data-source---transactions-data-groceries-products-list-and-dataset-characteristic" class="nav-link" data-scroll-target="#data-source---transactions-data-groceries-products-list-and-dataset-characteristic"><span class="toc-section-number">2.1</span>  Data source - transactions data <em>Groceries</em>, products list and dataset characteristic</a></li>
  <li><a href="#product-list-analysis" id="toc-product-list-analysis" class="nav-link" data-scroll-target="#product-list-analysis"><span class="toc-section-number">2.2</span>  Product list analysis</a>
  <ul class="collapse">
  <li><a href="#visualisation-for-items-from-groceries" id="toc-visualisation-for-items-from-groceries" class="nav-link" data-scroll-target="#visualisation-for-items-from-groceries"><span class="toc-section-number">2.2.1</span>  Visualisation for items from <em>Groceries</em></a></li>
  <li><a href="#visualisation-for-product-groups-from-groceries-level_2" id="toc-visualisation-for-product-groups-from-groceries-level_2" class="nav-link" data-scroll-target="#visualisation-for-product-groups-from-groceries-level_2"><span class="toc-section-number">2.2.2</span>  Visualisation for product groups from <em>Groceries</em> ( <em>level_2</em> )</a></li>
  <li><a href="#support-and-relative-support-for-items" id="toc-support-and-relative-support-for-items" class="nav-link" data-scroll-target="#support-and-relative-support-for-items"><span class="toc-section-number">2.2.3</span>  Support and relative support for items</a></li>
  <li><a href="#the-most-frequent-items" id="toc-the-most-frequent-items" class="nav-link" data-scroll-target="#the-most-frequent-items"><span class="toc-section-number">2.2.4</span>  The most frequent items</a></li>
  <li><a href="#support-and-relative-support-of-product-groups-level2" id="toc-support-and-relative-support-of-product-groups-level2" class="nav-link" data-scroll-target="#support-and-relative-support-of-product-groups-level2"><span class="toc-section-number">2.2.5</span>  Support and relative support of product groups (level2)</a></li>
  <li><a href="#the-most-frequent-products-groups-level2" id="toc-the-most-frequent-products-groups-level2" class="nav-link" data-scroll-target="#the-most-frequent-products-groups-level2"><span class="toc-section-number">2.2.6</span>  The most frequent products groups (level2)</a></li>
  <li><a href="#the-frequent-items-and-the-frequent-products-groups" id="toc-the-frequent-items-and-the-frequent-products-groups" class="nav-link" data-scroll-target="#the-frequent-items-and-the-frequent-products-groups"><span class="toc-section-number">2.2.7</span>  The frequent items and the frequent products groups</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#experiment---association-rules" id="toc-experiment---association-rules" class="nav-link" data-scroll-target="#experiment---association-rules"><span class="toc-section-number">3</span>  EXPERIMENT - ASSOCIATION RULES</a>
  <ul class="collapse">
  <li><a href="#model-apriori-for-items---1st-approach" id="toc-model-apriori-for-items---1st-approach" class="nav-link" data-scroll-target="#model-apriori-for-items---1st-approach"><span class="toc-section-number">3.1</span>  Model apriori for items - 1st approach</a></li>
  <li><a href="#model-apriori-for-products-group---1st-approach" id="toc-model-apriori-for-products-group---1st-approach" class="nav-link" data-scroll-target="#model-apriori-for-products-group---1st-approach"><span class="toc-section-number">3.2</span>  Model apriori for products group - 1st approach</a></li>
  <li><a href="#model-apriori-for-items---2nd-approach" id="toc-model-apriori-for-items---2nd-approach" class="nav-link" data-scroll-target="#model-apriori-for-items---2nd-approach"><span class="toc-section-number">3.3</span>  Model apriori for items - 2nd approach</a></li>
  <li><a href="#model-apriori-for-products-group---2nd-approach" id="toc-model-apriori-for-products-group---2nd-approach" class="nav-link" data-scroll-target="#model-apriori-for-products-group---2nd-approach"><span class="toc-section-number">3.4</span>  Model apriori for products group - 2nd approach</a></li>
  <li><a href="#model-apriori-for-items---3rd-approach" id="toc-model-apriori-for-items---3rd-approach" class="nav-link" data-scroll-target="#model-apriori-for-items---3rd-approach"><span class="toc-section-number">3.5</span>  Model apriori for items - 3rd approach</a></li>
  <li><a href="#model-apriori-for-products-group---3rd-approach" id="toc-model-apriori-for-products-group---3rd-approach" class="nav-link" data-scroll-target="#model-apriori-for-products-group---3rd-approach"><span class="toc-section-number">3.6</span>  Model apriori for products group - 3rd approach</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="toc-section-number">4</span>  SUMMARY</a>
  <ul class="collapse">
  <li><a href="#summary-dataset" id="toc-summary-dataset" class="nav-link" data-scroll-target="#summary-dataset"><span class="toc-section-number">4.1</span>  Summary dataset</a></li>
  <li><a href="#summary-regarding-the-conducted-experiments" id="toc-summary-regarding-the-conducted-experiments" class="nav-link" data-scroll-target="#summary-regarding-the-conducted-experiments"><span class="toc-section-number">4.2</span>  Summary regarding the conducted experiments</a></li>
  <li><a href="#final-summary" id="toc-final-summary" class="nav-link" data-scroll-target="#final-summary"><span class="toc-section-number">4.3</span>  FINAL SUMMARY</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<!--
Photo by Karolina Grabowska: https://www.pexels.com/photo/handbag-with-fresh-assorted-vegetables-on-table-4020557/
-->
<p><em>How to arrange the shop space to maximize profits?</em></p>
<p>A classic analysis answering the question of how to expand the store to maximize profits, i.e.&nbsp;what product combinations customers most often buy. Here you may also find the answer to why milk is always the farthest from the cash register.</p>
<p>In this analysis was used transaction data - <em>Groceries</em> database implemented in the <code>arules</code> package.</p>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
What Is Market Basket Analysis?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Market basket analysis</strong> is a data mining technique used by retailers to increase sales by better understanding customer purchasing patterns. It involves analyzing large data sets, such as purchase history, to reveal product groupings, as well as products that are likely to be purchased together.</p>
<p>Generally, Association Rule Mining can be viewed in a two-step process: 1. Find all Frequent itemsets( <em>minSup</em> ) 2. Generate Association Rules from the Frequent itemsets ( <em>minSup</em> &amp; <em>minConf</em> )</p>
</div>
</div>
</div>
<!-- OSTYLOWANIE -->
<style>
#TOC {
overflow:auto;
}
body {
text-align: justify
}
h1 {
font-size: 22px
}
h2 {
font-size: 20px
}
h3 {
font-size: 18px
}
h1, .h1, h2, .h2, h3, .h3 {
margin-top: 20px;
}
p.caption {
font-style: bold;
margin-bottom: 30px;
margin-top: -10px;
text-align: middle;
}
pre code {
font-size: 11px;
}
</style>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> INTRODUCTION</h1>
<section id="description-of-the-assigned-task" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="description-of-the-assigned-task"><span class="header-section-number">1.1</span> Description of the assigned task</h2>
<p>The owner of the supermarket decided to invest the profit in development. Expansion of the store’s usable area and minor rearrangements are planned. In order to meet the needs of customers, the most popular product groups would be developed.</p>
<p>The products group to development and their possible location will be selected on the basis of the analysis of shopping lists (the most frequent), while their location would be determined by the most interesting/strongest association rules.</p>
</section>
<section id="main-goals" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="main-goals"><span class="header-section-number">1.2</span> Main goals</h2>
<ol type="1">
<li>Selection of interesting association rules .</li>
<li>Finding the best association rules.</li>
<li>Finding practical applications of discovered rules.</li>
</ol>
<!-- <u>Przy opracowaniu zadania wykorzystano artykuły:</u> -->
<!-- * https://cran.r-project.org/web/packages/arulesViz/vignettes/arulesViz.pdf -->
<!-- * https://cran.r-project.org/web/packages/arules/vignettes/arules.pdf -->
<!-- * http://r-statistics.co/Association-Mining-With-R.html -->
</section>
</section>
<section id="experiment---frequent-items" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> EXPERIMENT - FREQUENT ITEMS</h1>
<section id="data-source---transactions-data-groceries-products-list-and-dataset-characteristic" class="level2 page-columns page-full" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="data-source---transactions-data-groceries-products-list-and-dataset-characteristic"><span class="header-section-number">2.1</span> Data source - transactions data <em>Groceries</em>, products list and dataset characteristic</h2>
<p>Data set size 9835, 169</p>
<p>All products available in transactions data <em>Groceries</em></p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>  [1] "frankfurter"               "sausage"                  
  [3] "liver loaf"                "ham"                      
  [5] "meat"                      "finished products"        
  [7] "organic sausage"           "chicken"                  
  [9] "turkey"                    "pork"                     
 [11] "beef"                      "hamburger meat"           
 [13] "fish"                      "citrus fruit"             
 [15] "tropical fruit"            "pip fruit"                
 [17] "grapes"                    "berries"                  
 [19] "nuts/prunes"               "root vegetables"          
 [21] "onions"                    "herbs"                    
 [23] "other vegetables"          "packaged fruit/vegetables"
 [25] "whole milk"                "butter"                   
 [27] "curd"                      "dessert"                  
 [29] "butter milk"               "yogurt"                   
 [31] "whipped/sour cream"        "beverages"                
 [33] "UHT-milk"                  "condensed milk"           
 [35] "cream"                     "soft cheese"              
 [37] "sliced cheese"             "hard cheese"              
 [39] "cream cheese "             "processed cheese"         
 [41] "spread cheese"             "curd cheese"              
 [43] "specialty cheese"          "mayonnaise"               
 [45] "salad dressing"            "tidbits"                  
 [47] "frozen vegetables"         "frozen fruits"            
 [49] "frozen meals"              "frozen fish"              
 [51] "frozen chicken"            "ice cream"                
 [53] "frozen dessert"            "frozen potato products"   
 [55] "domestic eggs"             "rolls/buns"               
 [57] "white bread"               "brown bread"              
 [59] "pastry"                    "roll products "           
 [61] "semi-finished bread"       "zwieback"                 
 [63] "potato products"           "flour"                    
 [65] "salt"                      "rice"                     
 [67] "pasta"                     "vinegar"                  
 [69] "oil"                       "margarine"                
 [71] "specialty fat"             "sugar"                    
 [73] "artif. sweetener"          "honey"                    
 [75] "mustard"                   "ketchup"                  
 [77] "spices"                    "soups"                    
 [79] "ready soups"               "Instant food products"    
 [81] "sauces"                    "cereals"                  
 [83] "organic products"          "baking powder"            
 [85] "preservation products"     "pudding powder"           
 [87] "canned vegetables"         "canned fruit"             
 [89] "pickled vegetables"        "specialty vegetables"     
 [91] "jam"                       "sweet spreads"            
 [93] "meat spreads"              "canned fish"              
 [95] "dog food"                  "cat food"                 
 [97] "pet care"                  "baby food"                
 [99] "coffee"                    "instant coffee"           
[101] "tea"                       "cocoa drinks"             
[103] "bottled water"             "soda"                     
[105] "misc. beverages"           "fruit/vegetable juice"    
[107] "syrup"                     "bottled beer"             
[109] "canned beer"               "brandy"                   
[111] "whisky"                    "liquor"                   
[113] "rum"                       "liqueur"                  
[115] "liquor (appetizer)"        "white wine"               
[117] "red/blush wine"            "prosecco"                 
[119] "sparkling wine"            "salty snack"              
[121] "popcorn"                   "nut snack"                
[123] "snack products"            "long life bakery product" 
[125] "waffles"                   "cake bar"                 
[127] "chewing gum"               "chocolate"                
[129] "cooking chocolate"         "specialty chocolate"      
[131] "specialty bar"             "chocolate marshmallow"    
[133] "candy"                     "seasonal products"        
[135] "detergent"                 "softener"                 
[137] "decalcifier"               "dish cleaner"             
[139] "abrasive cleaner"          "cleaner"                  
[141] "toilet cleaner"            "bathroom cleaner"         
[143] "hair spray"                "dental care"              
[145] "male cosmetics"            "make up remover"          
[147] "skin care"                 "female sanitary products" 
[149] "baby cosmetics"            "soap"                     
[151] "rubbing alcohol"           "hygiene articles"         
[153] "napkins"                   "dishes"                   
[155] "cookware"                  "kitchen utensil"          
[157] "cling film/bags"           "kitchen towels"           
[159] "house keeping products"    "candles"                  
[161] "light bulbs"               "sound storage medium"     
[163] "newspapers"                "photo/film"               
[165] "pot plants"                "flower soil/fertilizer"   
[167] "flower (seeds)"            "shopping bags"            
[169] "bags"                     </code></pre>
</div>
</div>
<p>The transaction examples</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>    items                 
[1] {citrus fruit,        
     semi-finished bread, 
     margarine,           
     ready soups}         
[2] {tropical fruit,      
     yogurt,              
     coffee}              
[3] {whole milk}          </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    items                 
[1] {chicken,             
     citrus fruit,        
     other vegetables,    
     butter,              
     yogurt,              
     frozen dessert,      
     domestic eggs,       
     rolls/buns,          
     rum,                 
     cling film/bags}     
[2] {semi-finished bread, 
     bottled water,       
     soda,                
     bottled beer}        
[3] {chicken,             
     tropical fruit,      
     other vegetables,    
     vinegar,             
     shopping bags}       </code></pre>
</div>
</div>
<p>The size of the vectors that define the sparse matrix of the data set <em>Groceries</em> where <em>indices</em> is defining products where 43367 is non-zero and <em>pointers</em> - another element of the sparse matrix with 9836 non-zero.</p>
<p>The data set structure</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "labels" "level2" "level1"</code></pre>
</div>
</div>
<p>The transactions ~ number of products</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(Groceries)))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Size - number of products in each of transaction</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Distribution</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">size</span>(Groceries), <span class="at">v_line =</span> <span class="dv">3</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Size - number of products in each of transaction</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The sparse matrix of the dataset</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Image of spare matrix = transaction &amp; products</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>SUMMARY - DATABASE CHARACTERISTICS</strong></p>
<ol type="1">
<li>The data set contains 9835 transactions composed of 169 items.</li>
<li>The data set is rather spare (density of 0.02609146 -&gt; 2,6%).</li>
<li>The most frequent items is <code>whole milk</code> - 2513 times; and next is <code>other vegetables</code> - 1903 times.</li>
<li>The typical transaction ( <em>shopping list</em> ) counts less than 5 items (average = 4.409) - <u>median is 3</u>;</li>
<li>The data set contains extra meta data about items. They are grouped on two levels: <em>level 1</em> (10 departments) and <em>level 2</em> (55 product groups).</li>
</ol>
</section>
<section id="product-list-analysis" class="level2 page-columns page-full" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="product-list-analysis"><span class="header-section-number">2.2</span> Product list analysis</h2>
<p>Verification of data completeness, number of product groups and departments</p>
<ul>
<li>Are there any NAs?</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<ul>
<li>List of items (level 1)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "canned food"          "detergent"            "drinks"              
 [4] "fresh products"       "fruit and vegetables" "meat and sausage"    
 [7] "non-food"             "perfumery"            "processed food"      
[10] "snacks and candies"  </code></pre>
</div>
</div>
<ul>
<li>Item list for products group (level 2)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre class="scroll-300"><code>$`baby food`
[1] "baby food"

$bags
[1] "shopping bags" "bags"         

$`bakery improver`
[1] "baking powder"         "preservation products"

$`bathroom cleaner`
[1] "toilet cleaner"   "bathroom cleaner"

$beef
[1] "beef"           "hamburger meat"

$beer
[1] "bottled beer" "canned beer" 

$`bread and backed goods`
[1] "rolls/buns"          "white bread"         "brown bread"        
[4] "pastry"              "roll products "      "semi-finished bread"
[7] "zwieback"           

$candy
[1] "candy"

$`canned fish`
[1] "canned fish"

$`canned fruit/vegetables`
[1] "canned vegetables"    "canned fruit"         "pickled vegetables"  
[4] "specialty vegetables"

$cheese
[1] "soft cheese"      "sliced cheese"    "hard cheese"      "cream cheese "   
[5] "processed cheese" "spread cheese"    "curd cheese"      "specialty cheese"

$`chewing gum`
[1] "chewing gum"

$chocolate
[1] "chocolate"             "cooking chocolate"     "specialty chocolate"  
[4] "specialty bar"         "chocolate marshmallow"

$cleaner
[1] "dish cleaner"     "abrasive cleaner" "cleaner"         

$coffee
[1] "coffee"         "instant coffee"

$condiments
[1] "mustard" "ketchup" "spices" 

$cosmetics
[1] "male cosmetics"           "make up remover"         
[3] "skin care"                "female sanitary products"
[5] "baby cosmetics"          

$`dairy produce`
[1] "whole milk"         "butter"             "curd"              
[4] "dessert"            "butter milk"        "yogurt"            
[7] "whipped/sour cream" "beverages"         

$delicatessen
[1] "mayonnaise"     "salad dressing" "tidbits"       

$`dental care`
[1] "dental care"

$`detergent/softener`
[1] "detergent"   "softener"    "decalcifier"

$eggs
[1] "domestic eggs"

$fish
[1] "fish"

$`frozen foods`
[1] "frozen vegetables"      "frozen fruits"          "frozen meals"          
[4] "frozen fish"            "frozen chicken"         "ice cream"             
[7] "frozen dessert"         "frozen potato products"

$fruit
[1] "citrus fruit"   "tropical fruit" "pip fruit"      "grapes"        
[5] "berries"        "nuts/prunes"   

$`games/books/hobby`
[1] "sound storage medium" "newspapers"           "photo/film"          

$garden
[1] "pot plants"             "flower soil/fertilizer" "flower (seeds)"        

$`hair care`
[1] "hair spray"

$`hard drinks`
[1] "brandy"             "whisky"             "liquor"            
[4] "rum"                "liqueur"            "liquor (appetizer)"

$`health food`
[1] "cereals"          "organic products"

$`jam/sweet spreads`
[1] "jam"           "sweet spreads"

$`long-life bakery products`
[1] "long life bakery product" "waffles"                 
[3] "cake bar"                

$`meat spreads`
[1] "meat spreads"

$`non-alc. drinks`
[1] "bottled water"         "soda"                  "misc. beverages"      
[4] "fruit/vegetable juice" "syrup"                

$`non-food house keeping products`
[1] "kitchen towels"         "house keeping products" "candles"               
[4] "light bulbs"           

$`non-food kitchen`
[1] "dishes"          "cookware"        "kitchen utensil" "cling film/bags"

$`packaged fruit/vegetables`
[1] "packaged fruit/vegetables"

$perfumery
[1] "hygiene articles" "napkins"         

$`personal hygiene`
[1] "rubbing alcohol"

$`pet food/care`
[1] "dog food" "cat food" "pet care"

$pork
[1] "pork"

$poultry
[1] "chicken" "turkey" 

$`pudding powder`
[1] "pudding powder"

$sausage
[1] "frankfurter"       "sausage"           "liver loaf"       
[4] "ham"               "meat"              "finished products"
[7] "organic sausage"  

$`seasonal products`
[1] "seasonal products"

$`shelf-stable dairy`
[1] "UHT-milk"       "condensed milk" "cream"         

$snacks
[1] "salty snack"    "popcorn"        "nut snack"      "snack products"

$soap
[1] "soap"

$`soups/sauces`
[1] "soups"                 "ready soups"           "Instant food products"
[4] "sauces"               

$`staple foods`
[1] "potato products" "flour"           "salt"            "rice"           
[5] "pasta"          

$sweetener
[1] "sugar"            "artif. sweetener" "honey"           

$`tea/cocoa drinks`
[1] "tea"          "cocoa drinks"

$vegetables
[1] "root vegetables"  "onions"           "herbs"            "other vegetables"

$`vinegar/oils`
[1] "vinegar"       "oil"           "margarine"     "specialty fat"

$wine
[1] "white wine"     "red/blush wine" "prosecco"       "sparkling wine"</code></pre>
</div>
</div>
<p><br></p>
<ul>
<li>The number of items in each products groups</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(len_list_lvl2), <span class="at">h_line =</span> <span class="dv">3</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"number of products in group"</span>, <span class="at">ylab =</span> <span class="st">"number of products' group"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Number of items in each products group</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Transactions by items (level 1)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>    items                 
[1] {citrus fruit,        
     semi-finished bread, 
     margarine,           
     ready soups}         
[2] {tropical fruit,      
     yogurt,              
     coffee}              
[3] {whole milk}          </code></pre>
</div>
</div>
<ul>
<li>Transactions by products group (level 2)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>    items                    
[1] {bread and backed goods, 
     fruit,                  
     soups/sauces,           
     vinegar/oils}           
[2] {coffee,                 
     dairy produce,          
     fruit}                  
[3] {dairy produce}          </code></pre>
</div>
</div>
<p><strong>SUMMARY - ITEMS AND PRODUCTS GROUPS</strong></p>
<ol type="1">
<li>Meta information stored in <em>level 1</em> defines the most general division into departments in the store, of which there are 10.</li>
<li>Meta information stored in <em>level 2</em> defines 55 products group.</li>
<li>Due to the quality of the analysis, it was decided that an analysis based on items and, on a more general level as products group would be more appropriate for the preparation of management decisions. In the further part of the material, the analysis is carried out in two ways - for items and products groups.</li>
<li>In <em>level 2</em> 196 items were divided into 55 products group. As average products group has 3 items, but 7 products group has 6 or more items.</li>
</ol>
<section id="visualisation-for-items-from-groceries" class="level3 page-columns page-full" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="visualisation-for-items-from-groceries"><span class="header-section-number">2.2.1</span> Visualisation for items from <em>Groceries</em></h3>
<ul>
<li>20 items with the highest relative support</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries, <span class="at">v_line =</span> <span class="fl">0.05</span>, <span class="at">topN =</span> <span class="dv">20</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for top 20 products</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The items with min relative support equals 0.10</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries, <span class="at">v_line =</span> <span class="fl">0.10</span>, <span class="at">support =</span> <span class="fl">0.10</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for products with min support = 0.1</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The items with min relative support equals 0.05</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries, <span class="at">v_line =</span> <span class="fl">0.05</span>, <span class="at">support =</span> <span class="fl">0.05</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for products with min support = 0.05</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisation-for-product-groups-from-groceries-level_2" class="level3 page-columns page-full" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="visualisation-for-product-groups-from-groceries-level_2"><span class="header-section-number">2.2.2</span> Visualisation for product groups from <em>Groceries</em> ( <em>level_2</em> )</h3>
<ul>
<li>20 product groups with the highest relative support</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries_lvl2, <span class="at">v_line =</span> <span class="fl">0.05</span>, <span class="at">topN =</span> <span class="dv">20</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for 20 top products’ groups</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The product groups with min relative support equals 0.10</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries_lvl2, <span class="at">v_line =</span> <span class="fl">0.10</span>, <span class="at">support =</span> <span class="fl">0.10</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for products’ groups with min support = 0.10</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The product groups with min relative support equals 0.05</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_freq</span>(<span class="at">tab_src =</span> Groceries_lvl2, <span class="at">v_line =</span> <span class="fl">0.05</span>, <span class="at">support =</span> <span class="fl">0.05</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Plot of frequency for products’ groups with min support = 0.05</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="support-and-relative-support-for-items" class="level3 page-columns page-full" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="support-and-relative-support-for-items"><span class="header-section-number">2.2.3</span> Support and relative support for items</h3>
<p>Relative support may be interpreted as probabilities (i.e.&nbsp;absolute support/9835)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> tab_freq, <span class="at">xlab =</span> <span class="st">"relative support"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Relative support for each single product</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>List of items ordered by decreasing value of relative support</p>
<p>The items with the highest…</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>      whole milk other vegetables       rolls/buns             soda 
       0.2555160        0.1934926        0.1839349        0.1743772 
          yogurt    bottled water 
       0.1395018        0.1105236 </code></pre>
</div>
</div>
<p>..and the lowest relative support</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>       baby cosmetics       kitchen utensil                  bags 
         0.0006100661          0.0004067107          0.0004067107 
preservation products             baby food  sound storage medium 
         0.0002033554          0.0001016777          0.0001016777 </code></pre>
</div>
</div>
<p><br></p>
<p>The support (absolute) for items (number of transaction for each item)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> tab_freq_ab, <span class="at">xlab =</span> <span class="st">"support"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">3000</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Support for each single product</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>The proposal of items with z <em>minSup</em> &amp; <em>minrSup</em></strong></p>
<ul>
<li>items with relative support &gt; 20% (absolute support: 1968 = 0.20 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 1</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>whole milk 
  0.255516 </code></pre>
</div>
</div>
<ul>
<li>items with relative support &gt;= 10% (absolute support: 984 = 0.10 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 8</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>      whole milk other vegetables       rolls/buns             soda 
       0.2555160        0.1934926        0.1839349        0.1743772 
          yogurt    bottled water  root vegetables   tropical fruit 
       0.1395018        0.1105236        0.1089985        0.1049314 </code></pre>
</div>
</div>
<ul>
<li>items with relative support &gt;= 5% (absolute support: 490 = 0.05 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 28</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>           whole milk      other vegetables            rolls/buns 
           0.25551601            0.19349263            0.18393493 
                 soda                yogurt         bottled water 
           0.17437722            0.13950178            0.11052364 
      root vegetables        tropical fruit         shopping bags 
           0.10899847            0.10493137            0.09852567 
              sausage                pastry          citrus fruit 
           0.09395018            0.08896797            0.08276563 
         bottled beer            newspapers           canned beer 
           0.08052872            0.07981698            0.07768175 
            pip fruit fruit/vegetable juice    whipped/sour cream 
           0.07564820            0.07229283            0.07168277 
          brown bread         domestic eggs           frankfurter 
           0.06487036            0.06344687            0.05897306 
            margarine                coffee                  pork 
           0.05856634            0.05805796            0.05765125 
               butter                  curd                  beef 
           0.05541434            0.05327911            0.05246568 
              napkins 
           0.05236401 </code></pre>
</div>
</div>
<ul>
<li>items with <u>absolute</u> support &gt;= 100 (~&gt;1%)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 88</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>      whole milk other vegetables       rolls/buns             soda 
            2513             1903             1809             1715 
          yogurt 
            1372 </code></pre>
</div>
</div>
</section>
<section id="the-most-frequent-items" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="the-most-frequent-items"><span class="header-section-number">2.2.4</span> The most frequent items</h3>
<p>List of the most frequent items with relative support equal 10% (984 transactions: <em>minSup</em> = 984, <em>minrSup</em> = 0.10)</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "whole milk"       "other vegetables" "rolls/buns"       "soda"            
[5] "yogurt"           "bottled water"    "root vegetables"  "tropical fruit"  </code></pre>
</div>
</div>
<p>The most frequent items belongs to groups:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>                  level2
1                  fruit
2             vegetables
4          dairy produce
6 bread and backed goods
7        non-alc. drinks</code></pre>
</div>
</div>
<p><strong>CONCLUSIONS</strong></p>
<p>The most frequent items are: (= frequent items with support greater than <em>minSup</em> = 984)</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "whole milk"       "other vegetables" "rolls/buns"       "soda"            
[5] "yogurt"           "bottled water"    "root vegetables"  "tropical fruit"  </code></pre>
</div>
</div>
<p>The most frequent items belong to the following products groups</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">product group</th>
<th style="text-align: center;">#</th>
<th style="text-align: left;">items</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">bread and backed goods</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">“rolls/buns”</td>
</tr>
<tr class="even">
<td style="text-align: right;">dairy produce</td>
<td style="text-align: center;">2</td>
<td style="text-align: left;">“whole milk” “yogurt”</td>
</tr>
<tr class="odd">
<td style="text-align: right;">fruit</td>
<td style="text-align: center;">1</td>
<td style="text-align: left;">“tropical fruit”</td>
</tr>
<tr class="even">
<td style="text-align: right;">non-alc. drinks</td>
<td style="text-align: center;">2</td>
<td style="text-align: left;">“soda” “bottled water”</td>
</tr>
<tr class="odd">
<td style="text-align: right;">vegetables</td>
<td style="text-align: center;">2</td>
<td style="text-align: left;">“other vegetables” “root vegetables”</td>
</tr>
</tbody>
</table>
<p><strong>VALIDATION (apriori for frequent items)</strong></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>list_pop_products_spr  <span class="ot">&lt;-</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apriori</span>(<span class="at">data =</span> Groceries, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.003</span>, <span class="at">confidence =</span> <span class="fl">0.2</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">target =</span> <span class="st">"frequent itemsets"</span>))</span></code></pre></div>
</div>
<p>List of the most frequent items with <em>minSup</em> equals 984</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(<span class="fu">subset</span>(list_pop_products_spr, <span class="at">subset =</span> count <span class="sc">&gt;</span> <span class="dv">984</span>)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    items              support   count
[1] {whole milk}       0.2555160 2513 
[2] {other vegetables} 0.1934926 1903 
[3] {rolls/buns}       0.1839349 1809 
[4] {soda}             0.1743772 1715 
[5] {yogurt}           0.1395018 1372 
[6] {bottled water}    0.1105236 1087 
[7] {root vegetables}  0.1089985 1072 
[8] {tropical fruit}   0.1049314 1032 </code></pre>
</div>
</div>
<p>Thus, using the alternative method, the same result was obtained.</p>
</section>
<section id="support-and-relative-support-of-product-groups-level2" class="level3 page-columns page-full" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="support-and-relative-support-of-product-groups-level2"><span class="header-section-number">2.2.5</span> Support and relative support of product groups (level2)</h3>
<p>Relative support may be interpreted as probabilities (i.e.&nbsp;absolute support/9835)</p>
<p>List of items ordered by decreasing value of relative support</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> tab_freq_lvl2, <span class="at">xlab =</span> <span class="st">"relative support"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Relative support for each single products’ group</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The product groups with the highest…</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
             0.4430097              0.3455008              0.3179461 
            vegetables                  fruit                sausage 
             0.2730046              0.2491103              0.1891205 </code></pre>
</div>
</div>
<p>..and the lowest relative support</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>            fish             soap   pudding powder        hair care 
    0.0029486528     0.0026436197     0.0023385867     0.0011184545 
personal hygiene        baby food 
    0.0010167768     0.0001016777 </code></pre>
</div>
</div>
<p>The support (absolute) for items (number of transaction for each item)</p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> tab_freq_lvl2_ab, <span class="at">xlab =</span> <span class="st">"support"</span>, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5000</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Support for each single products’ group</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>The proposal of products group with z <em>minSup</em> &amp; <em>minrSup</em></strong></p>
<ul>
<li>products group with relative support &gt; 20% (absolute support: 1968 = 0.20 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 5</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
             0.4430097              0.3455008              0.3179461 
            vegetables                  fruit 
             0.2730046              0.2491103 </code></pre>
</div>
</div>
<ul>
<li>products group with relative support &gt;= 10% (absolute support: 984 = 0.10 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 10</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
             0.4430097              0.3455008              0.3179461 
            vegetables                  fruit 
             0.2730046              0.2491103 </code></pre>
</div>
</div>
<ul>
<li>products group with relative support &gt;= 5% (absolute support: 490 = 0.05 * 9835)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 21</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
             0.4430097              0.3455008              0.3179461 
            vegetables                  fruit 
             0.2730046              0.2491103 </code></pre>
</div>
</div>
<ul>
<li>products groups with <u>absolute</u> support &gt;= 100 (~&gt;1%)</li>
</ul>
<div class="cell" data-fig.showtext="false">

</div>
<p>– count: 44</p>
<p>– example:</p>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
                  4357                   3398                   3127 
            vegetables                  fruit 
                  2685                   2450 </code></pre>
</div>
</div>
</section>
<section id="the-most-frequent-products-groups-level2" class="level3" data-number="2.2.6">
<h3 data-number="2.2.6" class="anchored" data-anchor-id="the-most-frequent-products-groups-level2"><span class="header-section-number">2.2.6</span> The most frequent products groups (level2)</h3>
<p>List of the most frequent products groups with relative support equal 10% (984 transakcje: <em>minSup</em> = 984, <em>minrSup</em> = 0.10)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(list_pop_gr_products <span class="ot">&lt;-</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">names</span>(<span class="fu">sort</span>(tab_freq_lvl2_ab[tab_freq_lvl2_ab <span class="sc">&gt;</span> <span class="dv">984</span>], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "dairy produce"          "bread and backed goods" "non-alc. drinks"       
 [4] "vegetables"             "fruit"                  "sausage"               
 [7] "beer"                   "cheese"                 "frozen foods"          
[10] "chocolate"             </code></pre>
</div>
</div>
<p><strong>CONCLUSIONS</strong></p>
<p>The most frequent products group are:</p>
<ol type="1">
<li><code>dairy produce</code> occur in 4357 out of 9835 transactions (44,3%).</li>
<li><code>bread and backed goods</code> occur in w 3398 out of 9835 transactions (34,5%).</li>
<li><code>non-alc. drinks</code> occur in 3127 out of 9835 transactions (31,8%).</li>
<li><code>vegetables</code> occur in 2685 out of 9835 transactions (27,3%).</li>
<li><code>fruit</code> occur in 2450 out of 9835 transactions (24,9%).</li>
</ol>
<p><strong>VALIDATION (apriori for frequent products groups)</strong></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>list_pop_gr_products_spr  <span class="ot">&lt;-</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apriori</span>(<span class="at">data =</span> Groceries_lvl2, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.003</span>, <span class="at">confidence =</span> <span class="fl">0.2</span>, </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">target =</span> <span class="st">"frequent itemsets"</span>))</span></code></pre></div>
</div>
<p>List of the most frequent products groups with <em>minSup</em> equals 984</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(<span class="fu">subset</span>(list_pop_gr_products_spr, <span class="at">subset =</span> count <span class="sc">&gt;</span> <span class="dv">984</span>)))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     items                                     support   count
[1]  {dairy produce}                           0.4430097 4357 
[2]  {bread and backed goods}                  0.3455008 3398 
[3]  {non-alc. drinks}                         0.3179461 3127 
[4]  {vegetables}                              0.2730046 2685 
[5]  {fruit}                                   0.2491103 2450 
[6]  {sausage}                                 0.1891205 1860 
[7]  {bread and backed goods, dairy produce}   0.1876970 1846 
[8]  {dairy produce, vegetables}               0.1704118 1676 
[9]  {dairy produce, fruit}                    0.1563803 1538 
[10] {beer}                                    0.1555669 1530 
[11] {dairy produce, non-alc. drinks}          0.1519065 1494 
[12] {cheese}                                  0.1266904 1246 
[13] {bread and backed goods, non-alc. drinks} 0.1242501 1222 
[14] {frozen foods}                            0.1169293 1150 
[15] {bread and backed goods, vegetables}      0.1162176 1143 
[16] {chocolate}                               0.1087951 1070 
[17] {bread and backed goods, fruit}           0.1075750 1058 
[18] {dairy produce, sausage}                  0.1073716 1056 
[19] {fruit, vegetables}                       0.1070666 1053 
[20] {bread and backed goods, sausage}         0.1036096 1019 </code></pre>
</div>
</div>
<p>This confirms the previous results - the same list of the most frequent product groups was obtained.</p>
</section>
<section id="the-frequent-items-and-the-frequent-products-groups" class="level3 page-columns page-full" data-number="2.2.7">
<h3 data-number="2.2.7" class="anchored" data-anchor-id="the-frequent-items-and-the-frequent-products-groups"><span class="header-section-number">2.2.7</span> The frequent items and the frequent products groups</h3>
<p>Analysis of which items are frequent and from which products groups with the greatest support (&gt;30% of transactions, i.e.&nbsp;for the first three)</p>
<p><strong>ATTENTION</strong> Confirmation of the observation that the support of a frequent group is ‘built’ by two-three products (horizontal lines on plots = average for given group)</p>
<ol type="1">
<li>products group <em>dairy produce</em> - list of items with value of relative support</li>
</ol>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>                   relative support
whole milk               0.25551601
yogurt                   0.13950178
whipped/sour cream       0.07168277
butter                   0.05541434
curd                     0.05327911
dessert                  0.03711235
butter milk              0.02796136
beverages                0.02602949</code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">rev</span>(gr_prod_1), <span class="at">v_line =</span> <span class="fu">mean</span>(gr_prod_1), </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">horiz_flag =</span> <span class="cn">TRUE</span>, <span class="at">xlab =</span> <span class="st">"relative support"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Relative support for products from ‘dairy produce’ group</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>products group <em>bread and backed goods</em> - list of items with value of relative support</li>
</ol>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>                    relative support
rolls/buns               0.183934926
pastry                   0.088967972
brown bread              0.064870361
white bread              0.042094560
semi-finished bread      0.017691917
roll products            0.010269446
zwieback                 0.006914082</code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">rev</span>(gr_prod_2), <span class="at">v_line =</span> <span class="fu">mean</span>(gr_prod_2), </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">horiz_flag =</span> <span class="cn">TRUE</span>, <span class="at">xlab =</span> <span class="st">"relative support"</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Relative support for products from ‘bread and backed goods’ group</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>products group <em>non-alc. drinks</em> - list of items with value of relative support</li>
</ol>
<div class="cell" data-fig.showtext="false">
<div class="cell-output cell-output-stdout">
<pre><code>                      relative support
soda                       0.174377224
bottled water              0.110523640
fruit/vegetable juice      0.072292832
misc. beverages            0.028368073
syrup                      0.003253686</code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">rev</span>(gr_prod_3), <span class="at">v_line =</span> <span class="fu">mean</span>(gr_prod_3), </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">horiz_flag =</span> <span class="cn">TRUE</span>, <span class="at">xlab =</span> <span class="st">"relative support"</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.25</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Relative support for products from ‘non-alc. drinks’ group</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="experiment---association-rules" class="level1 page-columns page-full" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> EXPERIMENT - ASSOCIATION RULES</h1>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any association rule is based on an <em>IF-THEN</em> condition, i.e., an antecedent and a consequence, LHS and RHS.</p>
<p>Rules that satisfy both a minimum support threshold (called <em>minSup</em>) and a minimum confidence threshold (called <em>minConf</em> ) are called <strong>Strong</strong>.</p>
</div>
</div>
<p>Three version of strong rule-finding experiment were run. Each of them was conducted separately for items and for products groups (level 2)</p>
<table class="table">
<thead>
<tr class="header">
<th>Approach</th>
<th><em>minSup</em></th>
<th><em>minConf</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1st</td>
<td>0.003</td>
<td>0.2</td>
</tr>
<tr class="even">
<td>2nd</td>
<td>0.03</td>
<td>0.2</td>
</tr>
<tr class="odd">
<td>3rd</td>
<td>0.003</td>
<td>0.5</td>
</tr>
</tbody>
</table>
<section id="model-apriori-for-items---1st-approach" class="level2 page-columns page-full" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="model-apriori-for-items---1st-approach"><span class="header-section-number">3.1</span> Model apriori for items - 1st approach</h2>
<div class="cell" data-result="hide" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>ap_param <span class="ot">&lt;-</span> <span class="fu">new</span>(<span class="st">"APparameter"</span>, <span class="st">"confidence"</span> <span class="ot">=</span> <span class="fl">0.2</span>, <span class="st">"support"</span> <span class="ot">=</span> <span class="fl">0.003</span>) </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>rules_groc <span class="ot">&lt;-</span> <span class="fu">apriori</span>(<span class="at">data =</span> Groceries, ap_param)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.2    0.1    1 none FALSE            TRUE       5   0.003      1
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 29 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[169 item(s), 9835 transaction(s)] done [0.00s].
sorting and recoding items ... [136 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 done [0.00s].
writing ... [2246 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
</div>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.003\)</span> means that item must have absolute support over 29 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.2\)</span> means that if LHS contains selected item that 20% of RHS will follow the rule</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc)), <span class="at">xlab =</span> <span class="st">"length of rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>2246 association rules were found for the requested search parameters</p></li>
<li><p>67,4% rules - 1514 z 2246 - have a length (LHS+RHS) of 3 (elements)</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                        rhs                      support confidence    coverage      lift count
[1]  {Instant food products} =&gt; {hamburger meat}     0.003050330  0.3797468 0.008032537 11.421438    30
[2]  {flour}                 =&gt; {sugar}              0.004982206  0.2865497 0.017386884  8.463112    49
[3]  {processed cheese}      =&gt; {white bread}        0.004168785  0.2515337 0.016573462  5.975445    41
[4]  {citrus fruit,                                                                                    
      tropical fruit,                                                                                  
      other vegetables,                                                                                
      whole milk}            =&gt; {root vegetables}    0.003152008  0.6326531 0.004982206  5.804238    31
[5]  {tropical fruit,                                                                                  
      root vegetables,                                                                                 
      other vegetables,                                                                                
      whole milk}            =&gt; {citrus fruit}       0.003152008  0.4492754 0.007015760  5.428284    31
[6]  {liquor}                =&gt; {bottled beer}       0.004677173  0.4220183 0.011082867  5.240594    46
[7]  {citrus fruit,                                                                                    
      root vegetables,                                                                                 
      other vegetables,                                                                                
      whole milk}            =&gt; {tropical fruit}     0.003152008  0.5438596 0.005795628  5.183004    31
[8]  {berries,                                                                                         
      whole milk}            =&gt; {whipped/sour cream} 0.004270463  0.3620690 0.011794611  5.050990    42
[9]  {herbs,                                                                                           
      whole milk}            =&gt; {root vegetables}    0.004168785  0.5394737 0.007727504  4.949369    41
[10] {tropical fruit,                                                                                  
      whole milk,                                                                                      
      yogurt}                =&gt; {curd}               0.003965430  0.2617450 0.015149975  4.912713    39</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p><code>Instant food products</code> &amp; <code>hamburger meat</code> are purchased 11 times more often together than separately (rule [1]),</p></li>
<li><p><code>processed cheese</code> &amp; <code>white bread</code> are purchased 8,5 times more often together than separately (rule [3])</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                    support confidence    coverage     lift count
[1]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables,                                                                           
      whole milk}         =&gt; {other vegetables} 0.003152008  0.8857143 0.003558719 4.577509    31
[2]  {root vegetables,                                                                           
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003050330  0.7894737 0.003863752 3.089723    30
[3]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables}    =&gt; {other vegetables} 0.004473818  0.7857143 0.005693950 4.060694    44
[4]  {root vegetables,                                                                           
      other vegetables,                                                                          
      brown bread}        =&gt; {whole milk}       0.003152008  0.7750000 0.004067107 3.033078    31
[5]  {onions,                                                                                    
      butter}             =&gt; {whole milk}       0.003050330  0.7500000 0.004067107 2.935237    30
[6]  {tropical fruit,                                                                            
      curd,                                                                                      
      yogurt}             =&gt; {whole milk}       0.003965430  0.7500000 0.005287239 2.935237    39
[7]  {curd,                                                                                      
      domestic eggs}      =&gt; {whole milk}       0.004778851  0.7343750 0.006507372 2.874086    47
[8]  {tropical fruit,                                                                            
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003355363  0.7333333 0.004575496 2.870009    33
[9]  {tropical fruit,                                                                            
      root vegetables,                                                                           
      whipped/sour cream} =&gt; {other vegetables} 0.003355363  0.7333333 0.004575496 3.789981    33
[10] {butter,                                                                                    
      curd}               =&gt; {whole milk}       0.004880529  0.7164179 0.006812405 2.803808    48</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li><p>if <code>citrus fruit</code>, <code>tropical fruit</code>, <code>root vegetables</code>, <code>whole milk</code> then in 88% of transaction also <code>other vegetables</code> (rule [1]);</p></li>
<li><p>if <code>root vegetables</code>, <code>butter</code> &amp; <code>yogurt</code> then in 79% of transaction also <code>whole milk</code> (rule [2]);</p></li>
<li><p>if <code>citrus fruit</code>, <code>tropical fruit</code>, <code>root vegetables</code> then in 79% of transaction also <code>other vegetables</code> (rule [3]),</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                   rhs                support    confidence coverage 
[1]  {}                 =&gt; {whole milk}       0.25551601 0.2555160  1.0000000
[2]  {other vegetables} =&gt; {whole milk}       0.07483477 0.3867578  0.1934926
[3]  {whole milk}       =&gt; {other vegetables} 0.07483477 0.2928770  0.2555160
[4]  {rolls/buns}       =&gt; {whole milk}       0.05663447 0.3079049  0.1839349
[5]  {whole milk}       =&gt; {rolls/buns}       0.05663447 0.2216474  0.2555160
[6]  {yogurt}           =&gt; {whole milk}       0.05602440 0.4016035  0.1395018
[7]  {whole milk}       =&gt; {yogurt}           0.05602440 0.2192598  0.2555160
[8]  {root vegetables}  =&gt; {whole milk}       0.04890696 0.4486940  0.1089985
[9]  {root vegetables}  =&gt; {other vegetables} 0.04738180 0.4347015  0.1089985
[10] {other vegetables} =&gt; {root vegetables}  0.04738180 0.2448765  0.1934926
     lift     count
[1]  1.000000 2513 
[2]  1.513634  736 
[3]  1.513634  736 
[4]  1.205032  557 
[5]  1.205032  557 
[6]  1.571735  551 
[7]  1.571735  551 
[8]  1.756031  481 
[9]  2.246605  466 
[10] 2.246605  466 </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li><p>the rule of relative support of 0.25 means that in 25% of transactions there is <code>whole milk</code> (count = 2513)(rule [1]);</p></li>
<li><p>rule <code>whole milk</code> &lt;=&gt; <code>other vegetables</code> of relative support of 0.075 means that <code>whole milk</code> &amp; <code>other vegetables</code> occur in 7,5% of transactions (here: what is the successor and what is the antecedent is not important) (rule [2], [3]);</p></li>
<li><p>rule <code>rolls/buns</code> &lt;=&gt; <code>yogurt</code> of relative support of 0.075 means that <code>rolls/buns</code> &amp; <code>yogurt</code> occur in 7,5% of transactions (here: what is the successor and what is the antecedent is not important) (rule [4], [5]).</p></li>
</ul>
<p><u>Quality of received rules (overview)</u></p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc)[<span class="st">"support"</span>], <span class="at">box_col =</span> col_0, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.02</span>), <span class="at">outline =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - support</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc)[<span class="st">"confidence"</span>], <span class="at">box_col =</span> col_2, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - confidence</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc)[<span class="st">"lift"</span>], <span class="at">box_col =</span> col_4, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">12</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - lift</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Conclusions on rule quality</strong></p>
<ol type="1">
<li>Max value of relative support is 25,5% (absolute support 2513), average value is 0,6% (61,8) - which almost coincides with the 3/4 quantile</li>
<li>Max value of confidence is 88,5%, and min = 20%, average value is 36,7% (it can be roughly said that in 1 out of 3 cases, after purchasing LHS items, RHS items are purchased)</li>
<li>Max value of lift is 11,4, but it is an outlier. Average value is 2,25 (Over 4, outliers start)</li>
</ol>
<p><u>Rule length analysis</u></p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc)), <span class="at">xlab =</span> <span class="st">"length of rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Conclusions regarding the length of rules</strong></p>
<ul>
<li><p>67,4% (1514 out of 2246) rules have length (LHS+RHS) of 3 (rules contains 3 item)</p></li>
<li><p>17% and 15,7% of rules have length appropriately - 2 &amp; 4</p></li>
<li><p>there is one rule where LHS is the empty set.</p></li>
</ul>
<p><u>Length analysis of LHS and RHS</u></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">size</span>(rules_groc<span class="sc">@</span>rhs))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1       1       1       1       1       1 </code></pre>
</div>
</div>
<p>All antecedents have length 1.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">size</span>(rules_groc<span class="sc">@</span>lhs))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   2.000   2.000   2.001   2.000   4.000 </code></pre>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc<span class="sc">@</span>lhs)))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules - LHS</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>67,4% (1514 out of 2246) rules have a consequence with length of 2</li>
<li>sets of rules where the consequence has a length of 1 and 3 are 16% of all for each length</li>
</ul>
</section>
<section id="model-apriori-for-products-group---1st-approach" class="level2 page-columns page-full" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="model-apriori-for-products-group---1st-approach"><span class="header-section-number">3.2</span> Model apriori for products group - 1st approach</h2>
<div class="cell" data-result="hide" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>rules_groc_lvl2 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(<span class="at">data =</span> Groceries_lvl2, </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.003</span>, <span class="at">confidence =</span> <span class="fl">0.2</span>, <span class="at">minlen =</span> <span class="dv">2</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.2    0.1    1 none FALSE            TRUE       5   0.003      2
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 29 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[55 item(s), 9835 transaction(s)] done [0.00s].
sorting and recoding items ... [49 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 6 7 done [0.01s].
writing ... [8411 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
</div>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.003\)</span> means that products group must have absolute support over 29 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.2\)</span> means that if LHS contains selected products group that 20% of RHS will follow the rule</li>
<li>assumed <span class="math inline">\(minLen = 2\)</span> means that rule has to have minimum two items</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc_lvl2)), <span class="at">xlab =</span> <span class="st">"lengthof rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products group)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>8411 association rules were found for the requested search parameters</p></li>
<li><p>42% of the rules - 3548 out of 8411 - have a length (LHS+RHS) of 4 (4 elements); 27% and 22% of the rules - have a length of 3 and 5 elements respectively.</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                   rhs                support confidence    coverage     lift count
[1]  {dairy produce,                                                                       
      sweetener,                                                                           
      vinegar/oils}     =&gt; {staple foods} 0.003253686  0.4637681 0.007015760 9.158955    32
[2]  {sweetener,                                                                           
      vinegar/oils}     =&gt; {staple foods} 0.003660397  0.4186047 0.008744281 8.267022    36
[3]  {dairy produce,                                                                       
      staple foods,                                                                        
      vinegar/oils}     =&gt; {sweetener}    0.003253686  0.3076923 0.010574479 8.026933    32
[4]  {staple foods,                                                                        
      vinegar/oils}     =&gt; {sweetener}    0.003660397  0.2880000 0.012709710 7.513210    36
[5]  {dairy produce,                                                                       
      fruit,                                                                               
      sweetener}        =&gt; {staple foods} 0.003965430  0.3451327 0.011489578 6.816025    39
[6]  {dairy produce,                                                                       
      non-alc. drinks,                                                                     
      sweetener}        =&gt; {staple foods} 0.003558719  0.3181818 0.011184545 6.283771    35
[7]  {dairy produce,                                                                       
      sweetener,                                                                           
      vegetables}       =&gt; {staple foods} 0.003965430  0.3145161 0.012608033 6.211378    39
[8]  {dairy produce,                                                                       
      fruit,                                                                               
      staple foods}     =&gt; {sweetener}    0.003965430  0.2363636 0.016776817 6.166144    39
[9]  {dairy produce,                                                                       
      sweetener}        =&gt; {staple foods} 0.007727504  0.3003953 0.025724453 5.932505    76
[10] {fruit,                                                                               
      sweetener}        =&gt; {staple foods} 0.004270463  0.2957746 0.014438231 5.841252    42</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p>products groups <code>dairy produce</code>, <code>sweetener</code>, <code>vinegar/oils</code> with <code>staple foods</code> are 9,2 times more often purchased together than separately (applies to LHS and RHS) (rule [1]),</p></li>
<li><p>products groups <code>sweetener</code> &amp; <code>vinegar/oils</code> are purchased together with <code>staple foods</code> 8,3 more often purchased together than separately (rule [2])</p></li>
<li><p>rule [3] is very similar to [1] but <span class="math inline">\(lift = 8.0\)</span></p></li>
<li><p>rule [4] is very similar to [2] but <span class="math inline">\(lift = 7.5\)</span></p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                 support confidence    coverage     lift count
[1]  {chocolate,                                                                                   
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003558719  1.0000000 0.003558719 2.257287    35
[2]  {eggs,                                                                                        
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[3]  {cheese,                                                                                      
      eggs,                                                                                        
      perfumery}               =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[4]  {eggs,                                                                                        
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003457041  0.9714286 0.003558719 2.192793    34
[5]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      staple foods}            =&gt; {dairy produce} 0.003152008  0.9687500 0.003253686 2.186747    31
[6]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[7]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[8]  {bread and backed goods,                                                                      
      fruit,                                                                                       
      pork,                                                                                        
      sausage}                 =&gt; {dairy produce} 0.004880529  0.9600000 0.005083884 2.166996    48
[9]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.004270463  0.9545455 0.004473818 2.154683    42
[10] {bread and backed goods,                                                                      
      eggs,                                                                                        
      fruit,                                                                                       
      vinegar/oils}            =&gt; {dairy produce} 0.003863752  0.9500000 0.004067107 2.144423    38</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li>if products groups <code>chocolate</code>, <code>fruit</code> &amp; <code>staple foods</code> then with confidence 100% also products group <code>dairy produce</code> (rule [1])</li>
</ul>
<p><strong>NOTE</strong> Because products group <code>dairy produce</code> occurs in 44% of transactions - it builds high-confidence rules when in a consequence. It follows from the definition <span class="math inline">\(conf(X-&gt;Y) = sup(X-&gt;Y) / sup(X)\)</span> (<code>dairy produce</code> <em>are building</em> value <span class="math inline">\(sup(X-&gt;Y)\)</span>)</p>
<p>What the rules look like when <code>dairy produce</code>is an antecedent?</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"dairy produce"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                             rhs                          support confidence    coverage     lift count
[1]  {dairy produce,                                                                                           
      frozen foods,                                                                                            
      fruit,                                                                                                   
      poultry}                    =&gt; {vegetables}             0.004168785  0.8367347 0.004982206 3.064911    41
[2]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      sausage,                                                                                                 
      vegetables}                 =&gt; {bread and backed goods} 0.003558719  0.8333333 0.004270463 2.411958    35
[3]  {cheese,                                                                                                  
      dairy produce,                                                                                           
      fruit,                                                                                                   
      staple foods}               =&gt; {vegetables}             0.003863752  0.8260870 0.004677173 3.025909    38
[4]  {dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      poultry,                                                                                                 
      sausage}                    =&gt; {bread and backed goods} 0.004067107  0.8163265 0.004982206 2.362734    40
[5]  {dairy produce,                                                                                           
      poultry,                                                                                                 
      staple foods}               =&gt; {vegetables}             0.003965430  0.8125000 0.004880529 2.976141    39
[6]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      fruit,                                                                                                   
      non-alc. drinks,                                                                                         
      sausage}                    =&gt; {bread and backed goods} 0.004372140  0.8113208 0.005388917 2.348246    43
[7]  {beef,                                                                                                    
      dairy produce,                                                                                           
      fruit,                                                                                                   
      pork}                       =&gt; {vegetables}             0.003457041  0.8095238 0.004270463 2.965239    34
[8]  {dairy produce,                                                                                           
      fruit,                                                                                                   
      non-alc. drinks,                                                                                         
      sausage,                                                                                                 
      vinegar/oils}               =&gt; {bread and backed goods} 0.003863752  0.8085106 0.004778851 2.340112    38
[9]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      long-life bakery products,                                                                               
      sausage}                    =&gt; {bread and backed goods} 0.004270463  0.8076923 0.005287239 2.337744    42
[10] {chocolate,                                                                                               
      dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      sausage}                    =&gt; {bread and backed goods} 0.007015760  0.8023256 0.008744281 2.322211    69</code></pre>
</div>
</div>
<p><strong>NOTE</strong> The rules with products group <code>dairy produce</code> in an antecedent have also relatively high confidence, and additionally in consequence are products groups with highest support like <code>bread and backed goods</code> &amp; <code>vegetables</code> (quite big <span class="math inline">\(sup(X-&gt;Y)\)</span>) - 3 out of 258 rules as example:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"bread and backed goods"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">129</span>, <span class="dv">258</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                          rhs                 support confidence    coverage     lift count
[1] {bread and backed goods,                                                                      
     cheese,                                                                                      
     fruit,                                                                                       
     non-alc. drinks,                                                                             
     perfumery}               =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[2] {bread and backed goods,                                                                      
     cheese,                                                                                      
     frozen foods,                                                                                
     sausage,                                                                                     
     vegetables}              =&gt; {dairy produce} 0.003457041  0.8500000 0.004067107 1.918694    34
[3] {bread and backed goods,                                                                      
     perfumery,                                                                                   
     vegetables}              =&gt; {dairy produce} 0.013523132  0.8012048 0.016878495 1.808549   133</code></pre>
</div>
</div>
<p><strong>FUN FACT</strong> If there is an item from the products group <code>bread and backed goods</code> in the antecedent, the item he products group <code>dairy produce</code> will occur in consequent with confidence <strong>&gt; 0,80</strong> (there are 258 such rules). The above list shows also that if item from products group <code>dairy produce</code> occurred in the consequent, that with confidence <strong>&gt; 0,80</strong> as antecedent will be <code>bread and backed goods</code> and <code>vegetables</code>.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                         rhs                      support   confidence
[1]  {bread and backed goods} =&gt; {dairy produce}          0.1876970 0.5432607 
[2]  {dairy produce}          =&gt; {bread and backed goods} 0.1876970 0.4236860 
[3]  {vegetables}             =&gt; {dairy produce}          0.1704118 0.6242086 
[4]  {dairy produce}          =&gt; {vegetables}             0.1704118 0.3846683 
[5]  {fruit}                  =&gt; {dairy produce}          0.1563803 0.6277551 
[6]  {dairy produce}          =&gt; {fruit}                  0.1563803 0.3529952 
[7]  {non-alc. drinks}        =&gt; {dairy produce}          0.1519065 0.4777742 
[8]  {dairy produce}          =&gt; {non-alc. drinks}        0.1519065 0.3428965 
[9]  {non-alc. drinks}        =&gt; {bread and backed goods} 0.1242501 0.3907899 
[10] {bread and backed goods} =&gt; {non-alc. drinks}        0.1242501 0.3596233 
     coverage  lift     count
[1]  0.3455008 1.226295 1846 
[2]  0.4430097 1.226295 1846 
[3]  0.2730046 1.409018 1676 
[4]  0.4430097 1.409018 1676 
[5]  0.2491103 1.417024 1538 
[6]  0.4430097 1.417024 1538 
[7]  0.3179461 1.078474 1494 
[8]  0.4430097 1.078474 1494 
[9]  0.3179461 1.131083 1222 
[10] 0.3455008 1.131083 1222 </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li><p>the rule of relative support of 0.18 eans that in 18% of transactions there are items from products groups <code>dairy produce</code> &amp; <code>bread and backed goods</code> (here: what is the successor and what is the antecedent is not important) (rule [1], [2]),</p></li>
<li><p>the rule of relative support of 0.17 eans that in 17% of transactions there are items from products groups <code>vegetables</code> &amp; <code>dairy produce</code> (here: what is the successor and what is the antecedent is not important) (rules [3], [4]),</p></li>
<li><p>the rule of relative support of 0.156 eans that in 15.6% of transactions there are items from products groups <code>fruit</code> &amp; <code>dairy produce</code> (here: what is the successor and what is the antecedent is not important) (rule [5], [6]),</p></li>
<li><p>the rule of relative support of 0.152 eans that in 15.2% of transactions there are items from products groups <code>non-alc. drinks</code> &amp; <code>dairy produce</code> (here: what is the successor and what is the antecedent is not important) (rule [7], [8]),</p></li>
<li><p>the rule of relative support of 0.124 eans that in 12.4% of transactions there are items from products groups <code>non-alc. drinks</code> &amp; <code>bread and backed goods</code> (here: what is the successor and what is the antecedent is not important) (rule [9], [10]).</p></li>
</ul>
<p>The above rules are built from product groups with the highest support (frequent items give frequent rules). But to find the answer to the question which departments of the store should be developed, rule confidence has to be analysed (the purchase of which product groups determines the purchase of other groups).</p>
<p><u>Quality of received rules (overview)</u></p>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc_lvl2)[<span class="st">"support"</span>], <span class="at">box_col =</span> col_0, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.02</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - support</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc_lvl2)[<span class="st">"confidence"</span>], <span class="at">box_col =</span> col_2, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">1.2</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - confidence</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_boxplot</span>(<span class="at">tab_src =</span> <span class="fu">quality</span>(rules_groc_lvl2)[<span class="st">"lift"</span>], <span class="at">box_col =</span> col_4, <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span>))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Boxplot of quality measures - lift</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Conclusions on rule quality</strong></p>
<ol type="1">
<li>Max value of relative support is 18.8% (absolute support 1846), average value is 0.7% (71.0) - which almost coincides with the 3/4 quantile</li>
<li>Max value of confidence is 100%, and min = 20%, average value is 51% (it can be said that in 1 out of 2 cases, after purchasing LHS items, RHS items are purchased)</li>
<li>Max value of lift is 9.16, but it is an outlier. Average value is 2,25 (Over 3.5, outliers start)</li>
</ol>
</section>
<section id="model-apriori-for-items---2nd-approach" class="level2 page-columns page-full" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="model-apriori-for-items---2nd-approach"><span class="header-section-number">3.3</span> Model apriori for items - 2nd approach</h2>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.03\)</span> means that item must have absolute support over 295 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.2\)</span> means that if LHS contains selected item that 20% of RHS will follow the rule</li>
<li>assumed <span class="math inline">\(minLen = 2\)</span> means that rule has to have minimum two items</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc)), <span class="at">xlab =</span> <span class="st">"lenght of rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>25 association rules were found for the requested search parameters</p></li>
<li><p>all rules have a length (LHS+RHS) of 2 (elements)</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                support    confidence
[1]  {root vegetables}    =&gt; {other vegetables} 0.04738180 0.4347015 
[2]  {other vegetables}   =&gt; {root vegetables}  0.04738180 0.2448765 
[3]  {sausage}            =&gt; {rolls/buns}       0.03060498 0.3257576 
[4]  {tropical fruit}     =&gt; {other vegetables} 0.03589222 0.3420543 
[5]  {whipped/sour cream} =&gt; {whole milk}       0.03223183 0.4496454 
[6]  {root vegetables}    =&gt; {whole milk}       0.04890696 0.4486940 
[7]  {yogurt}             =&gt; {other vegetables} 0.04341637 0.3112245 
[8]  {other vegetables}   =&gt; {yogurt}           0.04341637 0.2243826 
[9]  {tropical fruit}     =&gt; {whole milk}       0.04229792 0.4031008 
[10] {yogurt}             =&gt; {whole milk}       0.05602440 0.4016035 
     coverage   lift     count
[1]  0.10899847 2.246605 466  
[2]  0.19349263 2.246605 466  
[3]  0.09395018 1.771048 301  
[4]  0.10493137 1.767790 353  
[5]  0.07168277 1.759754 317  
[6]  0.10899847 1.756031 481  
[7]  0.13950178 1.608457 427  
[8]  0.19349263 1.608457 427  
[9]  0.10493137 1.577595 416  
[10] 0.13950178 1.571735 551  </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p><code>root vegetables</code> &amp; <code>other vegetables</code>are purchased 2.2 times more often together than separately (this rule has the same values of support and lift regardless of the order, depending on the order - different confidence differing twice) (rule [1], [2])</p></li>
<li><p><code>sausage</code> &amp; <code>rolls/buns</code> are purchased 1.77 times more often together than separately (rule [3]),</p></li>
<li><p><code>tropical fruit</code> &amp; <code>other vegetables</code> are purchased 1.77 times more often together than separately (rule [4]).</p></li>
</ul>
<p><strong>NOTE</strong> These rules are made up of frequent products only (exception: [3] where LHS = <code>sausage</code>)</p>
<p>Comparing the rules in the 1st approach - the decrease in value of lift is noticeable (in 1st approach it was over 4.9, now max 2.2)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                support    confidence
[1]  {whipped/sour cream} =&gt; {whole milk}       0.03223183 0.4496454 
[2]  {root vegetables}    =&gt; {whole milk}       0.04890696 0.4486940 
[3]  {root vegetables}    =&gt; {other vegetables} 0.04738180 0.4347015 
[4]  {tropical fruit}     =&gt; {whole milk}       0.04229792 0.4031008 
[5]  {yogurt}             =&gt; {whole milk}       0.05602440 0.4016035 
[6]  {pip fruit}          =&gt; {whole milk}       0.03009659 0.3978495 
[7]  {other vegetables}   =&gt; {whole milk}       0.07483477 0.3867578 
[8]  {pastry}             =&gt; {whole milk}       0.03324860 0.3737143 
[9]  {citrus fruit}       =&gt; {whole milk}       0.03050330 0.3685504 
[10] {tropical fruit}     =&gt; {other vegetables} 0.03589222 0.3420543 
     coverage   lift     count
[1]  0.07168277 1.759754 317  
[2]  0.10899847 1.756031 481  
[3]  0.10899847 2.246605 466  
[4]  0.10493137 1.577595 416  
[5]  0.13950178 1.571735 551  
[6]  0.07564820 1.557043 296  
[7]  0.19349263 1.513634 736  
[8]  0.08896797 1.462587 327  
[9]  0.08276563 1.442377 300  
[10] 0.10493137 1.767790 353  </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li><p>if <code>whipped/sour cream</code> then in 45% of transactions also <code>whole milk</code> (rule [1]),</p></li>
<li><p>if <code>root vegetables</code> then in 44.9% of transaction also <code>whole milk</code> (rule [2]),</p></li>
<li><p>if <code>root vegetables</code> then in 43.4% of transaction also <code>other vegetables</code> (rule [3]).</p></li>
</ul>
<p>Comparing the rules in the 1st approach - the decrease in value of confidence is noticeable (in 1st approach it was over 70%, now max 45%)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                   rhs                support    confidence coverage 
[1]  {other vegetables} =&gt; {whole milk}       0.07483477 0.3867578  0.1934926
[2]  {whole milk}       =&gt; {other vegetables} 0.07483477 0.2928770  0.2555160
[3]  {rolls/buns}       =&gt; {whole milk}       0.05663447 0.3079049  0.1839349
[4]  {whole milk}       =&gt; {rolls/buns}       0.05663447 0.2216474  0.2555160
[5]  {yogurt}           =&gt; {whole milk}       0.05602440 0.4016035  0.1395018
[6]  {whole milk}       =&gt; {yogurt}           0.05602440 0.2192598  0.2555160
[7]  {root vegetables}  =&gt; {whole milk}       0.04890696 0.4486940  0.1089985
[8]  {root vegetables}  =&gt; {other vegetables} 0.04738180 0.4347015  0.1089985
[9]  {other vegetables} =&gt; {root vegetables}  0.04738180 0.2448765  0.1934926
[10] {yogurt}           =&gt; {other vegetables} 0.04341637 0.3112245  0.1395018
     lift     count
[1]  1.513634 736  
[2]  1.513634 736  
[3]  1.205032 557  
[4]  1.205032 557  
[5]  1.571735 551  
[6]  1.571735 551  
[7]  1.756031 481  
[8]  2.246605 466  
[9]  2.246605 466  
[10] 1.608457 427  </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li><p>rule <code>whole milk</code> &lt;=&gt; <code>other vegetables</code> of relative support of 0.075 means that <code>whole milk</code> i <code>other vegetables</code> appear together in 7.5% of transactions (here: what is the successor and what is the antecedent is not important) (rule [1], [2]),</p></li>
<li><p>rule <code>rolls/buns</code> &lt;=&gt; <code>yogurt</code> of relative support of 0.057 means that <code>rolls/buns</code> &amp; <code>yogurt</code> appear together in 5.7% of transactions (here: what is the successor and what is the antecedent is not important) (rule [3], [4]).</p></li>
</ul>
<p>The above rules - except that there is no empty set rule - are the same as obtained in the 1st approach</p>
<p><u>Validation</u></p>
<ul>
<li>for rules [1] i [2] - support of 736 transactions with items <code>other vegetables</code> &amp; <code>whole milk</code> (chosen 3 examples)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(Groceries, items <span class="sc">%in%</span> <span class="st">"other vegetables"</span>), </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    items <span class="sc">%in%</span> <span class="st">"whole milk"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">368</span>, <span class="dv">736</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    items                     
[1] {other vegetables,        
     whole milk,              
     condensed milk,          
     long life bakery product}
[2] {liver loaf,              
     root vegetables,         
     other vegetables,        
     whole milk,              
     frozen vegetables,       
     margarine}               
[3] {frankfurter,             
     tropical fruit,          
     other vegetables,        
     whole milk,              
     frozen meals,            
     rolls/buns,              
     detergent,               
     napkins,                 
     newspapers}              </code></pre>
</div>
</div>
<ul>
<li>for rules [3] i [4] - support of 557 transactions with items <code>rolls/buns</code> &amp; <code>whole milk</code> (chosen 3 examples)</li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(Groceries, items <span class="sc">%in%</span> <span class="st">"rolls/buns"</span>), </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    items <span class="sc">%in%</span> <span class="st">"whole milk"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">278</span>, <span class="dv">557</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    items                    
[1] {tropical fruit,         
     pip fruit,              
     berries,                
     whole milk,             
     frozen potato products, 
     rolls/buns,             
     pickled vegetables,     
     chocolate}              
[2] {citrus fruit,           
     tropical fruit,         
     pip fruit,              
     root vegetables,        
     onions,                 
     other vegetables,       
     whole milk,             
     yogurt,                 
     rolls/buns,             
     brown bread,            
     soda,                   
     fruit/vegetable juice}  
[3] {frankfurter,            
     tropical fruit,         
     other vegetables,       
     whole milk,             
     frozen meals,           
     rolls/buns,             
     detergent,              
     napkins,                
     newspapers}             </code></pre>
</div>
</div>
<p><strong>CONCLUSIONS</strong></p>
<p>Increasing the value of the minimum relative support<span class="math inline">\(minrSup = 0.03\)</span> caused shortening of the rules - to 2 items: one antecedent and one consequence. However, it did not fundamentally change the list of rules according to the absolute support. The rules filtered by the values fo list and confidence contain the most frequent items. The change in relation to the statements obtained in the 1st approach resulting from the required greater support of an antecedent (for <span class="math inline">\(conf = P(XY) / P(X)\)</span> and for <span class="math inline">\(lift = P(XY)/ [P(X) * P(Y)]\)</span>).</p>
</section>
<section id="model-apriori-for-products-group---2nd-approach" class="level2 page-columns page-full" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="model-apriori-for-products-group---2nd-approach"><span class="header-section-number">3.4</span> Model apriori for products group - 2nd approach</h2>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.03\)</span> means that products group must have absolute support over 295 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.2\)</span> means that if LHS contains selected products group that 20% of RHS will follow the rule</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc_lvl2_new)), <span class="at">xlab =</span> <span class="st">"lengthof rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-100-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products group)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>193 association rules were found for the requested search parameters</p></li>
<li><p>44.5% rules - 86 z 193 - have a length (LHS+RHS) of 2 (2 elements)</p></li>
<li><p>43% rules - 83 z 193 - have a length (LHS+RHS) of 3 (3 elements)</p></li>
<li><p>other rules have a length (LHS+RHS) of 4 (4 elements)</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs             support confidence   coverage     lift count
[1]  {dairy produce,                                                                          
      sausage}                 =&gt; {cheese}     0.03111337  0.2897727 0.10737163 2.287251   306
[2]  {bread and backed goods,                                                                 
      dairy produce,                                                                          
      vegetables}              =&gt; {sausage}    0.03284189  0.4007444 0.08195221 2.118990   323
[3]  {bread and backed goods,                                                                 
      dairy produce,                                                                          
      fruit}                   =&gt; {sausage}    0.03060498  0.3960526 0.07727504 2.094182   301
[4]  {dairy produce,                                                                          
      non-alc. drinks,                                                                        
      vegetables}              =&gt; {fruit}      0.03304525  0.5126183 0.06446365 2.057796   325
[5]  {beef}                    =&gt; {vegetables} 0.04585663  0.5595533 0.08195221 2.049612   451
[6]  {dairy produce,                                                                          
      fruit}                   =&gt; {cheese}     0.03965430  0.2535761 0.15638027 2.001541   390
[7]  {bread and backed goods,                                                                 
      dairy produce,                                                                          
      vegetables}              =&gt; {fruit}      0.04077275  0.4975186 0.08195221 1.997182   401
[8]  {bread and backed goods,                                                                 
      vegetables}              =&gt; {sausage}    0.04382308  0.3770779 0.11621759 1.993850   431
[9]  {dairy produce,                                                                          
      vinegar/oils}            =&gt; {vegetables} 0.03141840  0.5355286 0.05866802 1.961610   309
[10] {bread and backed goods,                                                                 
      dairy produce,                                                                          
      non-alc. drinks}         =&gt; {fruit}      0.03528216  0.4880450 0.07229283 1.959152   347</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p>products groups <code>dairy produce</code> &amp; <code>sausage</code> with <code>cheese</code> are purchased 2.3 times more often together than separately (applies to LHS and RHS) (rule [1]),</p></li>
<li><p>products groups <code>bread and backed goods</code>, <code>dairy produce</code>, <code>vegetables</code> &amp; <code>sausage</code> are purchased 2.1 times more often together than separately (rule [2]),</p></li>
<li><p>products groups <code>bread and backed goods</code>, <code>dairy produce</code> &amp; <code>fruit</code> together with<code>sausage</code> are purchased 2.1 times more often together than separately (rule [3]).</p></li>
</ul>
<p>Values for lift are on average lower than in the 1st approach (max 9.1 vs max 2.3). However, the differences in value are not as significant as in the case of items.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                support confidence   coverage     lift count
[1]  {bread and backed goods,                                                                    
      fruit,                                                                                     
      sausage}                 =&gt; {dairy produce} 0.03060498  0.7984085 0.03833249 1.802237   301
[2]  {bread and backed goods,                                                                    
      fruit,                                                                                     
      vegetables}              =&gt; {dairy produce} 0.04077275  0.7956349 0.05124555 1.795976   401
[3]  {cheese,                                                                                    
      fruit}                   =&gt; {dairy produce} 0.03965430  0.7707510 0.05144891 1.739806   390
[4]  {cheese,                                                                                    
      vegetables}              =&gt; {dairy produce} 0.04219624  0.7628676 0.05531266 1.722011   415
[5]  {fruit,                                                                                     
      non-alc. drinks,                                                                           
      vegetables}              =&gt; {dairy produce} 0.03304525  0.7575758 0.04361973 1.710066   325
[6]  {bread and backed goods,                                                                    
      sausage,                                                                                   
      vegetables}              =&gt; {dairy produce} 0.03284189  0.7494200 0.04382308 1.691656   323
[7]  {vegetables,                                                                                
      vinegar/oils}            =&gt; {dairy produce} 0.03141840  0.7481840 0.04199288 1.688866   309
[8]  {bread and backed goods,                                                                    
      fruit,                                                                                     
      non-alc. drinks}         =&gt; {dairy produce} 0.03528216  0.7430407 0.04748348 1.677256   347
[9]  {frozen foods,                                                                              
      fruit}                   =&gt; {dairy produce} 0.03070666  0.7401961 0.04148449 1.670835   302
[10] {fruit,                                                                                     
      vegetables}              =&gt; {dairy produce} 0.07869853  0.7350427 0.10706660 1.659203   774</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li><p>if products groups <code>bread and backed goods</code>, <code>fruit</code> &amp; <code>sausage</code> then in 80% of transaction also <code>dairy produce</code> (rule [1]),</p></li>
<li><p>if products groups <code>bread and backed goods</code>, <code>fruits</code> &amp; <code>vegetables</code> then in 80% of transaction also <code>dairy produce</code> (rule [2])</p></li>
<li><p>if products groups <code>cheese</code> &amp; <code>fruit</code> then in 77% of transaction also <code>dairy produce</code> (reguły [3]).</p></li>
</ul>
<p><strong>NOTE</strong> These rules are made of frequent items. Compared to the rules of the 1st approach. a consequence is the same (<code>dairy produce</code>) while some of the antecedents have changed (higher support required). These rules also have lower confidence (it was over 95%, now is lower than 80%)</p>
<p><strong>NOTE</strong> While <code>dairy produce</code> occurs in 44% of transactions - it builds high-confidence rules when in a consequence.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                         rhs                      support   confidence
[1]  {bread and backed goods} =&gt; {dairy produce}          0.1876970 0.5432607 
[2]  {dairy produce}          =&gt; {bread and backed goods} 0.1876970 0.4236860 
[3]  {vegetables}             =&gt; {dairy produce}          0.1704118 0.6242086 
[4]  {dairy produce}          =&gt; {vegetables}             0.1704118 0.3846683 
[5]  {fruit}                  =&gt; {dairy produce}          0.1563803 0.6277551 
[6]  {dairy produce}          =&gt; {fruit}                  0.1563803 0.3529952 
[7]  {non-alc. drinks}        =&gt; {dairy produce}          0.1519065 0.4777742 
[8]  {dairy produce}          =&gt; {non-alc. drinks}        0.1519065 0.3428965 
[9]  {non-alc. drinks}        =&gt; {bread and backed goods} 0.1242501 0.3907899 
[10] {bread and backed goods} =&gt; {non-alc. drinks}        0.1242501 0.3596233 
     coverage  lift     count
[1]  0.3455008 1.226295 1846 
[2]  0.4430097 1.226295 1846 
[3]  0.2730046 1.409018 1676 
[4]  0.4430097 1.409018 1676 
[5]  0.2491103 1.417024 1538 
[6]  0.4430097 1.417024 1538 
[7]  0.3179461 1.078474 1494 
[8]  0.4430097 1.078474 1494 
[9]  0.3179461 1.131083 1222 
[10] 0.3455008 1.131083 1222 </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li>the rule of relative support of 0.18 means that in 18% of transactions there is <code>dairy produce</code> &amp; <code>bread and backed goods</code> (here: what is the successor and what is the antecedent is not important) (rule [1], [2]).</li>
</ul>
<p>The above rules - except that there is no empty set rule - are the same as obtained in the 1st approach.</p>
</section>
<section id="model-apriori-for-items---3rd-approach" class="level2 page-columns page-full" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="model-apriori-for-items---3rd-approach"><span class="header-section-number">3.5</span> Model apriori for items - 3rd approach</h2>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.003\)</span> means that item must have absolute support over 29 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.5\)</span> means that if LHS contains selected item that 50% of RHS will follow the rule</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span> <span class="fu">table</span>(<span class="fu">size</span>(rules_groc_new_3)))</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>421 association rules were found for the requested search parameters</p></li>
<li><p>66.7% rules - 281 z 421 - have a length (LHS+RHS) of 3 (3 elements)</p></li>
<li><p>30% rules - 128 z 421 - have a length (LHS+RHS) of 4 (4 elements)</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new_3, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                    support confidence    coverage     lift count
[1]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      other vegetables,                                                                          
      whole milk}         =&gt; {root vegetables}  0.003152008  0.6326531 0.004982206 5.804238    31
[2]  {citrus fruit,                                                                              
      root vegetables,                                                                           
      other vegetables,                                                                          
      whole milk}         =&gt; {tropical fruit}   0.003152008  0.5438596 0.005795628 5.183004    31
[3]  {herbs,                                                                                     
      whole milk}         =&gt; {root vegetables}  0.004168785  0.5394737 0.007727504 4.949369    41
[4]  {herbs,                                                                                     
      other vegetables}   =&gt; {root vegetables}  0.003863752  0.5000000 0.007727504 4.587220    38
[5]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables,                                                                           
      whole milk}         =&gt; {other vegetables} 0.003152008  0.8857143 0.003558719 4.577509    31
[6]  {tropical fruit,                                                                            
      whole milk,                                                                                
      curd}               =&gt; {yogurt}           0.003965430  0.6093750 0.006507372 4.368224    39
[7]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables}    =&gt; {other vegetables} 0.004473818  0.7857143 0.005693950 4.060694    44
[8]  {tropical fruit,                                                                            
      other vegetables,                                                                          
      butter}             =&gt; {yogurt}           0.003050330  0.5555556 0.005490595 3.982426    30
[9]  {tropical fruit,                                                                            
      whole milk,                                                                                
      whipped/sour cream} =&gt; {yogurt}           0.004372140  0.5512821 0.007930859 3.951792    43
[10] {tropical fruit,                                                                            
      whole milk,                                                                                
      butter}             =&gt; {yogurt}           0.003355363  0.5409836 0.006202339 3.877969    33</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p><code>citrus fruit</code>, <code>tropical fruit</code>, <code>other vegetables</code>, <code>whole milk</code> &amp; <code>root vegetables</code> are purchased 5.8 times more often together than separately (rule [1]),</p></li>
<li><p><code>citrus fruit</code>, <code>root vegetables</code>, <code>other vegetables</code>, <code>whole milk</code> &amp; <code>tropical fruit</code> are purchased 5.2 times more often together than separately (rule [2),</p></li>
<li><p><code>herbs</code>, <code>whole milk</code> &amp; <code>root vegetables</code> are purchased 4.9 times more often together than separately (rule [3]).</p></li>
</ul>
<p><strong>NOTE</strong> These rules are built mainly of frequent items, but there are also items with significant ones lower support (but with frequent product groups)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new_3, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                    support confidence    coverage     lift count
[1]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables,                                                                           
      whole milk}         =&gt; {other vegetables} 0.003152008  0.8857143 0.003558719 4.577509    31
[2]  {root vegetables,                                                                           
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003050330  0.7894737 0.003863752 3.089723    30
[3]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables}    =&gt; {other vegetables} 0.004473818  0.7857143 0.005693950 4.060694    44
[4]  {root vegetables,                                                                           
      other vegetables,                                                                          
      brown bread}        =&gt; {whole milk}       0.003152008  0.7750000 0.004067107 3.033078    31
[5]  {onions,                                                                                    
      butter}             =&gt; {whole milk}       0.003050330  0.7500000 0.004067107 2.935237    30
[6]  {tropical fruit,                                                                            
      curd,                                                                                      
      yogurt}             =&gt; {whole milk}       0.003965430  0.7500000 0.005287239 2.935237    39
[7]  {curd,                                                                                      
      domestic eggs}      =&gt; {whole milk}       0.004778851  0.7343750 0.006507372 2.874086    47
[8]  {tropical fruit,                                                                            
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003355363  0.7333333 0.004575496 2.870009    33
[9]  {tropical fruit,                                                                            
      root vegetables,                                                                           
      whipped/sour cream} =&gt; {other vegetables} 0.003355363  0.7333333 0.004575496 3.789981    33
[10] {butter,                                                                                    
      curd}               =&gt; {whole milk}       0.004880529  0.7164179 0.006812405 2.803808    48</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li><p>if <code>citrus fruit</code>, <code>tropical fruit</code>, <code>root vegetables</code> &amp; <code>whole milk</code> then in 88% of transaction also <code>other vegetables</code> (rule [1]),</p></li>
<li><p>if <code>root vegetables</code>, <code>butter</code> &amp; <code>yogurt</code> then in 79% of transaction also <code>whole milk</code> (rule [2]),</p></li>
<li><p>if <code>citrus fruit</code>, <code>tropical fruit</code> &amp; <code>root vegetables</code> then in 79% of transaction also <code>whole milk</code> (rule [3]).</p></li>
</ul>
<p>Comparison of rules in the 1st approach - the same rules were obtained.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new_3, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                       rhs                support   
[1]  {other vegetables, yogurt}             =&gt; {whole milk}       0.02226741
[2]  {tropical fruit, yogurt}               =&gt; {whole milk}       0.01514997
[3]  {other vegetables, whipped/sour cream} =&gt; {whole milk}       0.01464159
[4]  {root vegetables, yogurt}              =&gt; {whole milk}       0.01453991
[5]  {pip fruit, other vegetables}          =&gt; {whole milk}       0.01352313
[6]  {root vegetables, yogurt}              =&gt; {other vegetables} 0.01291307
[7]  {root vegetables, rolls/buns}          =&gt; {whole milk}       0.01270971
[8]  {other vegetables, domestic eggs}      =&gt; {whole milk}       0.01230300
[9]  {tropical fruit, root vegetables}      =&gt; {other vegetables} 0.01230300
[10] {root vegetables, rolls/buns}          =&gt; {other vegetables} 0.01220132
     confidence coverage   lift     count
[1]  0.5128806  0.04341637 2.007235 219  
[2]  0.5173611  0.02928317 2.024770 149  
[3]  0.5070423  0.02887646 1.984385 144  
[4]  0.5629921  0.02582613 2.203354 143  
[5]  0.5175097  0.02613116 2.025351 133  
[6]  0.5000000  0.02582613 2.584078 127  
[7]  0.5230126  0.02430097 2.046888 125  
[8]  0.5525114  0.02226741 2.162336 121  
[9]  0.5845411  0.02104728 3.020999 121  
[10] 0.5020921  0.02430097 2.594890 120  </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li><p>rule <code>other vegetables</code> &amp; <code>yogurt</code> =&gt; <code>whole milk</code> has relative support equals 0,022, which means that these items come together in 2,2% of transactions (rule [1]),</p></li>
<li><p>rule <code>tropical fruit</code> &amp; <code>yogurt</code> =&gt; <code>whole milk</code> has relative support equals 0,015, which means that these items come together in 1,5% of transactions (rule [2]).</p></li>
</ul>
<p><strong>FUN FACT</strong> The above rules have confidnece over 50%, that is, they are true for half of the purchases containing LHS!</p>
<p><strong>NOTE</strong> The rules above are completely different from those obtained in the 1st attempt and the 2nd approach.</p>
</section>
<section id="model-apriori-for-products-group---3rd-approach" class="level2 page-columns page-full" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="model-apriori-for-products-group---3rd-approach"><span class="header-section-number">3.6</span> Model apriori for products group - 3rd approach</h2>
<p><u>Assumptions:</u></p>
<ul>
<li>assumed <span class="math inline">\(minSup = 0.003\)</span> means that products group must have absolute support over 29 transactions</li>
<li>assumed <span class="math inline">\(minConf = 0.5\)</span> means that if LHS contains selected products group that 50% of RHS will follow the rule</li>
</ul>
<div class="cell page-columns page-full" data-layout-align="center" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_barplot</span>(<span class="at">tab_src =</span><span class="fu">table</span>(<span class="fu">size</span>(rules_groc_lvl2_new_3)), <span class="at">xlab =</span> <span class="st">"length of rule"</span>)</span></code></pre></div>
<div class="cell-output-display page-columns page-full">
<div class="quarto-figure quarto-figure-center page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption margin-caption">Length of the associate rules = LHS+RHS (products group)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><u>Summary:</u></p>
<ul>
<li><p>4417 association rules were found for the requested search parameters</p></li>
<li><p>44.5% rules - 2007 z 4417 - have a length (LHS+RHS) of 4 (4 elements)</p></li>
<li><p>1225 (27,7%) &amp; 884 (20%) have - appropriate - length of 3 i 5</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new_3, <span class="at">by =</span> <span class="st">"lift"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs           support confidence    coverage     lift count
[1]  {dairy produce,                                                                         
      fruit,                                                                                 
      sausage,                                                                               
      vegetables,                                                                            
      vinegar/oils}            =&gt; {cheese}  0.003152008  0.5438596 0.005795628 4.292825    31
[2]  {fruit,                                                                                 
      sausage,                                                                               
      vegetables,                                                                            
      vinegar/oils}            =&gt; {cheese}  0.003457041  0.5151515 0.006710727 4.066224    34
[3]  {bread and backed goods,                                                                
      eggs,                                                                                  
      fruit,                                                                                 
      sausage}                 =&gt; {cheese}  0.003253686  0.5079365 0.006405694 4.009274    32
[4]  {dairy produce,                                                                         
      frozen foods,                                                                          
      fruit,                                                                                 
      non-alc. drinks,                                                                       
      sausage}                 =&gt; {cheese}  0.003558719  0.5000000 0.007117438 3.946629    35
[5]  {bread and backed goods,                                                                
      cheese,                                                                                
      chocolate,                                                                             
      fruit}                   =&gt; {sausage} 0.003863752  0.6333333 0.006100661 3.348835    38
[6]  {bread and backed goods,                                                                
      cheese,                                                                                
      frozen foods,                                                                          
      fruit}                   =&gt; {sausage} 0.004677173  0.6301370 0.007422471 3.331934    46
[7]  {bread and backed goods,                                                                
      cheese,                                                                                
      chocolate,                                                                             
      dairy produce,                                                                         
      non-alc. drinks}         =&gt; {sausage} 0.003253686  0.6274510 0.005185562 3.317731    32
[8]  {bread and backed goods,                                                                
      cheese,                                                                                
      dairy produce,                                                                         
      poultry}                 =&gt; {sausage} 0.003050330  0.6250000 0.004880529 3.304772    30
[9]  {bread and backed goods,                                                                
      chocolate,                                                                             
      frozen foods,                                                                          
      non-alc. drinks}         =&gt; {sausage} 0.003050330  0.6250000 0.004880529 3.304772    30
[10] {bread and backed goods,                                                                
      cheese,                                                                                
      chocolate,                                                                             
      dairy produce,                                                                         
      fruit}                   =&gt; {sausage} 0.003152008  0.6200000 0.005083884 3.278333    31</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the value <em>lift = x</em> for given rule, it means that items from LHS and RHS occur with each other <em>x</em> times more often compared to transactions, where these items occur independently.</p>
</div>
</div>
<ul>
<li><p>products groups <code>dairy produce</code>, <code>fruit</code>, <code>sausage</code>, <code>vegetables</code>, <code>vinegar/oils</code> and <code>cheese</code> are purchased 4.3 times more often together than separately (applies to LHS and RHS) (rule [1]),</p></li>
<li><p>products groups <code>fruit</code>, <code>sausage</code>, <code>vegetables</code>, <code>vinegar/oils</code> and with <code>cheese</code> are purchased 4 times more often together than separately (rule [2]),</p></li>
<li><p>products groups <code>bread and backed goods</code>, <code>eggs</code>, <code>fruit</code> and <code>sausage</code> together with <code>cheese</code> are purchased 4 times more often together than separately (rule [3]).</p></li>
</ul>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new_3, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                 support confidence    coverage     lift count
[1]  {chocolate,                                                                                   
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003558719  1.0000000 0.003558719 2.257287    35
[2]  {eggs,                                                                                        
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[3]  {cheese,                                                                                      
      eggs,                                                                                        
      perfumery}               =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[4]  {eggs,                                                                                        
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003457041  0.9714286 0.003558719 2.192793    34
[5]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      staple foods}            =&gt; {dairy produce} 0.003152008  0.9687500 0.003253686 2.186747    31
[6]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[7]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[8]  {bread and backed goods,                                                                      
      fruit,                                                                                       
      pork,                                                                                        
      sausage}                 =&gt; {dairy produce} 0.004880529  0.9600000 0.005083884 2.166996    48
[9]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.004270463  0.9545455 0.004473818 2.154683    42
[10] {bread and backed goods,                                                                      
      eggs,                                                                                        
      fruit,                                                                                       
      vinegar/oils}            =&gt; {dairy produce} 0.003863752  0.9500000 0.004067107 2.144423    38</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>confidence = x</em> for the rule, which means that every time when items form LHS was in transaction, <em>x</em> times of them contains also items form RHS.</p>
<p><span class="math inline">\(conf(X-&gt;Y)\)</span> may be interpreted as conditional probability <span class="math inline">\(P(Y|X)\)</span></p>
</div>
</div>
<ul>
<li><p>if products groups <code>chocolate</code>, <code>fruit</code> &amp; <code>staple foods</code> then in 100% of transaction also <code>dairy produce</code> (rule [1]),</p></li>
<li><p>if products groups <code>eggs</code>, <code>fruit</code> &amp; <code>staple foods</code> then in 97% of transaction also <code>dairy produce</code> (rule [2]),</p></li>
<li><p>if products groups <code>cheese</code>, <code>eggs</code> &amp; <code>perfumery</code> then in 97% of transaction also <code>dairy produce</code> (rule [3]).</p></li>
</ul>
<p><strong>NOTE</strong> These rules were not necessarily made of frequent items - comparing to 1st approach and 2nd approach. but an consequence is the same (<code>dairy produce</code>). These rules have very high confidence - over 95%.</p>
<p><strong>NOTE</strong> Because products group <code>dairy produce</code> occurs in 44% of transactions - it builds high-confidence rules when in a consequence.</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new_3, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                     rhs                     
[1]  {bread and backed goods}             =&gt; {dairy produce}         
[2]  {vegetables}                         =&gt; {dairy produce}         
[3]  {fruit}                              =&gt; {dairy produce}         
[4]  {sausage}                            =&gt; {dairy produce}         
[5]  {sausage}                            =&gt; {bread and backed goods}
[6]  {cheese}                             =&gt; {dairy produce}         
[7]  {bread and backed goods, vegetables} =&gt; {dairy produce}         
[8]  {fruit, vegetables}                  =&gt; {dairy produce}         
[9]  {dairy produce, fruit}               =&gt; {vegetables}            
[10] {bread and backed goods, fruit}      =&gt; {dairy produce}         
     support    confidence coverage  lift     count
[1]  0.18769700 0.5432607  0.3455008 1.226295 1846 
[2]  0.17041179 0.6242086  0.2730046 1.409018 1676 
[3]  0.15638027 0.6277551  0.2491103 1.417024 1538 
[4]  0.10737163 0.5677419  0.1891205 1.281557 1056 
[5]  0.10360956 0.5478495  0.1891205 1.585668 1019 
[6]  0.08459583 0.6677368  0.1266904 1.507274  832 
[7]  0.08195221 0.7051619  0.1162176 1.591753  806 
[8]  0.07869853 0.7350427  0.1070666 1.659203  774 
[9]  0.07869853 0.5032510  0.1563803 1.843379  774 
[10] 0.07727504 0.7183365  0.1075750 1.621492  760 </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Reminder
</div>
</div>
<div class="callout-body-container callout-body">
<p>It the value of <em>relative support = x</em> for the rule, which means that <em>x</em> transactions contain products listed in the LHS and RHS.</p>
</div>
</div>
<ul>
<li><p>the rule of relative support of 0.18 means that in 18% of transactions there are items for products group <code>dairy produce</code> (rule [1]),</p></li>
<li><p>the rule of relative support of 0.17 means that in 17% of transactions there are items for products group <code>vegetables</code> i <code>dairy produce</code> (rule [2]).</p></li>
</ul>
<p>The above rules have mainly products group <code>dairy produce</code> as consequence. In an antecedent they have mainly frequent item. The first 5 rules have high relative support (over 10%) and relatively high value of the confidence (0.55-0.63).</p>
</section>
</section>
<section id="summary" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> SUMMARY</h1>
<section id="summary-dataset" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="summary-dataset"><span class="header-section-number">4.1</span> Summary dataset</h2>
<p>the most frequent item:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>tab_freq[list_pop_products]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      whole milk other vegetables       rolls/buns             soda 
       0.2555160        0.1934926        0.1839349        0.1743772 
          yogurt    bottled water  root vegetables   tropical fruit 
       0.1395018        0.1105236        0.1089985        0.1049314 </code></pre>
</div>
</div>
<p>the most frequent products group…</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>tab_freq_lvl2[list_pop_gr_products]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         dairy produce bread and backed goods        non-alc. drinks 
             0.4430097              0.3455008              0.3179461 
            vegetables                  fruit                sausage 
             0.2730046              0.2491103              0.1891205 
                  beer                 cheese           frozen foods 
             0.1555669              0.1266904              0.1169293 
             chocolate 
             0.1087951 </code></pre>
</div>
</div>
<p>…with items:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>list_lvl2<span class="sc">$</span><span class="st">`</span><span class="at">dairy produce</span><span class="st">`</span>; list_lvl2<span class="sc">$</span><span class="st">`</span><span class="at">bread and backed goods</span><span class="st">`</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "whole milk"         "butter"             "curd"              
[4] "dessert"            "butter milk"        "yogurt"            
[7] "whipped/sour cream" "beverages"         </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "rolls/buns"          "white bread"         "brown bread"        
[4] "pastry"              "roll products "      "semi-finished bread"
[7] "zwieback"           </code></pre>
</div>
</div>
</section>
<section id="summary-regarding-the-conducted-experiments" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="summary-regarding-the-conducted-experiments"><span class="header-section-number">4.2</span> Summary regarding the conducted experiments</h2>
<p>Three experiments were carried out - independently for items and products groups. For further analysis and final conclusions, a set of rules was selected that<u>was created in the 3rd approach</u>, due to the high trust value.</p>
<p>Rules with high value of the confidence for items</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new_3, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                     rhs                    support confidence    coverage     lift count
[1]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables,                                                                           
      whole milk}         =&gt; {other vegetables} 0.003152008  0.8857143 0.003558719 4.577509    31
[2]  {root vegetables,                                                                           
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003050330  0.7894737 0.003863752 3.089723    30
[3]  {citrus fruit,                                                                              
      tropical fruit,                                                                            
      root vegetables}    =&gt; {other vegetables} 0.004473818  0.7857143 0.005693950 4.060694    44
[4]  {root vegetables,                                                                           
      other vegetables,                                                                          
      brown bread}        =&gt; {whole milk}       0.003152008  0.7750000 0.004067107 3.033078    31
[5]  {onions,                                                                                    
      butter}             =&gt; {whole milk}       0.003050330  0.7500000 0.004067107 2.935237    30
[6]  {tropical fruit,                                                                            
      curd,                                                                                      
      yogurt}             =&gt; {whole milk}       0.003965430  0.7500000 0.005287239 2.935237    39
[7]  {curd,                                                                                      
      domestic eggs}      =&gt; {whole milk}       0.004778851  0.7343750 0.006507372 2.874086    47
[8]  {tropical fruit,                                                                            
      butter,                                                                                    
      yogurt}             =&gt; {whole milk}       0.003355363  0.7333333 0.004575496 2.870009    33
[9]  {tropical fruit,                                                                            
      root vegetables,                                                                           
      whipped/sour cream} =&gt; {other vegetables} 0.003355363  0.7333333 0.004575496 3.789981    33
[10] {butter,                                                                                    
      curd}               =&gt; {whole milk}       0.004880529  0.7164179 0.006812405 2.803808    48</code></pre>
</div>
</div>
<p>and their support:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_new_3, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                       rhs                support   
[1]  {other vegetables, yogurt}             =&gt; {whole milk}       0.02226741
[2]  {tropical fruit, yogurt}               =&gt; {whole milk}       0.01514997
[3]  {other vegetables, whipped/sour cream} =&gt; {whole milk}       0.01464159
[4]  {root vegetables, yogurt}              =&gt; {whole milk}       0.01453991
[5]  {pip fruit, other vegetables}          =&gt; {whole milk}       0.01352313
[6]  {root vegetables, yogurt}              =&gt; {other vegetables} 0.01291307
[7]  {root vegetables, rolls/buns}          =&gt; {whole milk}       0.01270971
[8]  {other vegetables, domestic eggs}      =&gt; {whole milk}       0.01230300
[9]  {tropical fruit, root vegetables}      =&gt; {other vegetables} 0.01230300
[10] {root vegetables, rolls/buns}          =&gt; {other vegetables} 0.01220132
     confidence coverage   lift     count
[1]  0.5128806  0.04341637 2.007235 219  
[2]  0.5173611  0.02928317 2.024770 149  
[3]  0.5070423  0.02887646 1.984385 144  
[4]  0.5629921  0.02582613 2.203354 143  
[5]  0.5175097  0.02613116 2.025351 133  
[6]  0.5000000  0.02582613 2.584078 127  
[7]  0.5230126  0.02430097 2.046888 125  
[8]  0.5525114  0.02226741 2.162336 121  
[9]  0.5845411  0.02104728 3.020999 121  
[10] 0.5020921  0.02430097 2.594890 120  </code></pre>
</div>
</div>
<p>Pierwsza zależność (reguły sortowane wg wsparcia), rzucająca się w oczy to, że <span class="text-warning"> if <code>vegetables</code> &amp; <code>fruit</code> then also <code>whole milk</code> </span>- są to reguły z zaufaniem &gt; 78,5%; w regułach o niższym zaufaniu pojawiają się też produkty z innych grup produktów, tj. <code>bread and backed good</code> and other rare.</p>
<p>Among the rules sorted by the value of support, the dependence is <span class="text-warning"> if <code>vegetables</code> or <code>fruit</code> and items form products group <code>dairy produce</code> (<code>yogurt</code> or <code>whipped/sour cream</code>) then <code>whole milk</code> or <code>other vegetables</code> </span> . These rules have relative support over 0,012 (absolute support over 118) and confidence over 50% (<u> 1 out of 2 transactions will definitely look like this </u>).</p>
<p>Basically, the first 30 rules on this list are based on the products groups <code>vegetables</code>, <code>fruit</code> &amp; <code>dairy produce</code>! This is not surprising given the very high support of <code>whole milk</code> (25.6% of transactions contain this item) and <code>other vegetables</code> (19% of transactions). Next frequent products are <code>yogurt</code>, <code>root vegetables</code> &amp; <code>citrus fruit</code>’ (accordingly 14%, 10,9% and 10,5% of transactions) - hence their presence in high-confidence rules not surprising.</p>
<p>Rules with high value of the confidence for products groups</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new_3, <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                 support confidence    coverage     lift count
[1]  {chocolate,                                                                                   
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003558719  1.0000000 0.003558719 2.257287    35
[2]  {eggs,                                                                                        
      fruit,                                                                                       
      staple foods}            =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[3]  {cheese,                                                                                      
      eggs,                                                                                        
      perfumery}               =&gt; {dairy produce} 0.003660397  0.9729730 0.003762074 2.196279    36
[4]  {eggs,                                                                                        
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003457041  0.9714286 0.003558719 2.192793    34
[5]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      staple foods}            =&gt; {dairy produce} 0.003152008  0.9687500 0.003253686 2.186747    31
[6]  {frozen foods,                                                                                
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      vinegar/oils}            =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[7]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      fruit,                                                                                       
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[8]  {bread and backed goods,                                                                      
      fruit,                                                                                       
      pork,                                                                                        
      sausage}                 =&gt; {dairy produce} 0.004880529  0.9600000 0.005083884 2.166996    48
[9]  {bread and backed goods,                                                                      
      cheese,                                                                                      
      non-alc. drinks,                                                                             
      perfumery}               =&gt; {dairy produce} 0.004270463  0.9545455 0.004473818 2.154683    42
[10] {bread and backed goods,                                                                      
      eggs,                                                                                        
      fruit,                                                                                       
      vinegar/oils}            =&gt; {dairy produce} 0.003863752  0.9500000 0.004067107 2.144423    38</code></pre>
</div>
</div>
<p>and their support:</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">sort</span>(rules_groc_lvl2_new_3, <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                     rhs                     
[1]  {bread and backed goods}             =&gt; {dairy produce}         
[2]  {vegetables}                         =&gt; {dairy produce}         
[3]  {fruit}                              =&gt; {dairy produce}         
[4]  {sausage}                            =&gt; {dairy produce}         
[5]  {sausage}                            =&gt; {bread and backed goods}
[6]  {cheese}                             =&gt; {dairy produce}         
[7]  {bread and backed goods, vegetables} =&gt; {dairy produce}         
[8]  {fruit, vegetables}                  =&gt; {dairy produce}         
[9]  {dairy produce, fruit}               =&gt; {vegetables}            
[10] {bread and backed goods, fruit}      =&gt; {dairy produce}         
     support    confidence coverage  lift     count
[1]  0.18769700 0.5432607  0.3455008 1.226295 1846 
[2]  0.17041179 0.6242086  0.2730046 1.409018 1676 
[3]  0.15638027 0.6277551  0.2491103 1.417024 1538 
[4]  0.10737163 0.5677419  0.1891205 1.281557 1056 
[5]  0.10360956 0.5478495  0.1891205 1.585668 1019 
[6]  0.08459583 0.6677368  0.1266904 1.507274  832 
[7]  0.08195221 0.7051619  0.1162176 1.591753  806 
[8]  0.07869853 0.7350427  0.1070666 1.659203  774 
[9]  0.07869853 0.5032510  0.1563803 1.843379  774 
[10] 0.07727504 0.7183365  0.1075750 1.621492  760 </code></pre>
</div>
</div>
<p>The rule with 100% confidence looks interesting: <span class="text-warning">if products groups <code>chocolate</code>, <code>fruit</code> &amp; <code>staple foods</code> then <code>dairy produce</code> </span>. Other rules with value of confidence bordering on 100% (&gt;97%) are also interesting. However their relative support is negligibly small ~0.003-0.004 (absolute support 30-38). These rules are built of rare (non-frequent) products, but very strong support makes them look at them closely - particular in the context of possible arranging of individual departments in relation to each other.</p>
<p>The rules sorted by support provide us with two important pieces of information. The first general rule: that a item from the frequent products group in the antecedent is more than 55% certain to be bought with another item from the frequent group. And the second observation - that it will most likely be a product from th products group <code>dairy produce</code>. For first 5 rules of this set value of support is between 10-18%, that means 10-18% of transaction contain items from this product group (which coincides with the definition of a frequent element from the experiment for frequent items).</p>
<hr>
<p><strong>FUN FACTS</strong></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"dairy produce"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                             rhs                          support confidence    coverage     lift count
[1]  {dairy produce,                                                                                           
      frozen foods,                                                                                            
      fruit,                                                                                                   
      poultry}                    =&gt; {vegetables}             0.004168785  0.8367347 0.004982206 3.064911    41
[2]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      sausage,                                                                                                 
      vegetables}                 =&gt; {bread and backed goods} 0.003558719  0.8333333 0.004270463 2.411958    35
[3]  {cheese,                                                                                                  
      dairy produce,                                                                                           
      fruit,                                                                                                   
      staple foods}               =&gt; {vegetables}             0.003863752  0.8260870 0.004677173 3.025909    38
[4]  {dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      poultry,                                                                                                 
      sausage}                    =&gt; {bread and backed goods} 0.004067107  0.8163265 0.004982206 2.362734    40
[5]  {dairy produce,                                                                                           
      poultry,                                                                                                 
      staple foods}               =&gt; {vegetables}             0.003965430  0.8125000 0.004880529 2.976141    39
[6]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      fruit,                                                                                                   
      non-alc. drinks,                                                                                         
      sausage}                    =&gt; {bread and backed goods} 0.004372140  0.8113208 0.005388917 2.348246    43
[7]  {beef,                                                                                                    
      dairy produce,                                                                                           
      fruit,                                                                                                   
      pork}                       =&gt; {vegetables}             0.003457041  0.8095238 0.004270463 2.965239    34
[8]  {dairy produce,                                                                                           
      fruit,                                                                                                   
      non-alc. drinks,                                                                                         
      sausage,                                                                                                 
      vinegar/oils}               =&gt; {bread and backed goods} 0.003863752  0.8085106 0.004778851 2.340112    38
[9]  {chocolate,                                                                                               
      dairy produce,                                                                                           
      long-life bakery products,                                                                               
      sausage}                    =&gt; {bread and backed goods} 0.004270463  0.8076923 0.005287239 2.337744    42
[10] {chocolate,                                                                                               
      dairy produce,                                                                                           
      non-alc. drinks,                                                                                         
      sausage}                    =&gt; {bread and backed goods} 0.007015760  0.8023256 0.008744281 2.322211    69</code></pre>
</div>
</div>
<p>if in LHS products group <code>dairy produce</code> then in RHS with confidence 80% also products group <code>vegetables</code> or <code>bread and backed goods</code></p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"bread and backed goods"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">64</span>, <span class="dv">128</span>, <span class="dv">194</span>, <span class="dv">258</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                          rhs                 support confidence    coverage     lift count
[1] {bread and backed goods,                                                                      
     cheese,                                                                                      
     fruit,                                                                                       
     non-alc. drinks,                                                                             
     perfumery}               =&gt; {dairy produce} 0.003050330  0.9677419 0.003152008 2.184471    30
[2] {bread and backed goods,                                                                      
     cheese,                                                                                      
     fruit,                                                                                       
     non-alc. drinks,                                                                             
     vegetables}              =&gt; {dairy produce} 0.007320793  0.8888889 0.008235892 2.006477    72
[3] {bread and backed goods,                                                                      
     fruit,                                                                                       
     sweetener,                                                                                   
     vegetables}              =&gt; {dairy produce} 0.003457041  0.8500000 0.004067107 1.918694    34
[4] {bread and backed goods,                                                                      
     fruit,                                                                                       
     non-alc. drinks,                                                                             
     perfumery,                                                                                   
     vegetables}              =&gt; {dairy produce} 0.003863752  0.8260870 0.004677173 1.864715    38
[5] {bread and backed goods,                                                                      
     perfumery,                                                                                   
     vegetables}              =&gt; {dairy produce} 0.013523132  0.8012048 0.016878495 1.808549   133</code></pre>
</div>
</div>
<p>if in LHS products group <code>bread and backed goods</code> then in RHS with confidence 80% also products group <code>dairy produce</code> (258 rules - 5 chosen)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"vegetables"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">67</span>, <span class="dv">134</span>, <span class="dv">200</span>, <span class="dv">267</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                             rhs                 support confidence    coverage     lift count
[1] {frozen foods,                                                                                   
     long-life bakery products,                                                                      
     non-alc. drinks,                                                                                
     vegetables}                 =&gt; {dairy produce} 0.003660397  0.9473684 0.003863752 2.138483    36
[2] {chocolate,                                                                                      
     staple foods,                                                                                   
     vegetables}                 =&gt; {dairy produce} 0.003762074  0.8809524 0.004270463 1.988562    37
[3] {bread and backed goods,                                                                         
     cheese,                                                                                         
     fruit,                                                                                          
     sausage,                                                                                        
     vegetables}                 =&gt; {dairy produce} 0.006914082  0.8500000 0.008134215 1.918694    68
[4] {bread and backed goods,                                                                         
     fruit,                                                                                          
     non-alc. drinks,                                                                                
     perfumery,                                                                                      
     vegetables}                 =&gt; {dairy produce} 0.003863752  0.8260870 0.004677173 1.864715    38
[5] {bread and backed goods,                                                                         
     perfumery,                                                                                      
     vegetables}                 =&gt; {dairy produce} 0.013523132  0.8012048 0.016878495 1.808549   133</code></pre>
</div>
</div>
<p>if in LHS products group <code>vegetables</code> then in RHS with confidence 80% also products group <code>dairy produce</code> (267 rules - 5 chosen)</p>
<p><strong>NOTE</strong> Two exeptions - 186 i 258 (<code>bread and backed goods</code>)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"vegetables"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="fu">c</span>(<span class="dv">186</span>, <span class="dv">258</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                   rhs                          support confidence    coverage     lift count
[1] {chocolate,                                                                                     
     dairy produce,                                                                                 
     non-alc. drinks,                                                                               
     sausage,                                                                                       
     vegetables}       =&gt; {bread and backed goods} 0.003558719  0.8333333 0.004270463 2.411958    35
[2] {chocolate,                                                                                     
     non-alc. drinks,                                                                               
     sausage,                                                                                       
     vegetables}       =&gt; {bread and backed goods} 0.004168785  0.8039216 0.005185562 2.326830    41</code></pre>
</div>
</div>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"dairy produce"</span>), </span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"confidence"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">359</span>, <span class="dv">717</span>, <span class="dv">1076</span>, <span class="dv">1434</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                          rhs                 support confidence    coverage     lift count
[1] {chocolate,                                                                                   
     fruit,                                                                                       
     staple foods}            =&gt; {dairy produce} 0.003558719  1.0000000 0.003558719 2.257287    35
[2] {cheese,                                                                                      
     fruit,                                                                                       
     poultry}                 =&gt; {dairy produce} 0.004880529  0.8421053 0.005795628 1.900873    48
[3] {bread and backed goods,                                                                      
     non-alc. drinks,                                                                             
     snacks,                                                                                      
     vegetables}              =&gt; {dairy produce} 0.003050330  0.7894737 0.003863752 1.782069    30
[4] {bread and backed goods,                                                                      
     candy,                                                                                       
     non-alc. drinks}         =&gt; {dairy produce} 0.005185562  0.7183099 0.007219115 1.621432    51
[5] {bags,                                                                                        
     chocolate}               =&gt; {dairy produce} 0.007422471  0.5000000 0.014844942 1.128644    73</code></pre>
</div>
</div>
<p><code>dairy produce</code> occurs in RHS with confidence over 50% (1434 rules - 1/3 of all created - chosen))</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"dairy produce"</span>), </span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"count"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                support confidence   coverage     lift count
[1]  {bread and backed goods}  =&gt; {dairy produce} 0.18769700  0.5432607 0.34550076 1.226295  1846
[2]  {vegetables}              =&gt; {dairy produce} 0.17041179  0.6242086 0.27300458 1.409018  1676
[3]  {fruit}                   =&gt; {dairy produce} 0.15638027  0.6277551 0.24911032 1.417024  1538
[4]  {sausage}                 =&gt; {dairy produce} 0.10737163  0.5677419 0.18912049 1.281557  1056
[5]  {cheese}                  =&gt; {dairy produce} 0.08459583  0.6677368 0.12669039 1.507274   832
[6]  {bread and backed goods,                                                                    
      vegetables}              =&gt; {dairy produce} 0.08195221  0.7051619 0.11621759 1.591753   806
[7]  {fruit,                                                                                     
      vegetables}              =&gt; {dairy produce} 0.07869853  0.7350427 0.10706660 1.659203   774
[8]  {bread and backed goods,                                                                    
      fruit}                   =&gt; {dairy produce} 0.07727504  0.7183365 0.10757499 1.621492   760
[9]  {bread and backed goods,                                                                    
      non-alc. drinks}         =&gt; {dairy produce} 0.07229283  0.5818331 0.12425013 1.313364   711
[10] {frozen foods}            =&gt; {dairy produce} 0.06710727  0.5739130 0.11692933 1.295487   660
[11] {non-alc. drinks,                                                                           
      vegetables}              =&gt; {dairy produce} 0.06446365  0.6817204 0.09456024 1.538839   634
[12] {bread and backed goods,                                                                    
      sausage}                 =&gt; {dairy produce} 0.06395526  0.6172718 0.10360956 1.393360   629
[13] {fruit,                                                                                     
      non-alc. drinks}         =&gt; {dairy produce} 0.06375191  0.6807818 0.09364514 1.536720   627
[14] {vinegar/oils}            =&gt; {dairy produce} 0.05866802  0.6519774 0.08998475 1.471700   577
[15] {sausage,                                                                                   
      vegetables}              =&gt; {dairy produce} 0.05266904  0.6906667 0.07625826 1.559033   518</code></pre>
</div>
</div>
<p>The first three rules has two elements and made up of frequent product groups (<span class="text-warning">if <code>bread and backed goods</code> / <code>vegetables</code> / <code>fruit</code> then <code>dairy produce</code></span>) - these rules have confidence over 54% and very high support (&gt;15.6%)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"non-alc. drinks"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.80</span>), </span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs                 support confidence   coverage     lift count
[1]  {frozen foods,                                                                               
      fruit,                                                                                      
      non-alc. drinks}         =&gt; {dairy produce} 0.015353330  0.8118280 0.01891205 1.832529   151
[2]  {bread and backed goods,                                                                     
      non-alc. drinks,                                                                            
      vinegar/oils}            =&gt; {dairy produce} 0.014438231  0.8114286 0.01779359 1.831627   142
[3]  {fruit,                                                                                      
      non-alc. drinks,                                                                            
      vinegar/oils}            =&gt; {dairy produce} 0.012608033  0.8104575 0.01555669 1.829435   124
[4]  {bread and backed goods,                                                                     
      cheese,                                                                                     
      fruit,                                                                                      
      non-alc. drinks}         =&gt; {dairy produce} 0.012201322  0.8510638 0.01433655 1.921095   120
[5]  {cheese,                                                                                     
      fruit,                                                                                      
      non-alc. drinks,                                                                            
      vegetables}              =&gt; {dairy produce} 0.011286223  0.8345865 0.01352313 1.883901   111
[6]  {bread and backed goods,                                                                     
      cheese,                                                                                     
      non-alc. drinks,                                                                            
      vegetables}              =&gt; {dairy produce} 0.010981190  0.8780488 0.01250635 1.982008   108
[7]  {eggs,                                                                                       
      fruit,                                                                                      
      non-alc. drinks}         =&gt; {dairy produce} 0.010269446  0.8559322 0.01199797 1.932085   101
[8]  {non-alc. drinks,                                                                            
      staple foods,                                                                               
      vegetables}              =&gt; {dairy produce} 0.009659380  0.8119658 0.01189629 1.832840    95
[9]  {cheese,                                                                                     
      frozen foods,                                                                               
      non-alc. drinks}         =&gt; {dairy produce} 0.009049314  0.8240741 0.01098119 1.860172    89
[10] {frozen foods,                                                                               
      fruit,                                                                                      
      non-alc. drinks,                                                                            
      vegetables}              =&gt; {dairy produce} 0.009049314  0.8557692 0.01057448 1.931717    89</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"non-alc. drinks"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.30</span>), </span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"support"</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                            rhs                  support confidence   coverage     lift count
[1]  {beer,                                                                                          
      dairy produce}             =&gt; {non-alc. drinks} 0.02379258  0.5176991 0.04595831 1.628261   234
[2]  {bread and backed goods,                                                                        
      fruit,                                                                                         
      sausage}                   =&gt; {non-alc. drinks} 0.02003050  0.5225464 0.03833249 1.643506   197
[3]  {beer,                                                                                          
      vegetables}                =&gt; {non-alc. drinks} 0.01718353  0.5044776 0.03406202 1.586676   169
[4]  {fruit,                                                                                         
      perfumery}                 =&gt; {non-alc. drinks} 0.01657346  0.5309446 0.03121505 1.669920   163
[5]  {bread and backed goods,                                                                        
      dairy produce,                                                                                 
      fruit,                                                                                         
      sausage}                   =&gt; {non-alc. drinks} 0.01596340  0.5215947 0.03060498 1.640513   157
[6]  {dairy produce,                                                                                 
      frozen foods,                                                                                  
      fruit}                     =&gt; {non-alc. drinks} 0.01535333  0.5000000 0.03070666 1.572594   151
[7]  {beer,                                                                                          
      fruit}                     =&gt; {non-alc. drinks} 0.01525165  0.5597015 0.02724962 1.760366   150
[8]  {bread and backed goods,                                                                        
      chocolate,                                                                                     
      dairy produce}             =&gt; {non-alc. drinks} 0.01494662  0.5157895 0.02897814 1.622254   147
[9]  {bags,                                                                                          
      sausage}                   =&gt; {non-alc. drinks} 0.01433655  0.5035714 0.02846975 1.583826   141
[10] {bread and backed goods,                                                                        
      dairy produce,                                                                                 
      long-life bakery products} =&gt; {non-alc. drinks} 0.01392984  0.5055351 0.02755465 1.590002   137</code></pre>
</div>
</div>
<p>products group <code>non-alc. drinks</code> even if it is frequent product group, it builds rules with low support</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"vegetables"</span> <span class="sc">&amp;</span> confidence <span class="sc">&gt;</span> <span class="fl">0.75</span>), </span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"support"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                          rhs              support confidence    coverage     lift count
[1]  {dairy produce,                                                                            
      poultry,                                                                                  
      sausage}                 =&gt; {vegetables} 0.008845958  0.7909091 0.011184545 2.897054    87
[2]  {bread and backed goods,                                                                   
      dairy produce,                                                                            
      fruit,                                                                                    
      pork}                    =&gt; {vegetables} 0.006405694  0.7590361 0.008439248 2.780306    63
[3]  {bread and backed goods,                                                                   
      dairy produce,                                                                            
      poultry,                                                                                  
      sausage}                 =&gt; {vegetables} 0.005795628  0.7702703 0.007524148 2.821456    57
[4]  {bread and backed goods,                                                                   
      dairy produce,                                                                            
      non-alc. drinks,                                                                          
      pork}                    =&gt; {vegetables} 0.005185562  0.7611940 0.006812405 2.788210    51
[5]  {dairy produce,                                                                            
      fruit,                                                                                    
      pork,                                                                                     
      sausage}                 =&gt; {vegetables} 0.005083884  0.7575758 0.006710727 2.774956    50
[6]  {poultry,                                                                                  
      staple foods}            =&gt; {vegetables} 0.004982206  0.7777778 0.006405694 2.848955    49
[7]  {dairy produce,                                                                            
      frozen foods,                                                                             
      fruit,                                                                                    
      vinegar/oils}            =&gt; {vegetables} 0.004473818  0.7586207 0.005897306 2.778784    44
[8]  {dairy produce,                                                                            
      eggs,                                                                                     
      poultry}                 =&gt; {vegetables} 0.004372140  0.7543860 0.005795628 2.763272    43
[9]  {cheese,                                                                                   
      fruit,                                                                                    
      staple foods}            =&gt; {vegetables} 0.004168785  0.7884615 0.005287239 2.888089    41
[10] {dairy produce,                                                                            
      frozen foods,                                                                             
      fruit,                                                                                    
      poultry}                 =&gt; {vegetables} 0.004168785  0.8367347 0.004982206 3.064911    41
[11] {dairy produce,                                                                            
      poultry,                                                                                  
      staple foods}            =&gt; {vegetables} 0.003965430  0.8125000 0.004880529 2.976141    39
[12] {beef,                                                                                     
      fruit,                                                                                    
      pork}                    =&gt; {vegetables} 0.003863752  0.7916667 0.004880529 2.899829    38
[13] {bread and backed goods,                                                                   
      fruit,                                                                                    
      pork,                                                                                     
      sausage}                 =&gt; {vegetables} 0.003863752  0.7600000 0.005083884 2.783836    38
[14] {cheese,                                                                                   
      dairy produce,                                                                            
      fruit,                                                                                    
      staple foods}            =&gt; {vegetables} 0.003863752  0.8260870 0.004677173 3.025909    38
[15] {beef,                                                                                     
      beer,                                                                                     
      bread and backed goods}  =&gt; {vegetables} 0.003762074  0.7551020 0.004982206 2.765895    37
[16] {cheese,                                                                                   
      poultry,                                                                                  
      sausage}                 =&gt; {vegetables} 0.003457041  0.7555556 0.004575496 2.767556    34
[17] {beef,                                                                                     
      dairy produce,                                                                            
      fruit,                                                                                    
      pork}                    =&gt; {vegetables} 0.003457041  0.8095238 0.004270463 2.965239    34
[18] {beef,                                                                                     
      fruit,                                                                                    
      poultry}                 =&gt; {vegetables} 0.003355363  0.7857143 0.004270463 2.878026    33
[19] {dairy produce,                                                                            
      eggs,                                                                                     
      pork}                    =&gt; {vegetables} 0.003355363  0.7674419 0.004372140 2.811095    33
[20] {beef,                                                                                     
      beer,                                                                                     
      non-alc. drinks}         =&gt; {vegetables} 0.003355363  0.8048780 0.004168785 2.948222    33
[21] {fruit,                                                                                    
      poultry,                                                                                  
      vinegar/oils}            =&gt; {vegetables} 0.003253686  0.7619048 0.004270463 2.790813    32
[22] {cheese,                                                                                   
      sausage,                                                                                  
      staple foods}            =&gt; {vegetables} 0.003253686  0.7619048 0.004270463 2.790813    32
[23] {bread and backed goods,                                                                   
      frozen foods,                                                                             
      fruit,                                                                                    
      vinegar/oils}            =&gt; {vegetables} 0.003253686  0.8000000 0.004067107 2.930354    32
[24] {beef,                                                                                     
      eggs,                                                                                     
      sausage}                 =&gt; {vegetables} 0.003152008  0.7560976 0.004168785 2.769542    31
[25] {cheese,                                                                                   
      dairy produce,                                                                            
      poultry,                                                                                  
      sausage}                 =&gt; {vegetables} 0.003050330  0.7692308 0.003965430 2.817648    30</code></pre>
</div>
</div>
<p>if in RHS products group <code>vegetables</code> then rules have low support below 0.88%</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, items <span class="sc">%in%</span> <span class="st">"dairy produce"</span>), </span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>    items <span class="sc">%in%</span> <span class="st">"vegetables"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">586</span>, <span class="dv">963</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                          rhs                          support confidence    coverage     lift count
[1] {vegetables}              =&gt; {dairy produce}          0.170411795  0.6242086 0.273004575 1.409018  1676
[2] {bread and backed goods,                                                                               
     frozen foods,                                                                                         
     pork,                                                                                                 
     vegetables}              =&gt; {dairy produce}          0.003355363  0.8918919 0.003762074 2.013256    33
[3] {beer,                                                                                                 
     dairy produce,                                                                                        
     fruit,                                                                                                
     vegetables}              =&gt; {bread and backed goods} 0.005185562  0.5930233 0.008744281 1.716417    51</code></pre>
</div>
</div>
<p>17% (1676 out of 9835) of transactions contain both <code>dairy produce</code> &amp; <code>vegetables</code> (3 chosen rules)</p>
<div class="cell" data-fig.showtext="false">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">subset</span>(rules_groc_lvl2_new_3, items <span class="sc">%in%</span> <span class="st">"bread and backed goods"</span>), </span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    items <span class="sc">%in%</span> <span class="st">"vegetables"</span>)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">456</span>, <span class="dv">893</span>)])</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                          rhs                          support confidence    coverage     lift count
[1] {delicatessen,                                                                                         
     vegetables}              =&gt; {bread and backed goods} 0.003355363  0.5789474 0.005795628 1.675676    33
[2] {bread and backed goods,                                                                               
     eggs,                                                                                                 
     vegetables,                                                                                           
     vinegar/oils}            =&gt; {dairy produce}          0.003355363  0.8918919 0.003762074 2.013256    33
[3] {cheese,                                                                                               
     dairy produce,                                                                                        
     fruit,                                                                                                
     non-alc. drinks,                                                                                      
     sausage,                                                                                              
     vegetables}              =&gt; {bread and backed goods} 0.003558719  0.7777778 0.004575496 2.251161    35</code></pre>
</div>
</div>
<p>11% (1143 out of 9835) of transactions contain both <code>bread and backed goods</code> and <code>vegetables</code> (3 chosen rules)</p>
<p><br></p>
</section>
<section id="final-summary" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="final-summary"><span class="header-section-number">4.3</span> FINAL SUMMARY</h2>
<p>The above analyzes show that it is the most frequently purchased product is <code>whole milk</code>, and 1/3 rules as the consequence have <code>dairy produce</code>. Hence, the <b>dairy department</b> should be at the very end of the store, so that the customer has to go as far as possible. <span class="text-danger">If <code>vegetables</code> &amp; <code>fruit</code> then also <code>whole milk</code></span> is a strong dependency, hence the <b>fruit and vegetable department</b> should be at the very beginning of the store. Especially since rules having <code>vegetables</code> in the consequent have very little support.</p>
<p>Strong correlation was observed in rules based on frequent product groups between <code>dairy produce</code> &amp; <code>bread and backed goods</code>, which would imply that the <b>bread department</b> should be located next to the <b>fruit and vegetable department</b>, possibly divided by a <b>rare department</b> (impulse purchases).</p>
<p><code>rolls/buns</code> are a particularly popular product (18% transactions), therefore, it is recommended to focus especially on the development offer of these products. Taking into account high support for <code>whole milk</code> (25% transactions), it cannot be missing from the offer. It should be mentioned that <code>yogurt</code> has a similarly high position (14% transactions).</p>
<p>It is worth noting that while the products group <code>non-alc. drinks</code> is frequent, it does not produce frequent rules. Quite low support for this group would suggest locating the drinks section on the side of the store.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Janina Smoła</div>   
    <div class="nav-footer-right">Made with <a href="https://quarto.org/" target="_blank">Posit Quarto</a></div>
  </div>
</footer>



</body></html>